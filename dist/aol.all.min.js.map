{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/ol/util.js","webpack:///./node_modules/ol/AssertionError.js","webpack:///./node_modules/ol/asserts.js","webpack:///./src/core/map.component.ts","webpack:///./node_modules/ol/array.js","webpack:///./node_modules/ol/math.js","webpack:///external \"angular\"","webpack:///./node_modules/ol/extent.js","webpack:///./src/core/layers/index.ts","webpack:///./src/core/sources/source.component.ts","webpack:///./src/core/styles/style.component.ts","webpack:///external \"ol.style\"","webpack:///external \"ol.source\"","webpack:///external \"ol.interaction\"","webpack:///external \"ol\"","webpack:///./src/core/layers/layer.component.ts","webpack:///./src/core/feature.component.ts","webpack:///external \"ol.layer\"","webpack:///./src/core/styles/circle.component.ts","webpack:///./src/core/view.component.ts","webpack:///./src/core/sources/index.ts","webpack:///./src/core/geometry.component.ts","webpack:///external \"ol.geom\"","webpack:///external \"ol.proj\"","webpack:///./src/core/styles/text.component.ts","webpack:///./src/core/index.ts","webpack:///./src/core/sources/xyz.component.ts","webpack:///./src/core/layers/layertile.component.ts","webpack:///./src/core/layers/layervector.component.ts","webpack:///./src/core/layers/layergroup.component.ts","webpack:///./src/core/layers/layerwebgl.component.ts","webpack:///./src/core/sources/xyz.component.extend.ts","webpack:///./src/core/sources/osmmaps.component.ts","webpack:///./src/core/sources/vector.component.ts","webpack:///./src/core/sources/cluster.component.ts","webpack:///./src/core/sources/tiledebug.component.ts","webpack:///./src/core/coordinate.component.ts","webpack:///./src/core/styles/index.ts","webpack:///./src/core/styles/stroke.component.ts","webpack:///./src/core/styles/fill.component.ts","webpack:///./src/core/styles/icon.component.ts","webpack:///./src/core/overlay.component.ts","webpack:///./src/core/interactions/index.ts","webpack:///./src/core/interactions/default.component.ts","webpack:///./src/core/interactions/modify.component.ts","webpack:///./src/core/interactions/select.component.ts","webpack:///./src/core/interactions/select.component.extend.ts","webpack:///external \"ol.events.condition\"","webpack:///./src/core/interactions/draganddrop.component.ts","webpack:///./src/core/interactions/draganddrop.component.extend.ts","webpack:///external \"ol.format\"","webpack:///./src/core/interactions/draw.component.ts","webpack:///./src/core/interactions/draw.component.extend.ts","webpack:///./node_modules/ol/obj.js","webpack:///./node_modules/ol/webgl.js","webpack:///./node_modules/ol/webgl/Buffer.js","webpack:///./node_modules/ol/Disposable.js","webpack:///./node_modules/ol/webgl/ContextEventType.js","webpack:///./node_modules/ol/transform.js","webpack:///./node_modules/ol/vec/mat4.js","webpack:///./node_modules/ol/webgl/PostProcessingPass.js","webpack:///./node_modules/ol/webgl/Helper.js","webpack:///./node_modules/ol/geom/GeometryType.js","webpack:///./node_modules/ol/ImageState.js","webpack:///./node_modules/ol/events.js","webpack:///./node_modules/ol/functions.js","webpack:///./node_modules/ol/events/Event.js","webpack:///./node_modules/ol/events/Target.js","webpack:///./node_modules/ol/events/EventType.js","webpack:///./node_modules/ol/Observable.js","webpack:///./node_modules/ol/source/State.js","webpack:///./node_modules/ol/renderer/Layer.js","webpack:///./node_modules/ol/renderer/webgl/Layer.js","webpack:///./node_modules/ol/ViewHint.js","webpack:///./node_modules/ol/worker/webgl.js","webpack:///./node_modules/ol/webgl/RenderTarget.js","webpack:///./node_modules/ol/ObjectEventType.js","webpack:///./node_modules/ol/Object.js","webpack:///./node_modules/ol/layer/Property.js","webpack:///./node_modules/ol/layer/Base.js","webpack:///./node_modules/ol/render/EventType.js","webpack:///./node_modules/ol/layer/Layer.js","webpack:///./node_modules/ol/color.js","webpack:///./node_modules/ol/colorlike.js","webpack:///./node_modules/ol/dom.js","webpack:///./node_modules/ol/css.js","webpack:///./node_modules/ol/render/canvas.js","webpack:///./node_modules/ol/style/Image.js","webpack:///./node_modules/ol/style/RegularShape.js","webpack:///./node_modules/ol/style/Circle.js","webpack:///./node_modules/ol/style/Fill.js","webpack:///./node_modules/ol/style/Stroke.js","webpack:///./node_modules/ol/style/Style.js","webpack:///./node_modules/ol/layer/BaseVector.js","webpack:///./node_modules/ol/source/VectorEventType.js","webpack:///./node_modules/ol/renderer/webgl/PointsLayer.js","webpack:///./node_modules/ol/style/expressions.js","webpack:///./node_modules/ol/webgl/ShaderBuilder.js","webpack:///./node_modules/ol/layer/WebGLPoints.js","webpack:///./node_modules/ol/tilegrid/common.js","webpack:///./node_modules/ol/TileRange.js","webpack:///./node_modules/ol/size.js","webpack:///./node_modules/ol/tilecoord.js","webpack:///./node_modules/ol/tilegrid/TileGrid.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","abstract","Error","uidCounter_","getUid","obj","ol_uid","String","VERSION","extendStatics","__extends","b","setPrototypeOf","__proto__","Array","__","this","constructor","_super","AssertionError","code","_this","message","split","assert","assertion","errorCode","host","componentType","onDblClick","angular","noop","onPointerDrag","onPointerMove","onPostCompose","onPostRender","onPreCompose","onPropertyChange","onSingleClick","onClick","onMoveEnd","controls","interactions","$onInit","instance","Map","setTarget","on","event","MapComponent","component","bindings","pixelRatio","keyboardEventTarget","onPostcompose","onPostrender","onRenderComplete","controller","numberSafeCompareFunction","a","includes","arr","indexOf","linearFindNearest","target","direction","length","equals","arr1","arr2","len1","isSorted","opt_func","opt_strict","compare","every","currentVal","index","res","clamp","min","max","Math","cosh","buffer","extent","opt_extent","createEmpty","Infinity","createOrUpdate","minX","minY","maxX","maxY","extent1","extent2","getTopLeft","$onDestroy","setSource","_register","source","instanceDone","SourceComponent","sourceComponentConfig","attributions","attributionsCollapsible","featureHost","layerVectorHost","Style","mutiple","style","getStyle","setStyle","update","changed","splice","$onChanges","changes","setImage","currentValue","setFill","setStroke","setText","setZIndex","StyleComponent","aolStyleComponent","geometry","fill","image","stroke","text","zIndex","require","aolLayerVector","aolStyle","ol","interaction","layerGroupComponent","mapComponent","undefined","visible","setVisible","prerender","postrender","setProperties","set","getLayers","push","remove","properties","un","previousValue","LayerComponent","layerComponentConfig","opacity","minResolution","maxResolution","className","Feature","id","setId","addFeature","removeFeature","FeatureComponent","aolSourceVector","layer","radius","styleHost","$postLink","Circle","setRadius","styleCircleComponent","aolStyleCircleComponent","snapToPixel","aolStyleCircle","zoom","center","zoomAnimation","View","setView","animationOptions","setZoom","setCenter","animate","ViewComponent","constrainRotation","enableRotation","maxZoom","minZoom","resolution","resolutions","rotation","zoomFactor","projection","change","LineString","setGeometry","GeometryLinestringComponent","aolGeometryLinestringComponent","aolGeometryLinestring","Point","GeometryPointComponent","aolGeometryPointComponent","aolGeometryPoint","Polygon","GeometryPolygonComponent","aolGeometryPolygonComponent","aolGeometryPolygon","geom","proj","Text","setFont","setOffsetX","setOffsetY","setScale","setRotation","setTextAlign","setTextBaseline","styleTextComponent","aolStyleTextComponent","font","maxAngle","offsetX","offsetY","overflow","placement","scale","rotateWithView","textAlign","textBaseline","backgroundFill","backgroundStroke","padding","aolStyleText","aolModule","aolLayerTile","aolLayerWebgl","aolLayerGroup","aolSourceXyz","aolSourceOsm","aolSourceCluster","aolSourceTiledebug","aolCoordinate","aolCollectionCoordinates","aolStyleStroke","aolStyleIcon","aolStyleFill","aolOverlay","aolInteractionDefaults","aolInteractionDraw","aolInteractionModify","aolInteractionSelect","aolInteractionDraganddrop","forEach","registerComponent","decorate","XYZ","SourceXYZExtend","SourceXYZComponent","cacheSize","crossOrigin","opaque","reprojectionErrorThreshold","tileGrid","tileLoadFunction","tilePixelRatio","tileSize","tileUrlFunction","url","urls","wrapX","transition","zDirection","Tile","LayerTileComponent","preload","useInterimTilesOnError","Vector","LayerVectorComponent","renderOrder","renderBuffer","declutter","updateWhileAnimating","updateWhileInteracting","LayerGroupComponent","symbol","symbolType","size","color","offset","LayerWebglComponent","disableHitDetection","resolutions_4326","forEachTileCoord","OSM","ngOnChanges","SourceOSMComponent","layerWebglHost","addFeatures","SourceVectorComponent","features","format","loader","overlaps","strategy","useSpatialIndex","Cluster","SourceClusterComponent","distance","geometryFunction","TileDebug","SourceTiledebugComponent","srid","geometryPointHost","viewHost","referenceProjection","referenceProjectionCode","transformedCoordinates","isNumber","x","y","map","getView","getProjection","getCode","transform","setCoordinates","CoordinateComponent","geometryLinestring","geometryPolygon","coordinates","coordinate","CollectionCoordinatesComponent","aolCollectionCoordinatesComponent","styleCircleHost","Stroke","setColor","setLineCap","setLineDash","setLineDashOffset","setLineJoin","setMiterLimit","setWidth","StrokeComponent","aolStrokeComponent","lineCap","lineJoin","lineDash","lineDashOffset","miterLimit","width","styleTextHost","Fill","FillComponent","aolFillComponent","img","imgSize","height","Icon","setOpacity","styleIconComponent","aolStyleIconComponent","anchor","anchorOrigin","anchorXUnits","anchorYUnits","offsetOrigin","src","$element","element","position","fromLonLat","Overlay","addOverlay","setPosition","removeOverlay","OverlayComponent","positioning","stopEvent","insertFirst","autoPan","autoPanAnimation","autoPanMargin","addInteraction","removeInteraction","DefaultInteractionComponent","altShiftDragRotate","onFocusOnly","doubleClickZoom","keyboard","mouseWheelZoom","shiftDragZoom","dragPan","pinchRotate","pinchZoom","zoomDelta","zoomDuration","onModifyEnd","onModifyStart","onChange","onChangeActive","Modify","console","error","ModifyInteractionComponent","condition","deleteCondition","insertVertexCondition","pixelTolerance","onSelect","that","initCondition","Select","selected","getFeatures","dispatchEvent","type","deselected","mapBrowserEvent","manualDispath","filterCondition","result","frameState_","layerStatesArray","layers","item","getSource","getFeatureById","find","v","deSelecteds","getArray","rm","extend","setTimeout","SelectInteractionExtend","SelectInteractionComponent","addCondition","removeCondition","toggleCondition","multi","filter","conditionType","altKeyOnly","altShiftKeysOnly","click","doubleClick","focus","mouseActionButton","mouseOnly","noModifierKeys","penOnly","platformModifierKeyOnly","pointerMove","primaryAction","shiftKeyOnly","singleClick","targetNotEditable","touchOnly","events","onAddFeatures","DragAndDrop","DraganddropInteractionExtend","DraganddropInteractionComponent","formatConstructors","defaultFormat","GPX","GeoJSON","IGC","KML","TopoJSON","EsriJSON","GML","IIIFInfo","MVT","OWS","Polyline","WFS","WKT","WMSCapabilities","WMSGetFeatureInfo","WMTSCapabilities","child","getFormat","featureConlist","formatCon","onDrawEnd","onDrawStart","init","Draw","DrawInteractionExtend","DrawInteractionComponent","clickTolerance","dragVertexDelay","snapTolerance","stopClick","maxPoints","minPoints","finishCondition","geometryName","freehand","freehandCondition","__createRectangleParams","start","end","assign","var_sources","TypeError","output","ii","arguments","clear","values","supportedExtensions","CONTEXT_IDS","getContext","canvas","opt_attributes","context","e","BufferUsage","getArrayClassForType","Float32Array","Uint32Array","WebGLArrayBuffer","opt_usage","array","usage","ofSize","fromArray","from","fromArrayBuffer","getType","getUsage","getSize","Disposable","disposed_","dispose","disposeInternal","tmp_","multiply","transform1","transform2","a1","b1","c1","d1","e1","f1","a2","b2","c2","d2","e2","f2","f","apply","compose","dx1","dy1","sx","sy","angle","dx2","dy2","sin","cos","makeInverse","mat","det","fromTransform","mat4","WebGLPostProcessingPass","options","gl_","webGlContext","gl","scaleRatio_","scaleRatio","renderTargetTexture_","createTexture","renderTargetTextureSize_","frameBuffer_","createFramebuffer","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","fragmentShader","FRAGMENT_SHADER","renderTargetProgram_","createProgram","attachShader","linkProgram","renderTargetVerticesBuffer_","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","renderTargetAttribLocation_","getAttribLocation","renderTargetUniformLocation_","getUniformLocation","renderTargetTextureLocation_","uniforms_","uniforms","keys","location","getGL","frameState","textureSize","drawingBufferWidth","drawingBufferHeight","bindFramebuffer","FRAMEBUFFER","getFrameBuffer","viewport","internalFormat","RGBA","UNSIGNED_BYTE","bindTexture","TEXTURE_2D","texImage2D","texParameteri","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","framebufferTexture2D","COLOR_ATTACHMENT0","nextPass","activeTexture","TEXTURE0","clearColor","COLOR_BUFFER_BIT","enable","BLEND","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","useProgram","enableVertexAttribArray","vertexAttribPointer","FLOAT","uniform2f","uniform1i","applyUniforms","drawArrays","TRIANGLES","textureSlot","uniform","HTMLCanvasElement","ImageData","texture","Uint8Array","data","isArray","uniform3f","uniform4f","uniform1f","DefaultUniform","AttributeType","UNSIGNED_SHORT","UNSIGNED_INT","getByteSizeFromType","BYTES_PER_ELEMENT","Uint16Array","WebGLHelper","opt_options","boundHandleWebGLContextLost_","handleWebGLContextLost","boundHandleWebGLContextRestored_","handleWebGLContextRestored","canvas_","document","createElement","left","bufferCache_","currentProgram_","getSupportedExtensions","getExtension","addEventListener","ContextEventType","offsetRotateMatrix_","offsetScaleMatrix_","tmpMat4_","uniformLocations_","attribLocations_","name_1","postProcessPasses_","postProcesses","shaderCompileErrors_","startTime_","Date","now","bufferKey","bufferCache","webGlBuffer","flushBufferData","deleteBuffer","buf","bufferCacheEntry","isContextLost","removeEventListener","prepareDraw","getCanvas","applyFrameState","prepareDrawToRenderTarget","renderTarget","opt_disableAlphaBlend","getFramebuffer","getTexture","ZERO","drawElements","elementType","numItems","offsetInBytes","finalizeDraw","viewState","offsetScaleMatrix","offsetRotateMatrix","rotate","setUniformMatrixValue","setUniformFloatValue","HTMLImageElement","complete","program","shader","getProgram","fragmentShaderSource","vertexShaderSource","getShaderInfoLog","getShaderCompileErrors","getAttributeLocation","makeProjectionTransform","uniformMatrix4fv","enableAttributeArray_","attribName","stride","enableAttributes","attributes","attr","computeAttributesStride","opt_data","opt_texture","listen","listener","opt_this","opt_once","originalListener_1","eventsKey","listenOnce","unlistenByKey","VOID","BaseEvent","propagationStopped","preventDefault","stopPropagation","Target","opt_target","eventTarget_","pendingRemovals_","dispatching_","listeners_","listeners","evt","Event","propagate","pendingRemovals","getListeners","hasListener","opt_type","Observable","revision_","EventType","getRevision","len","once","LayerRenderer","boundHandleImageChange_","handleImageChange_","layer_","pixel","prepareFrame","renderFrame","loadedTileCallback","tiles","tile","tileCoord","toString","createLoadedTileFinder","tileRange","callback","forEachLoadedTile","forEachFeatureAtCoordinate","hitTolerance","declutteredFeatures","getDataAtPixel","getLayer","handleFontsChanged","getState","ImageState","renderIfReadyAndVisible","loadImage","imageState","load","getVisible","getSourceState","WebGLWorkerMessageType","WebGLLayerRenderer","helper","blob","Blob","URL","createObjectURL","tmpArray4","WebGLRenderTarget","opt_size","helper_","texture_","framebuffer_","size_","data_","dataCacheDirty_","updateSize_","setSize","clearCachedData","readAll","readPixels","readPixel","floor","ObjectEvent","oldValue","BaseObject","opt_values","values_","getKeys","getProperties","notify","eventType","getChangeEventType","ObjectEventType","opt_silent","unset","changeEventTypeCache","Base","BaseLayer","className_","state_","getClassName","getLayerState","opt_managed","state","managed","getZIndex","round","getOpacity","sourceState","getExtent","getMaxResolution","getMinResolution","getMinZoom","getMaxZoom","getLayersArray","opt_array","getLayerStatesArray","opt_states","setExtent","setMaxResolution","setMinResolution","setMaxZoom","setMinZoom","zindex","Layer","baseOptions","mapPrecomposeKey_","mapRenderKey_","sourceChangeKey_","renderer_","render","setMap","handleSourcePropertyChange_","states","handleSourceChange_","layerRenderer","getRenderer","layerState","some","arrayLayerState","createRenderer","hasRenderer","HEX_COLOR_RE_","NAMED_COLOR_RE_","fromNamed","el","body","appendChild","rgb","getComputedStyle","removeChild","cache","fromString","g","exec","hasAlpha","parseInt","substr","normalize","slice","Number","fromStringInternal_","asArray","asColorLike","createCanvasContext2D","opt_width","opt_height","opt_canvasPool","shift","getFontParameters","family","fontFamily","fontWeight","fontStyle","families","weight","checkedFonts","warn","measureFont","div","heights","measureContext","textHeights","interval","referenceWidth","referenceFonts","isAvailable","available","referenceFont","measureTextWidth","check","done","fonts","clearInterval","measureText","ImageStyle","opacity_","rotateWithView_","rotation_","scale_","displacement_","displacement","clone","getScale","getRotation","getRotateWithView","getDisplacement","getAnchor","getImage","getHitDetectionImage","getImageState","getImageSize","getHitDetectionImageSize","getOrigin","setRotateWithView","listenImageChange","unlistenImageChange","RegularShape","hitDetectionCanvas_","fill_","origin_","points_","points","radius_","radius1","radius2_","radius2","angle_","stroke_","anchor_","imageSize_","hitDetectionImageSize_","getFill","getPoints","getRadius","getRadius2","getAngle","getStroke","strokeStyle","strokeWidth","getColor","getWidth","getLineDash","getLineDashOffset","getLineJoin","getLineCap","getMiterLimit","renderOptions","imageSize","draw_","createHitDetectionCanvas_","angle0","radiusC","setTransform","translate","beginPath","arc","PI","lineTo","fillStyle","lineWidth","closePath","drawHitDetectionCanvas_","CircleStyle","color_","lineCap_","lineDash_","lineDashOffset_","lineJoin_","miterLimit_","width_","geometry_","geometryFunction_","defaultGeometryFunction","image_","renderer","text_","zIndex_","getGeometry","getText","setRenderer","getGeometryFunction","feature","defaultStyles","createDefaultStyle","BaseVector","BaseVectorLayer","declutter_","renderBuffer_","style_","styleFunction_","updateWhileAnimating_","updateWhileInteracting_","getDeclutter","getRenderBuffer","getRenderOrder","getStyleFunction","getUpdateWhileAnimating","getUpdateWhileInteracting","setRenderOrder","styleFunction","styles_1","WebGLPointsLayerRenderer","projectionMatrixTransform","sourceRevision_","verticesBuffer_","hitVerticesBuffer_","indicesBuffer_","program_","hitDetectionEnabled_","hitFragmentShader","hitVertexShader","hitProgram_","customAttributes","attribute","concat","hitDetectionAttributes","previousExtent_","currentTransform_","renderTransform_","invertRenderTransform_","renderInstructions_","hitRenderInstructions_","hitRenderTarget_","worker_","Worker","received","projectionTransform","hitDetection","vertexBuffer","indexBuffer","renderInstructions","featureCache_","featureCount_","sourceListenKeys_","VectorEventType","handleSourceFeatureAdded_","handleSourceFeatureChanged_","handleSourceFeatureDelete_","forEachFeature","renderCount","layerIndex","parseFloat","renderHitDetection","vectorSource","viewNotMoving","viewHints","ViewHint","extentChanged","sourceChanged","loadFeatures","rebuildBuffers_","featureCache","totalInstructionsCount","totalHitInstructionsCount","hitColor","tmpCoords","tmpColor","renderIndex","hitIndex","featureUid","GeometryType","getFlatCoordinates","radix","j","customAttributesCount","postMessage","hitMessage","coordinateToPixelTransform","colorDecodeId","uid","getFeatureByUid","terminate","ValueTypes","Operators","getValueType","test","JSON","stringify","valueArr","operator","getReturnType","numberToGlsl","arrayToGlsl","join","getStringNumberEquivalent","string","stringLiteralsMap","expressionToGlsl","typeHint","toGlsl","stringToGlsl","assertNumber","assertNumbers","assertString","assertBoolean","assertArgsCount","args","count","assertArgsMinCount","assertArgsMaxCount","assertArgsEven","assertUniqueInferredType","types","valueType","log2","getEqualOperator","inFragmentShader","variables","parsedArgs","val","opt_typeHint","interpolation","outputType","input","stop1","output1","stop2","fallback","assertArgsOdd","ShaderBuilder","varyings","sizeExpression","rotationExpression","offsetExpression","colorExpression","texCoordExpression","discardExpression","addUniform","addAttribute","addVarying","expression","setSizeExpression","setRotationExpression","setSymbolOffsetExpression","setColorExpression","setTextureCoordinateExpression","setFragmentDiscardExpression","setSymbolRotateWithView","getSizeExpression","getOffsetExpression","getColorExpression","getTextureCoordinateExpression","getFragmentDiscardExpression","getSymbolVertexShader","forHitDetection","offsetMatrix","varying","getSymbolFragmentShader","hitDetectionBypass","WebGLPointsLayer","parseResult_","symbStyle","texCoord","textureCoord","vertContext","parsedSize","parsedOffset","parsedTexCoord","fragContext","parsedColor","parsedOpacity","parsedRotation","opacityFilter","visibleSize","st","builder","parsedFilter","varName","Image","attrName","attributeName","props","parseLiteralStyle","hitDetectionDisabled_","TileRange","contains","containsXY","containsTileRange","getHeight","intersects","toSize","z","opt_tileCoord","tmpTileCoord","TileGrid","resolutions_","origins","zoomFactor_","origin","origins_","tileSizes_","tileSizes","tileSize_","extent_","fullTileRanges_","tmpSize_","sizes","calculateTileRanges_","getTileRangeForExtentAndZ","jj","forEachTileCoordParentTileRange","opt_tileRange","tileCoordExtent","getTileCoordExtent","getResolution","getResolutions","getTileCoordChildTileRange","getTileRangeExtent","getTileSize","getTileCoordForXYAndZ_","getTileCoordCenter","getTileCoordForCoordAndResolution","getTileCoordForXYAndResolution_","reverseIntersectionPolicy","getZForResolution","adjustX","adjustY","xFromOrigin","yFromOrigin","tileCoordX","tileCoordY","ceil","getTileCoordForCoordAndZ","getTileCoordResolution","getFullTileRange","opt_direction","fullTileRanges"],"mappings":"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","file":"aol.all.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 24);\n","/**\n * @module ol/util\n */\n/**\n * @return {?} Any return.\n */\nexport function abstract() {\n    return /** @type {?} */ ((function () {\n        throw new Error('Unimplemented abstract method.');\n    })());\n}\n/**\n * Counter for getUid.\n * @type {number}\n * @private\n */\nvar uidCounter_ = 0;\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {string} The unique ID for the object.\n * @api\n */\nexport function getUid(obj) {\n    return obj.ol_uid || (obj.ol_uid = String(++uidCounter_));\n}\n/**\n * OpenLayers version.\n * @type {string}\n */\nexport var VERSION = '6.2.1';\n//# sourceMappingURL=util.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/AssertionError\n */\nimport { VERSION } from './util.js';\n/**\n * Error object thrown when an assertion failed. This is an ECMA-262 Error,\n * extended with a `code` property.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error.\n */\nvar AssertionError = /** @class */ (function (_super) {\n    __extends(AssertionError, _super);\n    /**\n     * @param {number} code Error code.\n     */\n    function AssertionError(code) {\n        var _this = this;\n        var path = VERSION === 'latest' ? VERSION : 'v' + VERSION.split('-')[0];\n        var message = 'Assertion failed. See https://openlayers.org/en/' + path +\n            '/doc/errors/#' + code + ' for details.';\n        _this = _super.call(this, message) || this;\n        /**\n         * Error code. The meaning of the code can be found on\n         * https://openlayers.org/en/latest/doc/errors/ (replace `latest` with\n         * the version found in the OpenLayers script's header comment if a version\n         * other than the latest is used).\n         * @type {number}\n         * @api\n         */\n        _this.code = code;\n        /**\n         * @type {string}\n         */\n        _this.name = 'AssertionError';\n        // Re-assign message, see https://github.com/Rich-Harris/buble/issues/40\n        _this.message = message;\n        return _this;\n    }\n    return AssertionError;\n}(Error));\nexport default AssertionError;\n//# sourceMappingURL=AssertionError.js.map","/**\n * @module ol/asserts\n */\nimport AssertionError from './AssertionError.js';\n/**\n * @param {*} assertion Assertion we expected to be truthy.\n * @param {number} errorCode Error code.\n */\nexport function assert(assertion, errorCode) {\n    if (!assertion) {\n        throw new AssertionError(errorCode);\n    }\n}\n//# sourceMappingURL=asserts.js.map","import * as angular from 'angular';\r\nimport { Map, MapBrowserEvent, MapEvent } from 'ol';\r\nimport RenderEvent from 'ol/render/Event';\r\nimport { ObjectEvent } from 'ol/Object';\r\nimport Control from 'ol/control/Control';\r\nimport Interaction from 'ol/interaction/Interaction';\r\nimport { MapOptions } from 'ol/PluggableMap';\r\n\r\nexport class MapComponent implements angular.IController, MapOptions {\r\n  public instance: Map;\r\n  public componentType: string = 'map';\r\n  public host: angular.IRootElementService;\r\n  private onDblClick: Function = angular.noop;\r\n  private onPointerDrag: Function = angular.noop;\r\n  private onPointerMove: Function = angular.noop;\r\n  private onPostCompose: Function = angular.noop;\r\n  private onPostRender: Function = angular.noop;\r\n  private onPreCompose: Function = angular.noop;\r\n  private onPropertyChange: Function = angular.noop;\r\n  private onSingleClick: Function = angular.noop;\r\n  private onClick: Function = angular.noop;\r\n  private onMoveEnd: Function = angular.noop;\r\n\r\n  controls: Control[] = [];\r\n  interactions: Interaction[] = [];\r\n\r\n  constructor(host: angular.IRootElementService) {\r\n    this.host = host;\r\n  }\r\n\r\n  $onInit() {\r\n    this.instance = new Map(this);\r\n    this.instance.setTarget(this.host[0]);\r\n    this.instance.on('click', (event: MapBrowserEvent) =>\r\n      this.onClick({ event }),\r\n    );\r\n    this.instance.on('dblclick', (event: MapBrowserEvent) =>\r\n      this.onDblClick({ event }),\r\n    );\r\n    this.instance.on('moveend', (event: MapEvent) => this.onMoveEnd({ event }));\r\n    this.instance.on('pointerdrag', (event: MapBrowserEvent) =>\r\n      this.onPointerDrag({ event }),\r\n    );\r\n    this.instance.on('pointermove', (event: MapBrowserEvent) =>\r\n      this.onPointerMove({ event }),\r\n    );\r\n    this.instance.on('postcompose', (event: RenderEvent) =>\r\n      this.onPostCompose({ event }),\r\n    );\r\n    this.instance.on('postrender', (event: MapEvent) =>\r\n      this.onPostRender({ event }),\r\n    );\r\n    this.instance.on('precompose', (event: RenderEvent) =>\r\n      this.onPreCompose({ event }),\r\n    );\r\n    this.instance.on('propertychange', (event: ObjectEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.instance.on('singleclick', (event: MapBrowserEvent) =>\r\n      this.onSingleClick({ event }),\r\n    );\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //   <div  >\r\n  //     <ng-transclude id='ngolMap'></ng-transclude>\r\n  //     <div  data-tag=\"map\"></div>\r\n  //   </div>\r\n  // `,\r\n  // transclude: true,\r\n  bindings: {\r\n    pixelRatio: '<?',\r\n    keyboardEventTarget: '<?',\r\n    onClick: '&?',\r\n    onDblClick: '&?',\r\n    onMoveEnd: '&?',\r\n    onPointerDrag: '&?',\r\n    onPointerMove: '&?',\r\n    onPostcompose: '&?',\r\n    onPostrender: '&?',\r\n    onPreCompose: '&?',\r\n    onPropertyChange: '&?',\r\n    onRenderComplete: '&?',\r\n    onSingleClick: '&?',\r\n  },\r\n  controller: ['$element', MapComponent],\r\n};\r\n\r\nexport default {\r\n  name: 'aolMap',\r\n  ...component,\r\n};\r\n","/**\n * @module ol/array\n */\n/**\n * Performs a binary search on the provided sorted list and returns the index of the item if found. If it can't be found it'll return -1.\n * https://github.com/darkskyapp/binary-search\n *\n * @param {Array<*>} haystack Items to search through.\n * @param {*} needle The item to look for.\n * @param {Function=} opt_comparator Comparator function.\n * @return {number} The index of the item if found, -1 if not.\n */\nexport function binarySearch(haystack, needle, opt_comparator) {\n    var mid, cmp;\n    var comparator = opt_comparator || numberSafeCompareFunction;\n    var low = 0;\n    var high = haystack.length;\n    var found = false;\n    while (low < high) {\n        /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n         * to double (which gives the wrong results). */\n        mid = low + (high - low >> 1);\n        cmp = +comparator(haystack[mid], needle);\n        if (cmp < 0.0) { /* Too low. */\n            low = mid + 1;\n        }\n        else { /* Key found or too high */\n            high = mid;\n            found = !cmp;\n        }\n    }\n    /* Key not found. */\n    return found ? low : ~low;\n}\n/**\n * Compare function for array sort that is safe for numbers.\n * @param {*} a The first object to be compared.\n * @param {*} b The second object to be compared.\n * @return {number} A negative number, zero, or a positive number as the first\n *     argument is less than, equal to, or greater than the second.\n */\nexport function numberSafeCompareFunction(a, b) {\n    return a > b ? 1 : a < b ? -1 : 0;\n}\n/**\n * Whether the array contains the given object.\n * @param {Array<*>} arr The array to test for the presence of the element.\n * @param {*} obj The object for which to test.\n * @return {boolean} The object is in the array.\n */\nexport function includes(arr, obj) {\n    return arr.indexOf(obj) >= 0;\n}\n/**\n * @param {Array<number>} arr Array.\n * @param {number} target Target.\n * @param {number} direction 0 means return the nearest, > 0\n *    means return the largest nearest, < 0 means return the\n *    smallest nearest.\n * @return {number} Index.\n */\nexport function linearFindNearest(arr, target, direction) {\n    var n = arr.length;\n    if (arr[0] <= target) {\n        return 0;\n    }\n    else if (target <= arr[n - 1]) {\n        return n - 1;\n    }\n    else {\n        var i = void 0;\n        if (direction > 0) {\n            for (i = 1; i < n; ++i) {\n                if (arr[i] < target) {\n                    return i - 1;\n                }\n            }\n        }\n        else if (direction < 0) {\n            for (i = 1; i < n; ++i) {\n                if (arr[i] <= target) {\n                    return i;\n                }\n            }\n        }\n        else {\n            for (i = 1; i < n; ++i) {\n                if (arr[i] == target) {\n                    return i;\n                }\n                else if (arr[i] < target) {\n                    if (arr[i - 1] - target < target - arr[i]) {\n                        return i - 1;\n                    }\n                    else {\n                        return i;\n                    }\n                }\n            }\n        }\n        return n - 1;\n    }\n}\n/**\n * @param {Array<*>} arr Array.\n * @param {number} begin Begin index.\n * @param {number} end End index.\n */\nexport function reverseSubArray(arr, begin, end) {\n    while (begin < end) {\n        var tmp = arr[begin];\n        arr[begin] = arr[end];\n        arr[end] = tmp;\n        ++begin;\n        --end;\n    }\n}\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {!Array<VALUE>|VALUE} data The elements or arrays of elements to add to arr.\n * @template VALUE\n */\nexport function extend(arr, data) {\n    var extension = Array.isArray(data) ? data : [data];\n    var length = extension.length;\n    for (var i = 0; i < length; i++) {\n        arr[arr.length] = extension[i];\n    }\n}\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {VALUE} obj The element to remove.\n * @template VALUE\n * @return {boolean} If the element was removed.\n */\nexport function remove(arr, obj) {\n    var i = arr.indexOf(obj);\n    var found = i > -1;\n    if (found) {\n        arr.splice(i, 1);\n    }\n    return found;\n}\n/**\n * @param {Array<VALUE>} arr The array to search in.\n * @param {function(VALUE, number, ?) : boolean} func The function to compare.\n * @template VALUE\n * @return {VALUE|null} The element found or null.\n */\nexport function find(arr, func) {\n    var length = arr.length >>> 0;\n    var value;\n    for (var i = 0; i < length; i++) {\n        value = arr[i];\n        if (func(value, i, arr)) {\n            return value;\n        }\n    }\n    return null;\n}\n/**\n * @param {Array|Uint8ClampedArray} arr1 The first array to compare.\n * @param {Array|Uint8ClampedArray} arr2 The second array to compare.\n * @return {boolean} Whether the two arrays are equal.\n */\nexport function equals(arr1, arr2) {\n    var len1 = arr1.length;\n    if (len1 !== arr2.length) {\n        return false;\n    }\n    for (var i = 0; i < len1; i++) {\n        if (arr1[i] !== arr2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Sort the passed array such that the relative order of equal elements is preverved.\n * See https://en.wikipedia.org/wiki/Sorting_algorithm#Stability for details.\n * @param {Array<*>} arr The array to sort (modifies original).\n * @param {!function(*, *): number} compareFnc Comparison function.\n * @api\n */\nexport function stableSort(arr, compareFnc) {\n    var length = arr.length;\n    var tmp = Array(arr.length);\n    var i;\n    for (i = 0; i < length; i++) {\n        tmp[i] = { index: i, value: arr[i] };\n    }\n    tmp.sort(function (a, b) {\n        return compareFnc(a.value, b.value) || a.index - b.index;\n    });\n    for (i = 0; i < arr.length; i++) {\n        arr[i] = tmp[i].value;\n    }\n}\n/**\n * @param {Array<*>} arr The array to search in.\n * @param {Function} func Comparison function.\n * @return {number} Return index.\n */\nexport function findIndex(arr, func) {\n    var index;\n    var found = !arr.every(function (el, idx) {\n        index = idx;\n        return !func(el, idx, arr);\n    });\n    return found ? index : -1;\n}\n/**\n * @param {Array<*>} arr The array to test.\n * @param {Function=} opt_func Comparison function.\n * @param {boolean=} opt_strict Strictly sorted (default false).\n * @return {boolean} Return index.\n */\nexport function isSorted(arr, opt_func, opt_strict) {\n    var compare = opt_func || numberSafeCompareFunction;\n    return arr.every(function (currentVal, index) {\n        if (index === 0) {\n            return true;\n        }\n        var res = compare(arr[index - 1], currentVal);\n        return !(res > 0 || opt_strict && res === 0);\n    });\n}\n//# sourceMappingURL=array.js.map","/**\n * @module ol/math\n */\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\nexport function clamp(value, min, max) {\n    return Math.min(Math.max(value, min), max);\n}\n/**\n * Return the hyperbolic cosine of a given number. The method will use the\n * native `Math.cosh` function if it is available, otherwise the hyperbolic\n * cosine will be calculated via the reference implementation of the Mozilla\n * developer network.\n *\n * @param {number} x X.\n * @return {number} Hyperbolic cosine of x.\n */\nexport var cosh = (function () {\n    // Wrapped in a iife, to save the overhead of checking for the native\n    // implementation on every invocation.\n    var cosh;\n    if ('cosh' in Math) {\n        // The environment supports the native Math.cosh function, use it\n        cosh = Math.cosh;\n    }\n    else {\n        //  else, use the reference implementation of MDN:\n        cosh = function (x) {\n            var y = /** @type {Math} */ (Math).exp(x);\n            return (y + 1 / y) / 2;\n        };\n    }\n    return cosh;\n}());\n/**\n * Returns the square of the closest distance between the point (x, y) and the\n * line segment (x1, y1) to (x2, y2).\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    if (dx !== 0 || dy !== 0) {\n        var t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n        if (t > 1) {\n            x1 = x2;\n            y1 = y2;\n        }\n        else if (t > 0) {\n            x1 += dx * t;\n            y1 += dy * t;\n        }\n    }\n    return squaredDistance(x, y, x1, y1);\n}\n/**\n * Returns the square of the distance between the points (x1, y1) and (x2, y2).\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredDistance(x1, y1, x2, y2) {\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    return dx * dx + dy * dy;\n}\n/**\n * Solves system of linear equations using Gaussian elimination method.\n *\n * @param {Array<Array<number>>} mat Augmented matrix (n x n + 1 column)\n *                                     in row-major order.\n * @return {Array<number>} The resulting vector.\n */\nexport function solveLinearSystem(mat) {\n    var n = mat.length;\n    for (var i = 0; i < n; i++) {\n        // Find max in the i-th column (ignoring i - 1 first rows)\n        var maxRow = i;\n        var maxEl = Math.abs(mat[i][i]);\n        for (var r = i + 1; r < n; r++) {\n            var absValue = Math.abs(mat[r][i]);\n            if (absValue > maxEl) {\n                maxEl = absValue;\n                maxRow = r;\n            }\n        }\n        if (maxEl === 0) {\n            return null; // matrix is singular\n        }\n        // Swap max row with i-th (current) row\n        var tmp = mat[maxRow];\n        mat[maxRow] = mat[i];\n        mat[i] = tmp;\n        // Subtract the i-th row to make all the remaining rows 0 in the i-th column\n        for (var j = i + 1; j < n; j++) {\n            var coef = -mat[j][i] / mat[i][i];\n            for (var k = i; k < n + 1; k++) {\n                if (i == k) {\n                    mat[j][k] = 0;\n                }\n                else {\n                    mat[j][k] += coef * mat[i][k];\n                }\n            }\n        }\n    }\n    // Solve Ax=b for upper triangular matrix A (mat)\n    var x = new Array(n);\n    for (var l = n - 1; l >= 0; l--) {\n        x[l] = mat[l][n] / mat[l][l];\n        for (var m = l - 1; m >= 0; m--) {\n            mat[m][n] -= mat[m][l] * x[l];\n        }\n    }\n    return x;\n}\n/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n    return angleInRadians * 180 / Math.PI;\n}\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n    return angleInDegrees * Math.PI / 180;\n}\n/**\n * Returns the modulo of a / b, depending on the sign of b.\n *\n * @param {number} a Dividend.\n * @param {number} b Divisor.\n * @return {number} Modulo.\n */\nexport function modulo(a, b) {\n    var r = a % b;\n    return r * b < 0 ? r + b : r;\n}\n/**\n * Calculates the linearly interpolated value of x between a and b.\n *\n * @param {number} a Number\n * @param {number} b Number\n * @param {number} x Value to be interpolated.\n * @return {number} Interpolated value.\n */\nexport function lerp(a, b, x) {\n    return a + x * (b - a);\n}\n//# sourceMappingURL=math.js.map","module.exports = angular;","/**\n * @module ol/extent\n */\nimport { assert } from './asserts.js';\nimport Corner from './extent/Corner.js';\nimport Relationship from './extent/Relationship.js';\n/**\n * An array of numbers representing an extent: `[minx, miny, maxx, maxy]`.\n * @typedef {Array<number>} Extent\n * @api\n */\n/**\n * Build an extent that includes all given coordinates.\n *\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Bounding extent.\n * @api\n */\nexport function boundingExtent(coordinates) {\n    var extent = createEmpty();\n    for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n        extendCoordinate(extent, coordinates[i]);\n    }\n    return extent;\n}\n/**\n * @param {Array<number>} xs Xs.\n * @param {Array<number>} ys Ys.\n * @param {Extent=} opt_extent Destination extent.\n * @private\n * @return {Extent} Extent.\n */\nfunction _boundingExtentXYs(xs, ys, opt_extent) {\n    var minX = Math.min.apply(null, xs);\n    var minY = Math.min.apply(null, ys);\n    var maxX = Math.max.apply(null, xs);\n    var maxY = Math.max.apply(null, ys);\n    return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n}\n/**\n * Return extent increased by the provided value.\n * @param {Extent} extent Extent.\n * @param {number} value The amount by which the extent should be buffered.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n * @api\n */\nexport function buffer(extent, value, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = extent[0] - value;\n        opt_extent[1] = extent[1] - value;\n        opt_extent[2] = extent[2] + value;\n        opt_extent[3] = extent[3] + value;\n        return opt_extent;\n    }\n    else {\n        return [\n            extent[0] - value,\n            extent[1] - value,\n            extent[2] + value,\n            extent[3] + value\n        ];\n    }\n}\n/**\n * Creates a clone of an extent.\n *\n * @param {Extent} extent Extent to clone.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} The clone.\n */\nexport function clone(extent, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = extent[0];\n        opt_extent[1] = extent[1];\n        opt_extent[2] = extent[2];\n        opt_extent[3] = extent[3];\n        return opt_extent;\n    }\n    else {\n        return extent.slice();\n    }\n}\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {number} Closest squared distance.\n */\nexport function closestSquaredDistanceXY(extent, x, y) {\n    var dx, dy;\n    if (x < extent[0]) {\n        dx = extent[0] - x;\n    }\n    else if (extent[2] < x) {\n        dx = x - extent[2];\n    }\n    else {\n        dx = 0;\n    }\n    if (y < extent[1]) {\n        dy = extent[1] - y;\n    }\n    else if (extent[3] < y) {\n        dy = y - extent[3];\n    }\n    else {\n        dy = 0;\n    }\n    return dx * dx + dy * dy;\n}\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @return {boolean} The coordinate is contained in the extent.\n * @api\n */\nexport function containsCoordinate(extent, coordinate) {\n    return containsXY(extent, coordinate[0], coordinate[1]);\n}\n/**\n * Check if one extent contains another.\n *\n * An extent is deemed contained if it lies completely within the other extent,\n * including if they share one or more edges.\n *\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The second extent is contained by or on the edge of the\n *     first.\n * @api\n */\nexport function containsExtent(extent1, extent2) {\n    return extent1[0] <= extent2[0] && extent2[2] <= extent1[2] &&\n        extent1[1] <= extent2[1] && extent2[3] <= extent1[3];\n}\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n * @return {boolean} The x, y values are contained in the extent.\n * @api\n */\nexport function containsXY(extent, x, y) {\n    return extent[0] <= x && x <= extent[2] && extent[1] <= y && y <= extent[3];\n}\n/**\n * Get the relationship between a coordinate and extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate The coordinate.\n * @return {Relationship} The relationship (bitwise compare with\n *     import(\"./extent/Relationship.js\").Relationship).\n */\nexport function coordinateRelationship(extent, coordinate) {\n    var minX = extent[0];\n    var minY = extent[1];\n    var maxX = extent[2];\n    var maxY = extent[3];\n    var x = coordinate[0];\n    var y = coordinate[1];\n    var relationship = Relationship.UNKNOWN;\n    if (x < minX) {\n        relationship = relationship | Relationship.LEFT;\n    }\n    else if (x > maxX) {\n        relationship = relationship | Relationship.RIGHT;\n    }\n    if (y < minY) {\n        relationship = relationship | Relationship.BELOW;\n    }\n    else if (y > maxY) {\n        relationship = relationship | Relationship.ABOVE;\n    }\n    if (relationship === Relationship.UNKNOWN) {\n        relationship = Relationship.INTERSECTING;\n    }\n    return relationship;\n}\n/**\n * Create an empty extent.\n * @return {Extent} Empty extent.\n * @api\n */\nexport function createEmpty() {\n    return [Infinity, Infinity, -Infinity, -Infinity];\n}\n/**\n * Create a new extent or update the provided extent.\n * @param {number} minX Minimum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxX Maximum X.\n * @param {number} maxY Maximum Y.\n * @param {Extent=} opt_extent Destination extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdate(minX, minY, maxX, maxY, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = minX;\n        opt_extent[1] = minY;\n        opt_extent[2] = maxX;\n        opt_extent[3] = maxY;\n        return opt_extent;\n    }\n    else {\n        return [minX, minY, maxX, maxY];\n    }\n}\n/**\n * Create a new empty extent or make the provided one empty.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateEmpty(opt_extent) {\n    return createOrUpdate(Infinity, Infinity, -Infinity, -Infinity, opt_extent);\n}\n/**\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinate(coordinate, opt_extent) {\n    var x = coordinate[0];\n    var y = coordinate[1];\n    return createOrUpdate(x, y, x, y, opt_extent);\n}\n/**\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinates(coordinates, opt_extent) {\n    var extent = createOrUpdateEmpty(opt_extent);\n    return extendCoordinates(extent, coordinates);\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromFlatCoordinates(flatCoordinates, offset, end, stride, opt_extent) {\n    var extent = createOrUpdateEmpty(opt_extent);\n    return extendFlatCoordinates(extent, flatCoordinates, offset, end, stride);\n}\n/**\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromRings(rings, opt_extent) {\n    var extent = createOrUpdateEmpty(opt_extent);\n    return extendRings(extent, rings);\n}\n/**\n * Determine if two extents are equivalent.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The two extents are equivalent.\n * @api\n */\nexport function equals(extent1, extent2) {\n    return extent1[0] == extent2[0] && extent1[2] == extent2[2] &&\n        extent1[1] == extent2[1] && extent1[3] == extent2[3];\n}\n/**\n * Modify an extent to include another extent.\n * @param {Extent} extent1 The extent to be modified.\n * @param {Extent} extent2 The extent that will be included in the first.\n * @return {Extent} A reference to the first (extended) extent.\n * @api\n */\nexport function extend(extent1, extent2) {\n    if (extent2[0] < extent1[0]) {\n        extent1[0] = extent2[0];\n    }\n    if (extent2[2] > extent1[2]) {\n        extent1[2] = extent2[2];\n    }\n    if (extent2[1] < extent1[1]) {\n        extent1[1] = extent2[1];\n    }\n    if (extent2[3] > extent1[3]) {\n        extent1[3] = extent2[3];\n    }\n    return extent1;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n */\nexport function extendCoordinate(extent, coordinate) {\n    if (coordinate[0] < extent[0]) {\n        extent[0] = coordinate[0];\n    }\n    if (coordinate[0] > extent[2]) {\n        extent[2] = coordinate[0];\n    }\n    if (coordinate[1] < extent[1]) {\n        extent[1] = coordinate[1];\n    }\n    if (coordinate[1] > extent[3]) {\n        extent[3] = coordinate[1];\n    }\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Extent.\n */\nexport function extendCoordinates(extent, coordinates) {\n    for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n        extendCoordinate(extent, coordinates[i]);\n    }\n    return extent;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Extent} Extent.\n */\nexport function extendFlatCoordinates(extent, flatCoordinates, offset, end, stride) {\n    for (; offset < end; offset += stride) {\n        extendXY(extent, flatCoordinates[offset], flatCoordinates[offset + 1]);\n    }\n    return extent;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @return {Extent} Extent.\n */\nexport function extendRings(extent, rings) {\n    for (var i = 0, ii = rings.length; i < ii; ++i) {\n        extendCoordinates(extent, rings[i]);\n    }\n    return extent;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n */\nexport function extendXY(extent, x, y) {\n    extent[0] = Math.min(extent[0], x);\n    extent[1] = Math.min(extent[1], y);\n    extent[2] = Math.max(extent[2], x);\n    extent[3] = Math.max(extent[3], y);\n}\n/**\n * This function calls `callback` for each corner of the extent. If the\n * callback returns a truthy value the function returns that value\n * immediately. Otherwise the function returns `false`.\n * @param {Extent} extent Extent.\n * @param {function(import(\"./coordinate.js\").Coordinate): S} callback Callback.\n * @return {S|boolean} Value.\n * @template S\n */\nexport function forEachCorner(extent, callback) {\n    var val;\n    val = callback(getBottomLeft(extent));\n    if (val) {\n        return val;\n    }\n    val = callback(getBottomRight(extent));\n    if (val) {\n        return val;\n    }\n    val = callback(getTopRight(extent));\n    if (val) {\n        return val;\n    }\n    val = callback(getTopLeft(extent));\n    if (val) {\n        return val;\n    }\n    return false;\n}\n/**\n * Get the size of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Area.\n * @api\n */\nexport function getArea(extent) {\n    var area = 0;\n    if (!isEmpty(extent)) {\n        area = getWidth(extent) * getHeight(extent);\n    }\n    return area;\n}\n/**\n * Get the bottom left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom left coordinate.\n * @api\n */\nexport function getBottomLeft(extent) {\n    return [extent[0], extent[1]];\n}\n/**\n * Get the bottom right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom right coordinate.\n * @api\n */\nexport function getBottomRight(extent) {\n    return [extent[2], extent[1]];\n}\n/**\n * Get the center coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Center.\n * @api\n */\nexport function getCenter(extent) {\n    return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2];\n}\n/**\n * Get a corner coordinate of an extent.\n * @param {Extent} extent Extent.\n * @param {Corner} corner Corner.\n * @return {import(\"./coordinate.js\").Coordinate} Corner coordinate.\n */\nexport function getCorner(extent, corner) {\n    var coordinate;\n    if (corner === Corner.BOTTOM_LEFT) {\n        coordinate = getBottomLeft(extent);\n    }\n    else if (corner === Corner.BOTTOM_RIGHT) {\n        coordinate = getBottomRight(extent);\n    }\n    else if (corner === Corner.TOP_LEFT) {\n        coordinate = getTopLeft(extent);\n    }\n    else if (corner === Corner.TOP_RIGHT) {\n        coordinate = getTopRight(extent);\n    }\n    else {\n        assert(false, 13); // Invalid corner\n    }\n    return coordinate;\n}\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Enlarged area.\n */\nexport function getEnlargedArea(extent1, extent2) {\n    var minX = Math.min(extent1[0], extent2[0]);\n    var minY = Math.min(extent1[1], extent2[1]);\n    var maxX = Math.max(extent1[2], extent2[2]);\n    var maxY = Math.max(extent1[3], extent2[3]);\n    return (maxX - minX) * (maxY - minY);\n}\n/**\n * @param {import(\"./coordinate.js\").Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {import(\"./size.js\").Size} size Size.\n * @param {Extent=} opt_extent Destination extent.\n * @return {Extent} Extent.\n */\nexport function getForViewAndSize(center, resolution, rotation, size, opt_extent) {\n    var dx = resolution * size[0] / 2;\n    var dy = resolution * size[1] / 2;\n    var cosRotation = Math.cos(rotation);\n    var sinRotation = Math.sin(rotation);\n    var xCos = dx * cosRotation;\n    var xSin = dx * sinRotation;\n    var yCos = dy * cosRotation;\n    var ySin = dy * sinRotation;\n    var x = center[0];\n    var y = center[1];\n    var x0 = x - xCos + ySin;\n    var x1 = x - xCos - ySin;\n    var x2 = x + xCos - ySin;\n    var x3 = x + xCos + ySin;\n    var y0 = y - xSin - yCos;\n    var y1 = y - xSin + yCos;\n    var y2 = y + xSin + yCos;\n    var y3 = y + xSin - yCos;\n    return createOrUpdate(Math.min(x0, x1, x2, x3), Math.min(y0, y1, y2, y3), Math.max(x0, x1, x2, x3), Math.max(y0, y1, y2, y3), opt_extent);\n}\n/**\n * Get the height of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Height.\n * @api\n */\nexport function getHeight(extent) {\n    return extent[3] - extent[1];\n}\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Intersection area.\n */\nexport function getIntersectionArea(extent1, extent2) {\n    var intersection = getIntersection(extent1, extent2);\n    return getArea(intersection);\n}\n/**\n * Get the intersection of two extents.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @param {Extent=} opt_extent Optional extent to populate with intersection.\n * @return {Extent} Intersecting extent.\n * @api\n */\nexport function getIntersection(extent1, extent2, opt_extent) {\n    var intersection = opt_extent ? opt_extent : createEmpty();\n    if (intersects(extent1, extent2)) {\n        if (extent1[0] > extent2[0]) {\n            intersection[0] = extent1[0];\n        }\n        else {\n            intersection[0] = extent2[0];\n        }\n        if (extent1[1] > extent2[1]) {\n            intersection[1] = extent1[1];\n        }\n        else {\n            intersection[1] = extent2[1];\n        }\n        if (extent1[2] < extent2[2]) {\n            intersection[2] = extent1[2];\n        }\n        else {\n            intersection[2] = extent2[2];\n        }\n        if (extent1[3] < extent2[3]) {\n            intersection[3] = extent1[3];\n        }\n        else {\n            intersection[3] = extent2[3];\n        }\n    }\n    else {\n        createOrUpdateEmpty(intersection);\n    }\n    return intersection;\n}\n/**\n * @param {Extent} extent Extent.\n * @return {number} Margin.\n */\nexport function getMargin(extent) {\n    return getWidth(extent) + getHeight(extent);\n}\n/**\n * Get the size (width, height) of an extent.\n * @param {Extent} extent The extent.\n * @return {import(\"./size.js\").Size} The extent size.\n * @api\n */\nexport function getSize(extent) {\n    return [extent[2] - extent[0], extent[3] - extent[1]];\n}\n/**\n * Get the top left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top left coordinate.\n * @api\n */\nexport function getTopLeft(extent) {\n    return [extent[0], extent[3]];\n}\n/**\n * Get the top right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top right coordinate.\n * @api\n */\nexport function getTopRight(extent) {\n    return [extent[2], extent[3]];\n}\n/**\n * Get the width of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Width.\n * @api\n */\nexport function getWidth(extent) {\n    return extent[2] - extent[0];\n}\n/**\n * Determine if one extent intersects another.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent.\n * @return {boolean} The two extents intersect.\n * @api\n */\nexport function intersects(extent1, extent2) {\n    return extent1[0] <= extent2[2] &&\n        extent1[2] >= extent2[0] &&\n        extent1[1] <= extent2[3] &&\n        extent1[3] >= extent2[1];\n}\n/**\n * Determine if an extent is empty.\n * @param {Extent} extent Extent.\n * @return {boolean} Is empty.\n * @api\n */\nexport function isEmpty(extent) {\n    return extent[2] < extent[0] || extent[3] < extent[1];\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function returnOrUpdate(extent, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = extent[0];\n        opt_extent[1] = extent[1];\n        opt_extent[2] = extent[2];\n        opt_extent[3] = extent[3];\n        return opt_extent;\n    }\n    else {\n        return extent;\n    }\n}\n/**\n * @param {Extent} extent Extent.\n * @param {number} value Value.\n */\nexport function scaleFromCenter(extent, value) {\n    var deltaX = ((extent[2] - extent[0]) / 2) * (value - 1);\n    var deltaY = ((extent[3] - extent[1]) / 2) * (value - 1);\n    extent[0] -= deltaX;\n    extent[2] += deltaX;\n    extent[1] -= deltaY;\n    extent[3] += deltaY;\n}\n/**\n * Determine if the segment between two coordinates intersects (crosses,\n * touches, or is contained by) the provided extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} start Segment start coordinate.\n * @param {import(\"./coordinate.js\").Coordinate} end Segment end coordinate.\n * @return {boolean} The segment intersects the extent.\n */\nexport function intersectsSegment(extent, start, end) {\n    var intersects = false;\n    var startRel = coordinateRelationship(extent, start);\n    var endRel = coordinateRelationship(extent, end);\n    if (startRel === Relationship.INTERSECTING ||\n        endRel === Relationship.INTERSECTING) {\n        intersects = true;\n    }\n    else {\n        var minX = extent[0];\n        var minY = extent[1];\n        var maxX = extent[2];\n        var maxY = extent[3];\n        var startX = start[0];\n        var startY = start[1];\n        var endX = end[0];\n        var endY = end[1];\n        var slope = (endY - startY) / (endX - startX);\n        var x = void 0, y = void 0;\n        if (!!(endRel & Relationship.ABOVE) &&\n            !(startRel & Relationship.ABOVE)) {\n            // potentially intersects top\n            x = endX - ((endY - maxY) / slope);\n            intersects = x >= minX && x <= maxX;\n        }\n        if (!intersects && !!(endRel & Relationship.RIGHT) &&\n            !(startRel & Relationship.RIGHT)) {\n            // potentially intersects right\n            y = endY - ((endX - maxX) * slope);\n            intersects = y >= minY && y <= maxY;\n        }\n        if (!intersects && !!(endRel & Relationship.BELOW) &&\n            !(startRel & Relationship.BELOW)) {\n            // potentially intersects bottom\n            x = endX - ((endY - minY) / slope);\n            intersects = x >= minX && x <= maxX;\n        }\n        if (!intersects && !!(endRel & Relationship.LEFT) &&\n            !(startRel & Relationship.LEFT)) {\n            // potentially intersects left\n            y = endY - ((endX - minX) * slope);\n            intersects = y >= minY && y <= maxY;\n        }\n    }\n    return intersects;\n}\n/**\n * Apply a transform function to the extent.\n * @param {Extent} extent Extent.\n * @param {import(\"./proj.js\").TransformFunction} transformFn Transform function.\n * Called with `[minX, minY, maxX, maxY]` extent coordinates.\n * @param {Extent=} opt_extent Destination extent.\n * @return {Extent} Extent.\n * @api\n */\nexport function applyTransform(extent, transformFn, opt_extent) {\n    var coordinates = [\n        extent[0], extent[1],\n        extent[0], extent[3],\n        extent[2], extent[1],\n        extent[2], extent[3]\n    ];\n    transformFn(coordinates, coordinates, 2);\n    var xs = [coordinates[0], coordinates[2], coordinates[4], coordinates[6]];\n    var ys = [coordinates[1], coordinates[3], coordinates[5], coordinates[7]];\n    return _boundingExtentXYs(xs, ys, opt_extent);\n}\n//# sourceMappingURL=extent.js.map","// export * from './layer.component';\r\nexport * from './layertile.component';\r\nexport * from './layervector.component';\r\nexport * from './layergroup.component';\r\nexport * from './layerwebgl.component';\r\n","import Source, { AttributionLike } from 'ol/source/Source';\r\nimport { LayerComponent } from '../layers/layer.component';\r\n\r\nexport class SourceComponent implements angular.IController {\r\n  public instance: Source;\r\n  public componentType: string = 'source';\r\n\r\n  protected host: LayerComponent;\r\n  //   protected raster: SourceRasterComponent\r\n\r\n  attributions: AttributionLike;\r\n  attributionsCollapsible: boolean;\r\n\r\n  instanceDone?: Function;\r\n\r\n  //   constructor()\r\n  //   {}\r\n\r\n  $onDestroy() {\r\n    if (this.host) {\r\n      this.host.instance.setSource(null);\r\n    }\r\n\r\n    // if (this.raster) {\r\n    //   this.raster.sources = [];\r\n    // }\r\n  }\r\n\r\n  protected _register(source: Source) {\r\n    if (this.host) {\r\n      this.host.instance.setSource(source);\r\n      if (this.instanceDone) this.instanceDone({ instance: source });\r\n    }\r\n\r\n    // if (this.raster) {\r\n    //   this.raster.sources = [source];\r\n    // }\r\n  }\r\n}\r\n\r\nexport const sourceComponentConfig = {\r\n  bindings: {\r\n    instance: '=?',\r\n    attributions: '<?',\r\n    attributionsCollapsible: '<?',\r\n    instanceDone: '&?',\r\n  },\r\n};\r\n","import { GeometryFunction } from 'ol/style/Style';\r\nimport aolFeature, { FeatureComponent } from '../feature.component';\r\nimport { aolLayerVector, LayerVectorComponent } from '../layers';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport { Fill, Image as ImageStyle, Stroke, Text, Style } from 'ol/style';\r\n// import { RenderFunction } from 'ol/layer/Layer';\r\n\r\nexport class StyleComponent implements ng.IController {\r\n  public componentType = 'style';\r\n  public instance: Style;\r\n\r\n  private host: LayerVectorComponent | FeatureComponent;\r\n\r\n  protected layerVectorHost: LayerVectorComponent;\r\n  protected featureHost: FeatureComponent;\r\n\r\n  geometry?: string | Geometry | GeometryFunction;\r\n  fill?: Fill;\r\n  image?: ImageStyle;\r\n  //   renderer?: RenderFunction;\r\n  stroke?: Stroke;\r\n  text?: Text;\r\n  zIndex?: number;\r\n  mutiple?: boolean;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (this.featureHost) {\r\n      this.host = this.featureHost;\r\n    } else if (this.layerVectorHost) {\r\n      this.host = this.layerVectorHost;\r\n    } else {\r\n      throw new Error('aol-style must be applied to a feature or a layer');\r\n    }\r\n    this.instance = new Style(this);\r\n    if (this.mutiple) {\r\n      var style = this.host.instance.getStyle();\r\n      if (style instanceof Array) {\r\n        this.host.instance.setStyle([...style, this.instance]);\r\n      } else {\r\n        this.host.instance.setStyle([this.instance]);\r\n      }\r\n    } else {\r\n      this.host.instance.setStyle(this.instance);\r\n    }\r\n  }\r\n\r\n  // $postLink(){\r\n  //     this.host.instance.setStyle(this.instance);\r\n  // }\r\n  // Strokestylere-render\r\n  update() {\r\n    this.host.instance.changed();\r\n  }\r\n\r\n  $onDestroy() {\r\n    let style = this.host.instance.getStyle();\r\n    if (style instanceof Array) {\r\n      style.splice(style.indexOf(this.instance), 1);\r\n    } else {\r\n      style = null;\r\n    }\r\n    this.host.instance.setStyle(style);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'image':\r\n            this.instance.setImage(changes[key].currentValue);\r\n            break;\r\n          case 'fill':\r\n            this.instance.setFill(changes[key].currentValue);\r\n            break;\r\n          case 'stroke':\r\n            this.instance.setStroke(changes[key].currentValue);\r\n            break;\r\n          case 'text':\r\n            this.instance.setText(changes[key].currentValue);\r\n          case 'zIndex':\r\n            this.instance.setZIndex(changes[key].currentValue);\r\n            break;\r\n          default:\r\n            // properties[key] = changes[key].currentValue;\r\n            // this.instance.set(properties, false);\r\n            break;\r\n        }\r\n      }\r\n      this.host.instance.changed();\r\n    }\r\n  }\r\n}\r\n\r\nvar aolStyleComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    geometry: '<?',\r\n    fill: '<?',\r\n    image: '<?',\r\n    stroke: '<?',\r\n    text: '<?',\r\n    zIndex: '<?',\r\n    mutiple: '<?',\r\n  },\r\n  require: {\r\n    layerVectorHost: `?^${aolLayerVector.name}`,\r\n    featureHost: `?^${aolFeature.name}`,\r\n  },\r\n  controller: [StyleComponent],\r\n};\r\n\r\nexport const aolStyle = {\r\n  name: 'aolStyle',\r\n  ...aolStyleComponent,\r\n};\r\n","module.exports = ol.style;","module.exports = ol.source;","module.exports = ol.interaction;","module.exports = ol;","import Event from 'ol/events/Event';\r\nimport { Extent } from 'ol/extent';\r\nimport mapComponent, { MapComponent } from '../map.component';\r\nimport { LayerGroupComponent } from './layergroup.component';\r\n\r\nexport abstract class LayerComponent implements angular.IController {\r\n  public instance: any;\r\n  public componentType: string = 'layer';\r\n\r\n  protected host: MapComponent | LayerGroupComponent;\r\n  private layerGroupComponent: LayerGroupComponent;\r\n  private mapComponent: MapComponent;\r\n\r\n  className?: string;\r\n  opacity?: number;\r\n  visible?: boolean;\r\n  extent?: Extent;\r\n  zIndex?: number;\r\n  minResolution?: number;\r\n  maxResolution?: number;\r\n\r\n  prerender: (evt: Event) => void;\r\n  postrender: (evt: Event) => void;\r\n\r\n  $onInit() {\r\n    this.host = this.layerGroupComponent || this.mapComponent;\r\n    if (this.visible !== undefined) {\r\n      this.instance.setVisible(this.visible);\r\n    }\r\n\r\n    if (this.prerender !== null && this.prerender !== undefined) {\r\n      this.instance.on('prerender', this.prerender);\r\n    }\r\n    if (this.postrender !== null && this.postrender !== undefined) {\r\n      this.instance.on('postrender', this.postrender);\r\n    }\r\n    if (this.instance.get('properties')) {\r\n      this.instance.setProperties(this.instance.get('properties'), false);\r\n      this.instance.set('properties', null, false);\r\n    }\r\n    this.host.instance.getLayers().push(this.instance);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.getLayers().remove(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'prerender':\r\n            this.instance.un('prerender', changes[key].previousValue);\r\n            this.instance.on('prerender', changes[key].currentValue);\r\n            break;\r\n          case 'postrender':\r\n            this.instance.un('postrender', changes[key].previousValue);\r\n            this.instance.on('postrender', changes[key].currentValue);\r\n            break;\r\n          case 'source':\r\n            this.instance.setSource(changes[key].currentValue);\r\n            break;\r\n          case 'style':\r\n            this.instance.setStyle(changes[key].currentValue);\r\n            break;\r\n          case 'properties':\r\n            this.instance.set(changes[key].currentValue, false);\r\n            return;\r\n          case 'visible':\r\n            this.instance.setVisible(this.visible);\r\n            return;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n    // console.log('changes detected in aol-layer, setting new properties: ', properties);\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n}\r\n\r\nexport const layerComponentConfig = {\r\n  bindings: {\r\n    opacity: '<?',\r\n    visible: '<?',\r\n    extent: '<?',\r\n    zIndex: '<?',\r\n    minResolution: '<?',\r\n    maxResolution: '<?',\r\n    className: '<?',\r\n    // preload:'<?',\r\n    prerender: '&?',\r\n    postrender: '&?',\r\n  },\r\n  require: {\r\n    mapComponent: `?^${mapComponent.name}`,\r\n    /**@FIXME: */\r\n    layerGroupComponent: `?^^aolLayerGroup`,\r\n  },\r\n};\r\n","import { Feature } from 'ol';\r\nimport { SourceVectorComponent, aolSourceVector } from './sources';\r\n\r\nexport class FeatureComponent implements ng.IController {\r\n  public componentType = 'feature';\r\n  public instance: Feature;\r\n  private host: SourceVectorComponent;\r\n  private properties: object;\r\n\r\n  id: string | number | undefined;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    this.instance = new Feature();\r\n    if (this.id !== undefined) {\r\n      this.instance.setId(this.id);\r\n    }\r\n    if (this.properties !== undefined) {\r\n      this.instance.setProperties(this.properties);\r\n    }\r\n    this.host.instance.addFeature(this.instance);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeFeature(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    if (this.instance) {\r\n      if (changes['properties']) {\r\n        this.instance.setProperties(changes['properties'], true);\r\n      } else {\r\n        this.instance.setId(this.id);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    id: '<?',\r\n    properties: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolSourceVector.name}`,\r\n  },\r\n  controller: ['$element', FeatureComponent],\r\n};\r\n\r\nexport default {\r\n  name: 'aolFeature',\r\n  ...component,\r\n};\r\n","module.exports = ol.layer;","import { StyleComponent, aolStyle } from './style.component';\r\nimport { Fill, Circle, Stroke } from 'ol/style';\r\n\r\nexport class styleCircleComponent implements ng.IController {\r\n  public componentType = 'style-circle';\r\n  public instance: Circle;\r\n\r\n  private host: StyleComponent;\r\n\r\n  fill: Fill;\r\n  radius: number = 5;\r\n  snapToPixel: boolean;\r\n  stroke: Stroke;\r\n  // atlasManager: ;\r\n\r\n  //   protected layerVectorHost: LayerVectorComponent;\r\n  protected styleHost: StyleComponent;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (this.styleHost) {\r\n      this.host = this.styleHost;\r\n    } else {\r\n      throw new Error('aol-circle must be applied to a feature or a layer');\r\n    }\r\n  }\r\n\r\n  $postLink() {\r\n    this.instance = new Circle(this);\r\n    this.host.instance.setImage(this.instance);\r\n  }\r\n\r\n  update() {\r\n    if (!!this.instance) {\r\n      this.instance = new Circle(this);\r\n      this.host.instance.setImage(this.instance);\r\n      // this.instance.setRadius(this.radius);\r\n    }\r\n    this.host.update();\r\n    // this.host.instance.changed();\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.setImage(null);\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    if (changes['radius']) {\r\n      this.instance.setRadius(changes['radius'].currentValue);\r\n    }\r\n    // this.host.update();\r\n  }\r\n}\r\n\r\nvar aolStyleCircleComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    fill: '<?',\r\n    radius: '<?',\r\n    snapToPixel: '<?',\r\n    stroke: '<?',\r\n  },\r\n  require: {\r\n    styleHost: `?^${aolStyle.name}`,\r\n  },\r\n  controller: [styleCircleComponent],\r\n};\r\n\r\nexport const aolStyleCircle = {\r\n  name: 'aolStyleCircle',\r\n  ...aolStyleCircleComponent,\r\n};\r\n","import * as angular from 'angular';\r\nimport { View } from 'ol';\r\nimport { Extent } from 'ol/extent';\r\nimport { Coordinate } from 'ol/coordinate';\r\nimport mapComponent, { MapComponent } from './map.component';\r\nimport { AnimationOptions } from 'ol/View';\r\n\r\nexport class ViewComponent implements angular.IController {\r\n  public instance: View;\r\n  public componentType: string = 'view';\r\n  public host: MapComponent;\r\n\r\n  constrainRotation: boolean | number;\r\n  enableRotation: boolean;\r\n  extent: Extent;\r\n  maxResolution: number;\r\n  minResolution: number;\r\n  maxZoom: number;\r\n  minZoom: number;\r\n  resolution: number;\r\n  resolutions: number[];\r\n  rotation: number;\r\n  zoom: number = 11;\r\n  zoomFactor: number;\r\n  center: Coordinate = [104.06, 30.67];\r\n  projection: string;\r\n\r\n  animationOptions?: AnimationOptions;\r\n\r\n  zoomAnimation: Boolean = false;\r\n\r\n  // defaultGive() {\r\n  //   if (this.zoom === undefined) this.zoom = 1;\r\n  //   if (this.center === undefined) this.center = [104.06, 30.67];\r\n  //   if (this.projection === undefined) this.projection = 'EPSG:4326';\r\n  //   if (this.zoomAnimation === undefined) this.zoomAnimation = false;\r\n  // }\r\n\r\n  //   constructor(host: angular.IRootElementService) {}\r\n\r\n  $onInit() {\r\n    // this.defaultGive();\r\n    this.instance = new View(this);\r\n    this.host.instance.setView(this.instance);\r\n\r\n    if (this.animationOptions) {\r\n      this.instance.setZoom(this.animationOptions.zoom);\r\n      this.instance.setCenter(this.animationOptions.center);\r\n    }\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'zoom':\r\n            /** Work-around: setting the zoom via setProperties does not work. */\r\n            if (this.zoomAnimation) {\r\n              this.instance.animate({ zoom: changes[key].currentValue });\r\n            } else {\r\n              this.instance.setZoom(changes[key].currentValue);\r\n            }\r\n            break;\r\n          case 'animationOptions':\r\n            /** Work-around: setting the zoom via setProperties does not work. */\r\n            if (this.zoomAnimation) {\r\n              this.instance.animate(changes[key].currentValue);\r\n            } else {\r\n              this.instance.setZoom(changes[key].currentValue.zoom);\r\n              this.instance.setCenter(changes[key].currentValue.center);\r\n            }\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n    // console.log('changes detected in aol-view, setting new properties: ', properties);\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    constrainRotation: '<?',\r\n    enableRotation: '<?',\r\n    extent: '<?',\r\n    maxResolution: '<?',\r\n    minResolution: '<?',\r\n    maxZoom: '<?',\r\n    minZoom: '<?',\r\n    resolution: '<?',\r\n    resolutions: '<?',\r\n    rotation: '<?',\r\n    zoom: '<',\r\n    zoomFactor: '<?',\r\n    center: '<?',\r\n    projection: '<?',\r\n    zoomAnimation: '<?',\r\n    animationOptions: '<?',\r\n  },\r\n  require: {\r\n    host: `^${mapComponent.name}`,\r\n  },\r\n  controller: ['$element', ViewComponent],\r\n};\r\n\r\nexport default {\r\n  name: 'aolView',\r\n  ...component,\r\n};\r\n","export * from './xyz.component';\r\nexport * from './osmmaps.component';\r\nexport * from './vector.component';\r\nexport * from './cluster.component';\r\n\r\nexport * from './tiledebug.component';\r\n","import * as angular from 'angular';\r\nimport aolFeature from './feature.component';\r\nimport { FeatureComponent } from './feature.component';\r\nimport { LineString, Point, Polygon } from 'ol/geom';\r\nimport BaseEvent from 'ol/events/Event';\r\n\r\nexport class GeometryLinestringComponent implements ng.IController {\r\n  public componentType: string = 'geometry-linestring';\r\n  public instance: LineString;\r\n  private host: FeatureComponent;\r\n\r\n  //   constructor() {\r\n  //     // console.log('instancing aol-geometry-linestring');\r\n  //   }\r\n  public change: Function = angular.noop;\r\n\r\n  $onInit() {\r\n    this.instance = new LineString([]);\r\n    this.instance.on('change', (event: BaseEvent) => this.change({ event }));\r\n    this.host.instance.setGeometry(this.instance);\r\n  }\r\n  $onDestroy() {\r\n    // this.host.setGeometry(null);\r\n  }\r\n}\r\nvar aolGeometryLinestringComponent: angular.IComponentOptions = {\r\n  bindings: {\r\n    change: '&?',\r\n  },\r\n  require: {\r\n    host: `^${aolFeature.name}`,\r\n  },\r\n  controller: [GeometryLinestringComponent],\r\n};\r\n\r\nexport const aolGeometryLinestring = {\r\n  name: 'aolGeometryLinestring',\r\n  ...aolGeometryLinestringComponent,\r\n};\r\n\r\nexport class GeometryPointComponent implements ng.IController {\r\n  public componentType: string = 'geometry-point';\r\n  public instance: Point;\r\n  private host: FeatureComponent;\r\n\r\n  //   constructor() {\r\n  //     // console.log('creating aol-geometry-point');\r\n  //   }\r\n\r\n  $onInit() {\r\n    this.instance = new Point([0, 0]); // defaulting coordinates to [0,0]. To be overridden in child component.\r\n    this.host.instance.setGeometry(this.instance);\r\n  }\r\n\r\n  $onDestroy() {\r\n    // this.host.setGeometry(null);\r\n  }\r\n}\r\n\r\nvar aolGeometryPointComponent: angular.IComponentOptions = {\r\n  bindings: {},\r\n  require: {\r\n    host: `^${aolFeature.name}`,\r\n  },\r\n  controller: [GeometryPointComponent],\r\n};\r\n\r\nexport const aolGeometryPoint = {\r\n  name: 'aolGeometryPoint',\r\n  ...aolGeometryPointComponent,\r\n};\r\n\r\nexport class GeometryPolygonComponent implements ng.IController {\r\n  public componentType: string = 'geometry-polygon';\r\n  public instance: Polygon;\r\n  private host: FeatureComponent;\r\n\r\n  //   constructor() {\r\n  //     // console.log('creating aol-geometry-polygon');\r\n  //   }\r\n\r\n  $onInit() {\r\n    // defaulting coordinates to [0,0]. To be overridden in child component.\r\n    this.instance = new Polygon([\r\n      [\r\n        [0, 0],\r\n        [1, 0],\r\n        [1, 1],\r\n      ],\r\n    ]);\r\n    this.host.instance.setGeometry(this.instance);\r\n  }\r\n\r\n  //   $onDestroy() {\r\n  //     // this.host.setGeometry(null);\r\n  //   }\r\n}\r\n\r\nvar aolGeometryPolygonComponent: angular.IComponentOptions = {\r\n  bindings: {},\r\n  require: {\r\n    host: `^${aolFeature.name}`,\r\n  },\r\n  controller: [GeometryPolygonComponent],\r\n};\r\n\r\nexport const aolGeometryPolygon = {\r\n  name: 'aolGeometryPolygon',\r\n  ...aolGeometryPolygonComponent,\r\n};\r\n","module.exports = ol.geom;","module.exports = ol.proj;","import { StyleComponent, aolStyle } from './style.component';\r\nimport { Options } from 'ol/style/Text';\r\nimport { Text } from 'ol/style';\r\nimport TextPlacement from 'ol/style/TextPlacement';\r\nimport Fill from 'ol/style/Fill';\r\nimport Stroke from 'ol/style/Stroke';\r\n\r\nexport class styleTextComponent implements ng.IController, Options {\r\n  public componentType = 'style-text';\r\n  public instance: Text;\r\n\r\n  private host: StyleComponent;\r\n\r\n  font?: string;\r\n  maxAngle?: number;\r\n  offsetX?: number;\r\n  offsetY?: number;\r\n  overflow?: boolean;\r\n  placement?: TextPlacement | string;\r\n  scale?: number;\r\n  rotateWithView?: boolean;\r\n  rotation?: number;\r\n  text?: string;\r\n  textAlign?: string;\r\n  textBaseline?: string;\r\n  fill?: Fill;\r\n  stroke?: Stroke;\r\n  backgroundFill?: Fill;\r\n  backgroundStroke?: Stroke;\r\n  padding?: number[];\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (!this.host) {\r\n      throw new Error('aol-style-icon must be applied to a style component');\r\n    }\r\n    this.instance = new Text(this);\r\n    this.host.instance.setText(this.instance);\r\n    this.host.update();\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.setText(null);\r\n    this.host.update();\r\n  }\r\n\r\n  //@TODO: \r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    if (changes['font']) {\r\n      this.instance.setFont(changes['font'].currentValue);\r\n    }\r\n    if (changes['offsetX']) {\r\n      this.instance.setOffsetX(changes['offsetX'].currentValue);\r\n    }\r\n    if (changes['offsetY']) {\r\n      this.instance.setOffsetY(changes['offsetY'].currentValue);\r\n    }\r\n    if (changes['scale']) {\r\n      this.instance.setScale(changes['scale'].currentValue);\r\n    }\r\n    if (changes['rotation']) {\r\n      this.instance.setRotation(changes['rotation'].currentValue);\r\n    }\r\n    if (changes['text']) {\r\n      this.instance.setText(changes['text'].currentValue);\r\n    }\r\n    if (changes['textAlign']) {\r\n      this.instance.setTextAlign(changes['textAlign'].currentValue);\r\n    }\r\n    if (changes['textBaseLine']) {\r\n      this.instance.setTextBaseline(changes['textBaseLine'].currentValue);\r\n    }\r\n    this.host.update();\r\n    // console.log('changes detected in aol-style-icon: ', changes);\r\n  }\r\n}\r\n\r\nvar aolStyleTextComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    font: '<?',\r\n    maxAngle: '<?',\r\n    offsetX: '<?',\r\n    offsetY: '<?',\r\n    overflow: '<?',\r\n    placement: '<?',\r\n    scale: '<?',\r\n    rotateWithView: '<?',\r\n    rotation: '<?',\r\n    text: '<?',\r\n    textAlign: '<?',\r\n    textBaseline: '<?',\r\n    fill: '<?',\r\n    stroke: '<?',\r\n    backgroundFill: '<?',\r\n    backgroundStroke: '<?',\r\n    padding: '<?',\r\n  },\r\n  require: {\r\n    host: `?^${aolStyle.name}`,\r\n  },\r\n  controller: [styleTextComponent],\r\n};\r\n\r\nexport const aolStyleText = {\r\n  name: 'aolStyleText',\r\n  ...aolStyleTextComponent,\r\n};\r\n","import * as angular from 'angular';\r\n\r\nimport mapComponent from './map.component';\r\nimport viewComponent from './view.component';\r\nimport aolFeature from './feature.component';\r\n\r\nimport {\r\n  aolLayerTile,\r\n  aolLayerVector,\r\n  aolLayerGroup,\r\n  aolLayerWebgl,\r\n} from './layers/index';\r\nimport {\r\n  aolSourceXyz,\r\n  aolSourceOsm,\r\n  aolSourceVector,\r\n  aolSourceCluster,\r\n  aolSourceTiledebug,\r\n} from './sources/index';\r\nimport {\r\n  aolGeometryLinestring,\r\n  aolGeometryPoint,\r\n  aolGeometryPolygon,\r\n} from './geometry.component';\r\nimport {\r\n  aolCoordinate,\r\n  aolCollectionCoordinates,\r\n} from './coordinate.component';\r\nimport {\r\n  aolStyle,\r\n  aolStyleStroke,\r\n  aolStyleFill,\r\n  aolStyleCircle,\r\n  aolStyleIcon,\r\n  aolStyleText,\r\n} from './styles';\r\n\r\nimport { aolOverlay } from './overlay.component';\r\nimport {\r\n  aolInteractionDefaults,\r\n  aolInteractionModify,\r\n  aolInteractionSelect,\r\n  aolInteractionDraganddrop,\r\n} from './interactions';\r\nimport { aolInteractionDraw } from './interactions/draw.component';\r\n\r\nvar aolModule = angular.module('aol', []);\r\nfunction registerComponent(component: any) {\r\n  aolModule.component(component.name, component);\r\n}\r\n\r\n[\r\n  mapComponent,\r\n  viewComponent,\r\n  /** */\r\n  aolLayerTile,\r\n  aolLayerVector,\r\n  aolLayerWebgl,\r\n  aolLayerGroup,\r\n  /** */\r\n  aolSourceXyz,\r\n  aolSourceOsm,\r\n  aolSourceVector,\r\n  aolSourceCluster,\r\n  aolSourceTiledebug,\r\n  /** */\r\n  aolFeature,\r\n  /**geo */\r\n  aolGeometryLinestring,\r\n  aolGeometryPoint,\r\n  aolGeometryPolygon,\r\n  /** */\r\n  aolCoordinate,\r\n  aolCollectionCoordinates,\r\n  /** */\r\n  aolStyle,\r\n  aolStyleStroke,\r\n  aolStyleCircle,\r\n  aolStyleIcon,\r\n  aolStyleText,\r\n  aolStyleFill,\r\n  /**domTOMap */\r\n  aolOverlay,\r\n  /** */\r\n  aolInteractionDefaults,\r\n  aolInteractionDraw,\r\n  aolInteractionModify,\r\n  aolInteractionSelect,\r\n  aolInteractionDraganddrop,\r\n].forEach(component => {\r\n  registerComponent(component);\r\n});\r\n\r\nexport default aolModule;\r\n","import { sourceComponentConfig } from './source.component';\r\nimport { XYZ } from 'ol/source';\r\nimport { Options } from 'ol/source/XYZ';\r\nimport { LayerTileComponent, aolLayerTile } from '../layers';\r\nimport TileGrid from 'ol/tilegrid/TileGrid';\r\nimport { LoadFunction, UrlFunction } from 'ol/Tile';\r\nimport { Size } from 'ol/size';\r\nimport { ProjectionLike } from 'ol/proj';\r\nimport { SourceXYZExtend } from './xyz.component.extend';\r\n\r\nexport class SourceXYZComponent extends SourceXYZExtend\r\n  implements angular.IController, Options {\r\n  public instance: XYZ;\r\n  public componentType: string = 'sourceXYZComponent';\r\n  public host: LayerTileComponent;\r\n\r\n  cacheSize?: number;\r\n  crossOrigin?: string;\r\n  opaque?: boolean;\r\n  projection?: ProjectionLike;\r\n  reprojectionErrorThreshold?: number;\r\n  maxZoom?: number;\r\n  minZoom?: number;\r\n  tileGrid?: TileGrid;\r\n  tileLoadFunction?: LoadFunction;\r\n  tilePixelRatio?: number;\r\n  tileSize?: number | Size;\r\n  tileUrlFunction?: UrlFunction;\r\n  url?: string;\r\n  urls?: string[];\r\n  wrapX?: boolean;\r\n  transition?: number;\r\n  zDirection?: number;\r\n\r\n  //   constructor(host: angular.IRootElementService) {\r\n\r\n  //   }\r\n\r\n  $onInit() {\r\n    super.decorate();\r\n\r\n    this.instance = new XYZ(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n    if (changes.hasOwnProperty('url') || changes.hasOwnProperty('tileGrid')) {\r\n      // this.instance = new XYZ(this);\r\n      // this._register(this.instance);\r\n      this.$onInit();\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    cacheSize: '<?',\r\n    crossOrigin: '<?',\r\n    opaque: '<?',\r\n    projection: '<?',\r\n    reprojectionErrorThreshold: '<?',\r\n    minZoom: '<?',\r\n    maxZoom: '<?',\r\n    tileGrid: '<?',\r\n    tileLoadFunction: '<?',\r\n    tilePixelRatio: '<?',\r\n    tileSize: '<?',\r\n    tileUrlFunction: '<?',\r\n    url: '<?',\r\n    urls: '<?',\r\n    wrapX: '<?',\r\n    transition: '<?',\r\n    zDirection: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolLayerTile.name}`,\r\n  },\r\n  controller: ['$element', SourceXYZComponent],\r\n};\r\n\r\nexport const aolSourceXyz = {\r\n  name: 'aolSourceXyz',\r\n  ...component,\r\n};\r\n","import { LayerComponent, layerComponentConfig } from './layer.component';\r\nimport { Tile as TileLayer } from 'ol/layer';\r\n\r\nexport class LayerTileComponent extends LayerComponent\r\n  implements angular.IController {\r\n  public instance: TileLayer;\r\n\r\n  preload: number;\r\n  useInterimTilesOnError: boolean;\r\n\r\n  //   constructor(map: MapComponent, @Optional() group?: LayerGroupComponent) {\r\n  //     super(group || map);\r\n  //   }\r\n\r\n  $onInit() {\r\n    this.instance = new TileLayer(this);\r\n    super.$onInit();\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    super.$onChanges(changes);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...layerComponentConfig.bindings,\r\n    preload: '<?',\r\n    useInterimTilesOnError: '<?',\r\n  },\r\n  require: layerComponentConfig.require,\r\n  controller: [LayerTileComponent],\r\n};\r\n\r\nexport const aolLayerTile = {\r\n  name: 'aolLayerTile',\r\n  ...component,\r\n};\r\n","import { LayerComponent, layerComponentConfig } from './layer.component';\r\nimport { Vector as VectorLayer } from 'ol/layer';\r\nimport { OrderFunction } from 'ol/render';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport { StyleLike } from 'ol/style/Style';\r\n// import { Feature } from 'ol';\r\n// import Point from 'ol/geom/Point';\r\n\r\nexport class LayerVectorComponent extends LayerComponent\r\n  implements angular.IController {\r\n  public instance: VectorLayer;\r\n  public componentType: string = 'LayerVectorComponent';\r\n\r\n  renderOrder?: OrderFunction;\r\n  renderBuffer?: number;\r\n  source?: VectorSource<Geometry>;\r\n  declutter?: boolean;\r\n  style?: StyleLike;\r\n  updateWhileAnimating?: boolean;\r\n  updateWhileInteracting?: boolean;\r\n\r\n  //   constructor(map: MapComponent, @Optional() group?: LayerGroupComponent) {\r\n  //     super(group || map);\r\n  //   }\r\n\r\n  $onInit() {\r\n    this.instance = new VectorLayer(this);\r\n    super.$onInit();\r\n    // this.instance.setSource(\r\n    //   new VectorSource({\r\n    //     features: [new Feature(new Point([0, 0]))],\r\n    //   }),\r\n    // );\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    super.$onChanges(changes);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...layerComponentConfig.bindings,\r\n    renderOrder: '<?',\r\n    renderBuffer: '<?',\r\n    source: '<?',\r\n    declutter: '<?',\r\n    style: '<?',\r\n    updateWhileAnimating: '<?',\r\n    updateWhileInteracting: '<?',\r\n    properties: '<?',\r\n  },\r\n  require: layerComponentConfig.require,\r\n  controller: [LayerVectorComponent],\r\n};\r\n\r\nexport const aolLayerVector = {\r\n  name: 'aolLayerVector',\r\n  ...component,\r\n};\r\n","import { layerComponentConfig, LayerComponent } from './layer.component';\r\nimport { Options } from 'ol/layer/Group';\r\nimport { Group as LayerGroup } from 'ol/layer';\r\nimport { MapComponent } from '../map.component';\r\n\r\nexport class LayerGroupComponent extends LayerComponent\r\n  implements ng.IController, Options {\r\n  public componentType: string = 'LayerGroupComponent';\r\n  public instance: LayerGroup;\r\n\r\n  protected host: MapComponent | LayerGroupComponent;\r\n\r\n  $onInit() {\r\n    // console.log(`creating ol.layer.Group instance with:`, this);\r\n    this.instance = new LayerGroup(this);\r\n    super.$onInit();\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...layerComponentConfig.bindings,\r\n  },\r\n  require: layerComponentConfig.require,\r\n  controller: [LayerGroupComponent],\r\n};\r\n\r\nexport const aolLayerGroup = {\r\n  name: 'aolLayerGroup',\r\n  ...component,\r\n};\r\n","import { LayerComponent, layerComponentConfig } from './layer.component';\r\nimport WebGLPointsLayer from 'ol/layer/WebGLPoints';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport { LiteralStyle, SymbolType } from 'ol/style/LiteralStyle';\r\n\r\nexport class LayerWebglComponent extends LayerComponent\r\n  implements angular.IController {\r\n  public instance: WebGLPointsLayer;\r\n  public componentType: string = 'LayerVectorComponent';\r\n\r\n  style: any | LiteralStyle = {\r\n    symbol: {\r\n      symbolType: 'circle',\r\n      size: 6,\r\n      color: '#CD853F',\r\n      // [\r\n      //   \"interpolate\",\r\n      //   [\"linear\"],\r\n      //   [\"get\", \"webgltype\"],\r\n      //   \"00\",\r\n      //   \"#CD853F\",\r\n      //   \"01\", // \r\n      //   \"#B0C4DE\",\r\n      //   \"02\", // \r\n      //   \"#08B012\",\r\n      //   \"03\", // \r\n      //   \"#EA1600\",\r\n      //   \"04\", // \r\n      //   \"#FF8C00\",\r\n      //   \"05\", // \r\n      //   \"#D00BC5\",\r\n      //   \"06\", // \r\n      //   \"#2CD9DC\",\r\n      //   \"0909\", // \r\n      //   \"#00D28E\",\r\n      //   \"0905\", // \r\n      //   \"#F5F5F5\",\r\n      //   \"0903\", // \r\n      //   \"#FFFF00\",\r\n      //   \"90\", // \r\n      //   \"#1F4EC2\"\r\n      //   // \"09\", // \r\n      // ],\r\n      // rotateWithView: false,\r\n      offset: [0, 0],\r\n    },\r\n  };\r\n  source?: VectorSource<Geometry>;\r\n  disableHitDetection?: boolean;\r\n\r\n  //   constructor(map: MapComponent, @Optional() group?: LayerGroupComponent) {\r\n  //     super(group || map);\r\n  //   }\r\n\r\n  $onInit() {\r\n    this.instance = new WebGLPointsLayer(this);\r\n    super.$onInit();\r\n    // this.instance.setSource(\r\n    //   new VectorSource({\r\n    //     features: [new Feature(new Point([0, 0]))],\r\n    //   }),\r\n    // );\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    super.$onChanges(changes);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...layerComponentConfig.bindings,\r\n    style: '<?',\r\n    className: '<?',\r\n    opacity: '<?',\r\n    visible: '<?',\r\n    extent: '<?',\r\n    zIndex: '<?',\r\n    minResolution: '<?',\r\n    maxResolution: '<?',\r\n    source: '<?',\r\n    disableHitDetection: '<?',\r\n  },\r\n  require: layerComponentConfig.require,\r\n  controller: [LayerWebglComponent],\r\n};\r\n\r\nexport const aolLayerWebgl = {\r\n  name: 'aolLayerWebgl',\r\n  ...component,\r\n};\r\n","/*\r\n * @Author: lich\r\n * @Date: 2020-03-17 13:33:45\r\n * @Last Modified by:   lich\r\n * @Last Modified time: 2020-03-17 13:33:45\r\n * \r\n */\r\nimport TileGrid, { Options } from 'ol/tilegrid/TileGrid';\r\nimport { SourceComponent } from './source.component';\r\n\r\nconst resolutions = [\r\n  156543.03392804097,\r\n  78271.51696402048,\r\n  39135.75848201024,\r\n  19567.87924100512,\r\n  9783.93962050256,\r\n  4891.96981025128,\r\n  2445.98490512564,\r\n  1222.99245256282,\r\n  611.49622628141,\r\n  305.748113140705,\r\n  152.8740565703525,\r\n  76.43702828517625,\r\n  38.21851414258813,\r\n  19.109257071294063,\r\n  9.554628535647032,\r\n  4.777314267823516,\r\n  2.388657133911758,\r\n  1.194328566955879,\r\n  0.5971642834779395,\r\n  0.29858214173896974,\r\n  0.14929107086948487,\r\n  0.07464553543474244,\r\n  0.03732276771737122,\r\n  0.01866138385868561,\r\n  0.009330691929342804,\r\n  0.004665345964671402,\r\n  0.002332672982335701,\r\n  0.0011663364911678506,\r\n  0.0005831682455839253,\r\n  0.00029158412279196264,\r\n  0.00014579206139598132,\r\n  0.00007289603069799066,\r\n  0.00003644801534899533,\r\n  0.000018224007674497665,\r\n  0.000009112003837248832,\r\n  0.000004556001918624416,\r\n  0.000002278000959312208,\r\n  0.000001139000479656104,\r\n  5.69500239828052e-7,\r\n  2.84750119914026e-7,\r\n  1.42375059957013e-7,\r\n  7.11875299785065e-8,\r\n  3.559376498925325e-8,\r\n];\r\n\r\nconst resolutions_4326 = [\r\n  1.40625,\r\n  0.703125,\r\n  0.3515625,\r\n  0.17578125,\r\n  0.087890625,\r\n  0.0439453125,\r\n  0.02197265625,\r\n  0.010986328125,\r\n  0.0054931640625,\r\n  0.00274658203125,\r\n  0.001373291015625,\r\n  0.0006866455078125,\r\n  0.00034332275390625,\r\n  0.000171661376953125,\r\n  0.0000858306884765625,\r\n  0.00004291534423828125,\r\n  0.000021457672119140625,\r\n  0.000010728836059570312,\r\n  0.000005364418029785156,\r\n  0.000002682209014892578,\r\n  0.000001341104507446289,\r\n  6.705522537231445e-7,\r\n  3.3527612686157227e-7,\r\n  1.6763806343078613e-7,\r\n  8.381903171539307e-8,\r\n  4.190951585769653e-8,\r\n  2.0954757928848267e-8,\r\n  1.0477378964424133e-8,\r\n  5.238689482212067e-9,\r\n  2.6193447411060333e-9,\r\n  1.3096723705530167e-9,\r\n  6.548361852765083e-10,\r\n  3.2741809263825417e-10,\r\n  1.6370904631912708e-10,\r\n  8.185452315956354e-11,\r\n  4.092726157978177e-11,\r\n  2.0463630789890885e-11,\r\n  1.0231815394945443e-11,\r\n  5.115907697472721e-12,\r\n  2.5579538487363607e-12,\r\n  1.2789769243681803e-12,\r\n  6.394884621840902e-13,\r\n  3.197442310920451e-13,\r\n];\r\n\r\nexport class SourceXYZExtend extends SourceComponent {\r\n  tileGrid?: any;\r\n  projection?: any;\r\n  decorate() {\r\n    if (!this.tileGrid || this.tileGrid.forEachTileCoord) return;\r\n    if (!this.tileGrid.resolutions) {\r\n      this.tileGrid.resolutions =\r\n        this.projection === 'EPSG:4326' ? resolutions_4326 : resolutions;\r\n    }\r\n    this.tileGrid = new TileGrid(this.tileGrid);\r\n  }\r\n}\r\n","import { SourceComponent, sourceComponentConfig } from './source.component';\r\nimport { OSM } from 'ol/source';\r\nimport { LoadFunction } from 'ol/Tile';\r\nimport { LayerTileComponent, aolLayerTile } from '../layers';\r\n\r\nexport class SourceOSMComponent extends SourceComponent\r\n  implements ng.IController {\r\n  public instance: OSM;\r\n  public componentType: string = 'SourceOSMComponent';\r\n  public host: LayerTileComponent;\r\n\r\n  cacheSize?: number;\r\n  crossOrigin?: string;\r\n  maxZoom?: number;\r\n  opaque?: boolean;\r\n  reprojectionErrorThreshold?: number;\r\n  tileLoadFunction?: LoadFunction;\r\n  url?: string;\r\n  wrapX?: boolean;\r\n\r\n  $onInit() {\r\n    this.instance = new OSM(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  ngOnChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n    if (changes.hasOwnProperty('url')) {\r\n      this.instance = new OSM(this);\r\n      this._register(this.instance);\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    cacheSize: '<?',\r\n    crossOrigin: '<?',\r\n    opaque: '<?',\r\n    reprojectionErrorThreshold: '<?',\r\n    maxZoom: '<?',\r\n    tileLoadFunction: '<?',\r\n    url: '<?',\r\n    wrapX: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolLayerTile.name}`,\r\n  },\r\n  controller: [SourceOSMComponent],\r\n};\r\n\r\nexport const aolSourceOsm = {\r\n  name: 'aolSourceOsm',\r\n  ...component,\r\n};\r\n","import { SourceComponent, sourceComponentConfig } from './source.component';\r\nimport {\r\n  aolLayerVector,\r\n  LayerVectorComponent,\r\n  LayerGroupComponent,\r\n  aolLayerWebgl,\r\n} from '../layers';\r\nimport { LoadingStrategy } from 'ol/source/Vector';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport { Feature, Collection } from 'ol';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport FeatureFormat from 'ol/format/Feature';\r\nimport { FeatureLoader, FeatureUrlFunction } from 'ol/featureloader';\r\n\r\nexport class SourceVectorComponent extends SourceComponent\r\n  implements angular.IController {\r\n  public instance: VectorSource;\r\n  public componentType: string = 'SourceVectorComponent';\r\n  public host: LayerVectorComponent | LayerGroupComponent;\r\n  public layerVectorHost: LayerVectorComponent;\r\n  public layerWebglHost: LayerGroupComponent;\r\n\r\n  features?: Feature<Geometry>[] | Collection<Feature<Geometry>>;\r\n  format?: FeatureFormat;\r\n  loader?: FeatureLoader;\r\n  overlaps?: boolean;\r\n  strategy?: LoadingStrategy;\r\n  url?: string | FeatureUrlFunction;\r\n  useSpatialIndex?: boolean;\r\n  wrapX?: boolean;\r\n\r\n  //   constructor(host: angular.IRootElementService) {\r\n\r\n  //   }\r\n\r\n  $onInit() {\r\n    if (this.layerVectorHost) {\r\n      this.host = this.layerVectorHost;\r\n    } else if (this.layerWebglHost) {\r\n      this.host = this.layerWebglHost;\r\n    } else {\r\n      throw new Error(\r\n        'aol-source-vector must be applied to a Style or layerWebglHost or layerVectorHost component',\r\n      );\r\n    }\r\n\r\n    this.instance = new VectorSource(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'features':\r\n            this.instance.addFeatures(changes[key].currentValue);\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n    // if (changes.hasOwnProperty('url')) {\r\n    //   this.instance = new VectorSource(this);\r\n    //   this._register(this.instance);\r\n    // }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    features: '<?',\r\n    format: '<?',\r\n    loader: '<?',\r\n    overlaps: '<?',\r\n    strategy: '<?',\r\n    url: '<?',\r\n    useSpatialIndex: '<?',\r\n    wrapX: '<?',\r\n  },\r\n  require: {\r\n    layerVectorHost: `^?${aolLayerVector.name}`,\r\n    layerWebglHost: `^?${aolLayerWebgl.name}`,\r\n  },\r\n  controller: [SourceVectorComponent],\r\n};\r\n\r\nexport const aolSourceVector = {\r\n  name: 'aolSourceVector',\r\n  ...component,\r\n};\r\n","import { SourceComponent, sourceComponentConfig } from \"./source.component\";\r\nimport { Cluster  } from \"ol/source\";\r\nimport { Options  } from \"ol/source/Cluster\";\r\nimport { Feature } from \"ol\";\r\nimport { Geometry, Point } from \"ol/geom\";\r\nimport { Vector } from \"ol/source\";\r\nimport { LayerVectorComponent, aolLayerVector } from \"../layers\";\r\n\r\nexport class SourceClusterComponent extends SourceComponent\r\n  implements angular.IController , Options {\r\n  public instance: Cluster;\r\n  public componentType: string = 'SourceClusterComponent';\r\n  public host: LayerVectorComponent;\r\n\r\n  distance?: number;\r\n  geometryFunction?: (p0: Feature<Geometry>) => Point;\r\n  source: Vector<Geometry>;\r\n  wrapX?: boolean;\r\n\r\n  //   constructor(host: angular.IRootElementService) {\r\n\r\n  //   }\r\n\r\n  $onInit() {\r\n    if(!this.source) return ;\r\n    this.instance = new Cluster(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      this.$onInit();\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n    if (changes.hasOwnProperty('source')) {\r\n      this.$onDestroy();\r\n      this.instance = new Cluster(this);\r\n      this._register(this.instance);\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    distance: '<?',\r\n    geometryFunction: '<?',\r\n    source: '<',\r\n    wrapX: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolLayerVector.name}`,\r\n  },\r\n  controller: ['$element', SourceClusterComponent],\r\n};\r\n\r\n\r\nexport const aolSourceCluster = {\r\n  name: 'aolSourceCluster',\r\n  ...component,\r\n};\r\n","import { SourceComponent, sourceComponentConfig } from './source.component';\r\nimport { TileDebug } from 'ol/source';\r\nimport { Options } from 'ol/source/TileDebug';\r\nimport { LayerTileComponent, aolLayerTile } from '../layers';\r\nimport { ProjectionLike } from 'ol/proj';\r\nimport TileGrid from 'ol/tilegrid/TileGrid';\r\n\r\nexport class SourceTiledebugComponent extends SourceComponent\r\n  implements ng.IController, Options {\r\n  public instance: TileDebug;\r\n  public componentType: string = 'SourceTiledebugComponent';\r\n  public host: LayerTileComponent;\r\n\r\n  projection?: ProjectionLike;\r\n  tileGrid?: TileGrid;\r\n  wrapX?: boolean;\r\n  zDirection?: number;\r\n\r\n  $onInit() {\r\n    this.instance = new TileDebug(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  ngOnChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    projection: '<?',\r\n    tileGrid: '<?',\r\n    wrapX: '<?',\r\n    zDirection: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolLayerTile.name}`,\r\n  },\r\n  controller: [SourceTiledebugComponent],\r\n};\r\n\r\nexport const aolSourceTiledebug = {\r\n  name: 'aolSourceTiledebug',\r\n  ...component,\r\n};\r\n","import * as angular from 'angular';\r\nimport { MapComponent } from './map.component';\r\nimport { ViewComponent } from './view.component';\r\nimport {\r\n  GeometryPointComponent,\r\n  aolGeometryPoint,\r\n  GeometryLinestringComponent,\r\n  GeometryPolygonComponent,\r\n  aolGeometryLinestring,\r\n  aolGeometryPolygon,\r\n} from './geometry.component';\r\nimport Projection from 'ol/proj/Projection';\r\nimport { transform } from 'ol/proj';\r\nimport aolView from './view.component';\r\nimport aolMap from './map.component';\r\nimport { Coordinate } from 'ol/coordinate';\r\n\r\nexport class CoordinateComponent implements ng.IController {\r\n  private host: any;\r\n\r\n  private map: MapComponent;\r\n  private viewHost?: ViewComponent;\r\n  private geometryPointHost?: GeometryPointComponent;\r\n  // private overlayHost?:GeometryPointComponent;\r\n\r\n  x: number;\r\n  y: number;\r\n  srid: string = 'EPSG:4326';\r\n\r\n  $onInit() {\r\n    if (this.geometryPointHost) {\r\n      this.host = this.geometryPointHost;\r\n    } else if (this.viewHost) {\r\n      this.host = this.viewHost;\r\n    } else {\r\n      throw new Error(\r\n        'aol-collection-coordinates must be a child of a geometry component',\r\n      );\r\n    }\r\n    this.$onChanges({});\r\n    //    else if (overlayHost !== null) {\r\n    //     this.host = overlayHost;\r\n    //   }\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    if (!this.host || !angular.isNumber(this.x) || !angular.isNumber(this.y))\r\n      return;\r\n    let referenceProjection: Projection;\r\n    let referenceProjectionCode: string;\r\n    let transformedCoordinates: number[];\r\n\r\n    referenceProjection = this.map.instance.getView().getProjection();\r\n    referenceProjectionCode = referenceProjection\r\n      ? referenceProjection.getCode()\r\n      : 'EPSG:3857';\r\n\r\n    if (this.srid === referenceProjectionCode) {\r\n      transformedCoordinates = [this.x, this.y];\r\n    } else {\r\n      transformedCoordinates = transform(\r\n        [this.x, this.y],\r\n        this.srid,\r\n        referenceProjectionCode,\r\n      );\r\n    }\r\n\r\n    switch (this.host.componentType) {\r\n      case 'geometry-point':\r\n        this.host.instance.setCoordinates(transformedCoordinates);\r\n        break;\r\n      case 'view':\r\n        this.host.instance.setCenter(transformedCoordinates);\r\n        break;\r\n      // case \"overlay\":\r\n      //   this.host.instance.setPosition(transformedCoordinates);\r\n      //   break;\r\n    }\r\n  }\r\n}\r\n\r\nvar aolGeometryPolygonComponent: angular.IComponentOptions = {\r\n  bindings: {\r\n    x: '<',\r\n    y: '<',\r\n    srid: '<?',\r\n  },\r\n  require: {\r\n    viewHost: `?^${aolView.name}`,\r\n    geometryPointHost: `?^${aolGeometryPoint.name}`,\r\n    map: `^${aolMap.name}`,\r\n  },\r\n  controller: [CoordinateComponent],\r\n};\r\n\r\nexport const aolCoordinate = {\r\n  name: 'aolCoordinate',\r\n  ...aolGeometryPolygonComponent,\r\n};\r\n\r\nexport class CollectionCoordinatesComponent implements ng.IController {\r\n  private host: any;\r\n\r\n  private map: MapComponent;\r\n  private geometryLinestring?: GeometryLinestringComponent;\r\n  private geometryPolygon?: GeometryPolygonComponent;\r\n\r\n  coordinates: [number, number][];\r\n  srid: string = 'EPSG:4326';\r\n\r\n  $onInit() {\r\n    // console.log('creating aol-collection-coordinates');\r\n    if (!!this.geometryLinestring) {\r\n      this.host = this.geometryLinestring;\r\n    } else if (!!this.geometryPolygon) {\r\n      this.host = this.geometryPolygon;\r\n    } else {\r\n      throw new Error(\r\n        'aol-collection-coordinates must be a child of a geometry component',\r\n      );\r\n    }\r\n    this.$onChanges({});\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    if (!this.host || !(this.coordinates instanceof Array)) return;\r\n    let referenceProjection: Projection;\r\n    let referenceProjectionCode: string;\r\n    let transformedCoordinates: Array<Coordinate>;\r\n\r\n    // console.log('coordinates change: ', this.coordinates);\r\n\r\n    referenceProjection = this.map.instance.getView().getProjection();\r\n    referenceProjectionCode = referenceProjection\r\n      ? referenceProjection.getCode()\r\n      : 'EPSG:3857';\r\n\r\n    if (this.srid === referenceProjectionCode) {\r\n      transformedCoordinates = this.coordinates;\r\n    } else {\r\n      transformedCoordinates = [];\r\n      this.coordinates.forEach(\r\n        function(coordinate: Coordinate) {\r\n          transformedCoordinates.push(\r\n            transform(coordinate, this.srid, referenceProjectionCode),\r\n          );\r\n        }.bind(this),\r\n      );\r\n    }\r\n\r\n    switch (this.host.componentType) {\r\n      case 'geometry-linestring':\r\n        this.host.instance.setCoordinates(transformedCoordinates);\r\n        break;\r\n      case 'geometry-polygon':\r\n        this.host.instance.setCoordinates([transformedCoordinates]);\r\n        break;\r\n      default:\r\n        throw new Error(\r\n          \"aol-collection-coordinates' host is of unknown type: \" +\r\n            this.host.componentType,\r\n        );\r\n      // break;\r\n    }\r\n  }\r\n}\r\n\r\nconst aolCollectionCoordinatesComponent: angular.IComponentOptions = {\r\n  bindings: {\r\n    coordinates: '<',\r\n    srid: '<?',\r\n  },\r\n  require: {\r\n    geometryPolygon: `?^${aolGeometryPolygon.name}`,\r\n    geometryLinestring: `?^${aolGeometryLinestring.name}`,\r\n    map: `^${aolMap.name}`,\r\n  },\r\n  controller: [CollectionCoordinatesComponent],\r\n};\r\n\r\nexport const aolCollectionCoordinates = {\r\n  name: 'aolCollectionCoordinates',\r\n  ...aolCollectionCoordinatesComponent,\r\n};\r\n","export * from \"./style.component\";\r\nexport * from \"./stroke.component\";\r\nexport * from \"./fill.component\";\r\nexport * from \"./circle.component\";\r\nexport * from \"./icon.component\";\r\nexport * from \"./text.component\";","import { Options } from 'ol/style/Stroke';\r\nimport { Stroke } from 'ol/style';\r\nimport { StyleComponent, aolStyle } from './style.component';\r\nimport { Color } from 'ol/color';\r\nimport { ColorLike } from 'ol/colorlike';\r\nimport { styleCircleComponent, aolStyleCircle } from './circle.component';\r\n\r\nexport class StrokeComponent implements ng.IController, Options {\r\n  public componentType = 'style-stroke';\r\n  public instance: Stroke;\r\n\r\n  private host: any; // StyleComponent | CircleComponent;\r\n\r\n  color?: Color | ColorLike;\r\n  lineCap?: CanvasLineCap;\r\n  lineJoin?: CanvasLineJoin;\r\n  lineDash?: number[];\r\n  lineDashOffset?: number;\r\n  miterLimit?: number;\r\n  width?: number;\r\n\r\n  //   protected layerVectorHost: LayerVectorComponent;\r\n  protected styleHost: StyleComponent;\r\n  protected styleCircleHost: styleCircleComponent;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (this.styleCircleHost) {\r\n      this.host = this.styleCircleHost;\r\n    } else if (this.styleHost) {\r\n      this.host = this.styleHost;\r\n    } else {\r\n      throw new Error('aol-style must be applied to a feature or a layer');\r\n    }\r\n    this.instance = new Stroke(this);\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setStroke(this.instance);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.stroke = this.instance;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  // $postLink(){\r\n  //     this.host.instance.setStyle(this.instance);\r\n  // }\r\n\r\n  //   update() {\r\n  //     this.host.instance.changed();\r\n  //   }\r\n\r\n  $onDestroy() {\r\n    // this.host.instance.setStroke(null);\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setStroke(null);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.stroke = null;\r\n        this.host.update();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'color':\r\n            this.instance.setColor(changes[key].currentValue);\r\n            break;\r\n          case 'lineCap':\r\n            this.instance.setLineCap(changes[key].currentValue);\r\n            break;\r\n          case 'lineDash':\r\n            this.instance.setLineDash(changes[key].currentValue);\r\n            break;\r\n          case 'lineDashOffset':\r\n            this.instance.setLineDashOffset(changes[key].currentValue);\r\n            break;\r\n          case 'lineJoin':\r\n            this.instance.setLineJoin(changes[key].currentValue);\r\n            break;\r\n          case 'miterLimit':\r\n            this.instance.setMiterLimit(changes[key].currentValue);\r\n            break;\r\n          case 'width':\r\n            this.instance.setWidth(changes[key].currentValue);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n    }\r\n    this.host.update();\r\n  }\r\n}\r\n\r\nvar aolStrokeComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    color: '<?',\r\n    lineCap: '<?',\r\n    lineJoin: '<?',\r\n    lineDash: '<?',\r\n    lineDashOffset: '<?',\r\n    miterLimit: '<?',\r\n    width: '<?',\r\n  },\r\n  require: {\r\n    styleHost: `?^${aolStyle.name}`,\r\n    styleCircleHost: `?^${aolStyleCircle.name}`,\r\n  },\r\n  controller: [StrokeComponent],\r\n};\r\n\r\nexport const aolStyleStroke = {\r\n  name: 'aolStyleStroke',\r\n  ...aolStrokeComponent,\r\n};\r\n","import { Options } from 'ol/style/Stroke';\r\nimport { StyleComponent, aolStyle } from './style.component';\r\nimport { Color } from 'ol/color';\r\nimport { ColorLike } from 'ol/colorlike';\r\nimport { Fill } from 'ol/style';\r\nimport { styleCircleComponent, aolStyleCircle } from './circle.component';\r\nimport { styleTextComponent, aolStyleText } from './text.component';\r\n\r\nexport class FillComponent implements ng.IController, Options {\r\n  public componentType = 'fill';\r\n  public instance: Fill;\r\n\r\n  private host: any; // StyleComponent;\r\n  private styleHost: StyleComponent;\r\n  private styleCircleHost: styleCircleComponent;\r\n  private styleTextHost: styleTextComponent;\r\n\r\n  color?: Color | ColorLike;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (this.styleTextHost) {\r\n      this.host = this.styleTextHost;\r\n    } else if (this.styleCircleHost) {\r\n      this.host = this.styleCircleHost;\r\n    } else if (this.styleHost) {\r\n      this.host = this.styleHost;\r\n    } else {\r\n      throw new Error(\r\n        'aol-style-fill must be applied to a Style or styleCircleHost or StyleText component',\r\n      );\r\n    }\r\n    this.instance = new Fill(this);\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setFill(this.instance);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.fill = this.instance;\r\n        this.host.update();\r\n        break;\r\n      case 'style-text':\r\n        this.host.instance.setFill(this.instance);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  // $postLink(){\r\n  //     this.host.instance.setStyle(this.instance);\r\n  // }\r\n\r\n  //   update() {\r\n  //     this.host.instance.changed();\r\n  //   }\r\n  $onDestroy() {\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setFill(null);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.fill = this.instance;\r\n        this.host.update();\r\n        break;\r\n      case 'style-text':\r\n        this.host.instance.setFill(null);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    // this.host.instance.setFill(new Fill({color:changes['color'].currentValue}))\r\n    this.instance = new Fill({ color: changes['color'].currentValue });\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setStroke(this.instance);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.fill = this.instance;\r\n        this.host.update();\r\n        break;\r\n      case 'style-text':\r\n        this.host.instance.setFill(this.instance);\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\nvar aolFillComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    color: '<?',\r\n  },\r\n  require: {\r\n    styleHost: `?^${aolStyle.name}`,\r\n    styleCircleHost: `?^${aolStyleCircle.name}`,\r\n    styleTextHost: `?^${aolStyleText.name}`,\r\n  },\r\n  controller: [FillComponent],\r\n};\r\n\r\nexport const aolStyleFill = {\r\n  name: 'aolStyleFill',\r\n  ...aolFillComponent,\r\n};\r\n","import { StyleComponent, aolStyle } from './style.component';\r\nimport { Options } from 'ol/style/Icon';\r\nimport { Icon } from 'ol/style';\r\nimport IconOrigin from 'ol/style/IconOrigin';\r\nimport IconAnchorUnits from 'ol/style/IconAnchorUnits';\r\nimport { Color } from 'ol/color';\r\nimport { Size } from 'ol/size';\r\n\r\nexport class styleIconComponent implements ng.IController, Options {\r\n  public componentType = 'style-icon';\r\n  public instance: Icon;\r\n\r\n  private host: StyleComponent;\r\n\r\n  anchor?: number[];\r\n  anchorOrigin?: IconOrigin;\r\n  anchorXUnits?: IconAnchorUnits;\r\n  anchorYUnits?: IconAnchorUnits;\r\n  color?: Color | string;\r\n  crossOrigin?: string;\r\n  img?: HTMLImageElement | HTMLCanvasElement;\r\n  offset?: number[];\r\n  offsetOrigin?: IconOrigin;\r\n  opacity?: number;\r\n  scale?: number;\r\n  rotateWithView?: boolean;\r\n  rotation?: number;\r\n  size?: Size;\r\n  imgSize?: Size;\r\n  src?: string;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (!this.host) {\r\n      throw new Error('aol-style-icon must be applied to a style component');\r\n    }\r\n    if (this.img && !this.imgSize) {\r\n      this.imgSize = [this.img.width, this.img.height];\r\n    }\r\n\r\n    this.instance = new Icon(this);\r\n    this.host.instance.setImage(this.instance);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.setImage(null);\r\n  }\r\n\r\n  //@TODO: \r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    if (changes['opacity']) {\r\n      this.instance.setOpacity(changes['opacity'].currentValue);\r\n    }\r\n    if (changes['rotation']) {\r\n      this.instance.setRotation(changes['rotation'].currentValue);\r\n    }\r\n    if (changes['scale']) {\r\n      this.instance.setScale(changes['scale'].currentValue);\r\n    }\r\n    if (changes['src']) {\r\n      this.instance = new Icon(this);\r\n      this.host.instance.setImage(this.instance);\r\n    }\r\n    if (changes['img']) {\r\n      if (this.img && !this.imgSize) {\r\n        this.imgSize = [this.img.width, this.img.height];\r\n      }\r\n      this.instance = new Icon(this);\r\n      this.host.instance.setImage(this.instance);\r\n    }\r\n    if (changes['color']) {\r\n      this.instance = new Icon(this);\r\n      this.host.instance.setImage(this.instance);\r\n    }\r\n    if (changes['imgSize']) {\r\n      this.instance = new Icon(this);\r\n      this.host.instance.setImage(this.instance);\r\n    }\r\n    this.host.update();\r\n    // console.log('changes detected in aol-style-icon: ', changes);\r\n  }\r\n}\r\n\r\nvar aolStyleIconComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    anchor: '<?',\r\n    anchorOrigin: '<?',\r\n    anchorXUnits: '<?',\r\n    anchorYUnits: '<?',\r\n    color: '<?',\r\n    crossOrigin: '<?',\r\n    img: '<?',\r\n    offset: '<?',\r\n    offsetOrigin: '<?',\r\n    opacity: '<?',\r\n    scale: '<?',\r\n    rotateWithView: '<?',\r\n    rotation: '<?',\r\n    size: '<?',\r\n    imgSize: '<?',\r\n    src: '<?',\r\n  },\r\n  require: {\r\n    host: `?^${aolStyle.name}`,\r\n  },\r\n  controller: [styleIconComponent],\r\n};\r\n\r\nexport const aolStyleIcon = {\r\n  name: 'aolStyleIcon',\r\n  ...aolStyleIconComponent,\r\n};\r\n","import { Overlay } from 'ol';\r\nimport { Options, PanOptions } from 'ol/Overlay';\r\nimport OverlayPositioning from 'ol/OverlayPositioning';\r\nimport { Coordinate } from 'ol/coordinate';\r\nimport aolMap, { MapComponent } from './map.component';\r\nimport { fromLonLat } from 'ol/proj';\r\n\r\nexport class OverlayComponent implements ng.IController, Options {\r\n  componentType = 'overlay';\r\n  private instance: Overlay;\r\n  protected host: MapComponent;\r\n\r\n  $element: ng.IRootElementService;\r\n\r\n  // element: Element;\r\n\r\n  id: number | string;\r\n  element: HTMLElement;\r\n  offset?: number[];\r\n  position?: Coordinate;\r\n  positioning?: OverlayPositioning;\r\n  projection?: string;\r\n  stopEvent?: boolean;\r\n  insertFirst?: boolean;\r\n  autoPan?: boolean;\r\n  autoPanAnimation?: PanOptions;\r\n  autoPanMargin?: number;\r\n  className?: string;\r\n\r\n  constructor($element: ng.IRootElementService) {\r\n    this.$element = $element;\r\n  }\r\n\r\n  $onInit() {\r\n    /**@TODO: this.element , $element */\r\n    if (this.$element[0]) {\r\n      this.element = this.$element[0];\r\n      if (this.position) {\r\n        this.position =\r\n          this.projection == 'EPSG:4326'\r\n            ? this.position\r\n            : fromLonLat(this.position);\r\n      }\r\n      this.instance = new Overlay(this);\r\n      this.host.instance.addOverlay(this.instance);\r\n    }\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'position':\r\n            if (this.position) {\r\n              this.position =\r\n                this.projection == 'EPSG:4326'\r\n                  ? this.position\r\n                  : fromLonLat(this.position);\r\n              this.instance.setPosition(this.position);\r\n            } else {\r\n              this.instance.setPosition(undefined);\r\n            }\r\n            return;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n    // console.log('changes detected in aol-view, setting new properties: ', properties);\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    if (this.instance) {\r\n      this.host.instance.removeOverlay(this.instance);\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    id: '<?',\r\n    element: '<?',\r\n    offset: '<?',\r\n    position: '<?',\r\n    positioning: '<?',\r\n    stopEvent: '<?',\r\n    insertFirst: '<?',\r\n    autoPan: '<?',\r\n    autoPanAnimation: '<?',\r\n    autoPanMargin: '<?',\r\n    className: '<',\r\n    projection: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', OverlayComponent],\r\n};\r\n\r\nexport const aolOverlay = {\r\n  name: 'aolOverlay',\r\n  ...component,\r\n};\r\n","export * from './default.component';\r\nexport * from './modify.component';\r\nexport * from './select.component';\r\nexport * from './draganddrop.component';\r\n","import { Collection } from 'ol';\r\nimport Interaction from 'ol/interaction/Interaction';\r\nimport {\r\n  defaults as defaultInteraction,\r\n  DefaultsOptions,\r\n} from 'ol/interaction';\r\nimport aolMap, { MapComponent } from '../map.component';\r\n\r\nexport class DefaultInteractionComponent\r\n  implements ng.IController, DefaultsOptions {\r\n  instance: Collection<Interaction>;\r\n  private host: MapComponent;\r\n\r\n  altShiftDragRotate?: boolean;\r\n  onFocusOnly?: boolean;\r\n  doubleClickZoom?: boolean;\r\n  keyboard?: boolean;\r\n  mouseWheelZoom?: boolean;\r\n  shiftDragZoom?: boolean;\r\n  dragPan?: boolean;\r\n  pinchRotate?: boolean;\r\n  pinchZoom?: boolean;\r\n  zoomDelta?: number;\r\n  zoomDuration?: number;\r\n\r\n  //   constructor() {}\r\n\r\n  $onInit() {\r\n    this.instance = defaultInteraction(this);\r\n    this.instance.forEach(interaction =>\r\n      this.host.instance.addInteraction(interaction),\r\n    );\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.instance.forEach(interaction =>\r\n      this.host.instance.removeInteraction(interaction),\r\n    );\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    altShiftDragRotate: '<?',\r\n    onFocusOnly: '<?',\r\n    doubleClickZoom: '<?',\r\n    keyboard: '<?',\r\n    mouseWheelZoom: '<?',\r\n    shiftDragZoom: '<?',\r\n    dragPan: '<?',\r\n    pinchRotate: '<?',\r\n    pinchZoom: '<?',\r\n    zoomDelta: '<?',\r\n    zoomDuration: '<',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', DefaultInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionDefaults = {\r\n  name: 'aolInteractionDefaults',\r\n  ...component,\r\n};\r\n","import * as angular from 'angular';\r\nimport aolMap, { MapComponent } from '../map.component';\r\nimport { Modify } from 'ol/interaction';\r\nimport { Options, ModifyEvent } from 'ol/interaction/Modify';\r\nimport { Condition } from 'ol/events/condition';\r\nimport { StyleLike } from 'ol/style/Style';\r\nimport VectorSource from 'ol/source/Vector';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport { Collection, Feature } from 'ol';\r\n\r\nexport class ModifyInteractionComponent implements ng.IController, Options {\r\n  private instance: Modify;\r\n  protected host: MapComponent;\r\n\r\n  condition?: Condition;\r\n  deleteCondition?: Condition;\r\n  insertVertexCondition?: Condition;\r\n  pixelTolerance?: number;\r\n  style?: StyleLike;\r\n  source?: VectorSource<Geometry>;\r\n  features?: Collection<Feature<Geometry>>;\r\n  wrapX?: boolean;\r\n\r\n  onModifyEnd = angular.noop;\r\n  onModifyStart = angular.noop;\r\n  onChange = angular.noop;\r\n  onChangeActive = angular.noop;\r\n  onPropertyChange = angular.noop;\r\n\r\n  //   constructor(private map: MapComponent) {}\r\n\r\n  $onInit() {\r\n    if (!this.source && !this.features) {\r\n      console.error('The modify interaction requires features or a source');\r\n      return;\r\n    }\r\n    this.instance = new Modify(this);\r\n    this.instance.on('change', (event: ModifyEvent) =>\r\n      this.onChange({ event }),\r\n    );\r\n    this.instance.on('change:active', (event: ModifyEvent) =>\r\n      this.onChangeActive({ event }),\r\n    );\r\n    this.instance.on('propertychange', (event: ModifyEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.instance.on('modifyend', (event: ModifyEvent) =>\r\n      this.onModifyEnd({ event }),\r\n    );\r\n    this.instance.on('modifystart', (event: ModifyEvent) =>\r\n      this.onModifyStart({ event }),\r\n    );\r\n    this.host.instance.addInteraction(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      this.$onInit();\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'source':\r\n            this.$onDestroy();\r\n            this.$onInit();\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeInteraction(this.instance);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    condition: '<',\r\n    deleteCondition: '<?',\r\n    insertVertexCondition: '<?',\r\n    pixelTolerance: '<?',\r\n    style: '<?',\r\n    source: '<?',\r\n    features: '<?',\r\n    wrapX: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', ModifyInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionModify = {\r\n  name: 'aolInteractionModify',\r\n  ...component,\r\n};\r\n","import * as angular from 'angular';\r\nimport { Select } from 'ol/interaction';\r\nimport aolMap, { MapComponent } from '../map.component';\r\nimport {\r\n  Options,\r\n  FilterFunction,\r\n  SelectEvent,\r\n  SelectEventType,\r\n} from 'ol/interaction/Select';\r\nimport { Condition } from 'ol/events/condition';\r\nimport { Source } from 'ol/source';\r\nimport { Layer, Vector } from 'ol/layer';\r\nimport { StyleLike } from 'ol/style/Style';\r\nimport { Collection, Feature } from 'ol';\r\nimport { Geometry } from 'ol/geom';\r\nimport { SelectInteractionExtend } from './select.component.extend';\r\n\r\nexport class SelectInteractionComponent extends SelectInteractionExtend\r\n  implements ng.IController, Options {\r\n  private instance: Select;\r\n  protected host: MapComponent;\r\n\r\n  addCondition?: Condition;\r\n  condition?: Condition;\r\n  layers?: Layer<Source>[] | ((p0: Layer<Source>) => boolean);\r\n  style?: StyleLike;\r\n  removeCondition?: Condition;\r\n  toggleCondition?: Condition;\r\n  multi?: boolean;\r\n  features?: Collection<Feature<Geometry>>;\r\n  filter?: FilterFunction;\r\n  hitTolerance?: number;\r\n  selected?: (Feature | string)[];\r\n\r\n  onSelect = angular.noop;\r\n  onChange = angular.noop;\r\n  onPropertyChange = angular.noop;\r\n\r\n  //   constructor(private map: MapComponent) {}\r\n\r\n  $onInit() {\r\n    var that = this;\r\n    if (!this.host) {\r\n      console.error('The select interaction requires map component');\r\n      return;\r\n    }\r\n    super.initCondition();\r\n    this.instance = new Select(this);\r\n    this.instance.on('select', (event: SelectEvent | any) => {\r\n      if (event.selected.length) {\r\n        event.remove = () => {\r\n          that.instance.getFeatures().remove(event.selected[0]);\r\n          that.instance.dispatchEvent({\r\n            type: 'select',\r\n            selected: [],\r\n            deselected: [event.selected[0]],\r\n            mapBrowserEvent: null,\r\n          });\r\n        };\r\n      }\r\n      that.onSelect({ event });\r\n    });\r\n    this.instance.on('change', (event: SelectEvent) =>\r\n      this.onChange({ event }),\r\n    );\r\n    this.instance.on('propertychange', (event: SelectEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.host.instance.addInteraction(this.instance);\r\n  }\r\n\r\n  manualDispath() {\r\n    var that = this;\r\n    var filterCondition = that.selected;\r\n    if (!filterCondition ) return;\r\n    var result: Feature[] = [];\r\n\r\n    if(filterCondition.length> 0){\r\n      let layerStatesArray:any[] = (that.host.instance as any).frameState_.layerStatesArray;\r\n\r\n      layerStatesArray.forEach(({layer})=>{\r\n        if(!(that.layers as any)(layer)) return;\r\n  \r\n        filterCondition.forEach(function(item) {\r\n          let selected: Feature;\r\n          if (typeof item === 'string') {\r\n            selected = layer.getSource().getFeatureById(item);\r\n            result.push(selected);\r\n          } else if (typeof item === 'function') {\r\n            selected = layer\r\n              .getSource()\r\n              .getFeatures()\r\n              .find(item);\r\n          } else {\r\n            selected = layer\r\n              .getSource()\r\n              .getFeatures()\r\n              .find((v:any) => v === item);\r\n          }\r\n  \r\n          if (selected) result.push(selected);\r\n        });\r\n      })\r\n    }\r\n\r\n   \r\n\r\n\r\n    let  deSelecteds = that.instance.getFeatures().getArray().map(rm=>{\r\n       return that.instance.getFeatures().remove(rm);\r\n    })\r\n    that.instance.getFeatures().extend(result);\r\n    setTimeout(() => {\r\n      that.instance.dispatchEvent({\r\n        type: 'select',\r\n        selected: result,\r\n        deselected: deSelecteds,\r\n        mapBrowserEvent: null,\r\n      }); \r\n    });\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'selected':\r\n            this.manualDispath();\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeInteraction(this.instance);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    addCondition: '<',\r\n    condition: '<?',\r\n    layers: '<?',\r\n    style: '<?',\r\n    removeCondition: '<?',\r\n    toggleCondition: '<?',\r\n    multi: '<?',\r\n    features: '<?',\r\n    filter: '<?',\r\n    wrapX: '<?',\r\n    selected: '<?',\r\n    onChange: '&?',\r\n    onSelect: '&?',\r\n    onPropertyChange: '&?',\r\n    instance: '=?',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', SelectInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionSelect = {\r\n  name: 'aolInteractionSelect',\r\n  ...component,\r\n};\r\n","import {\r\n  Condition,\r\n  altKeyOnly,\r\n  altShiftKeysOnly,\r\n  click,\r\n  doubleClick,\r\n  mouseActionButton,\r\n  mouseOnly,\r\n  noModifierKeys,\r\n  penOnly,\r\n  focus,\r\n  platformModifierKeyOnly,\r\n  pointerMove,\r\n  primaryAction,\r\n  shiftKeyOnly,\r\n  singleClick,\r\n  targetNotEditable,\r\n  touchOnly,\r\n} from 'ol/events/condition';\r\n\r\n// var conditionType:\r\n//   | 'altKeyOnly'\r\n//   | 'altShiftKeysOnly'\r\n//   | 'click'\r\n//   | 'doubleClick'\r\n//   | 'focus'\r\n//   | 'mouseActionButton'\r\n//   | 'mouseOnly'\r\n//   | 'noModifierKeys'\r\n//   | 'penOnly'\r\n//   | 'platformModifierKeyOnly'\r\n//   | 'pointerMove'\r\n//   | 'primaryAction'\r\n//   | 'shiftKeyOnly'\r\n//   | 'singleClick'\r\n//   | 'targetNotEditable'\r\n//   | 'touchOnly';\r\n\r\nexport class SelectInteractionExtend {\r\n  condition?: Condition;\r\n  /**condition */\r\n  initCondition() {\r\n    var key: conditionType | Condition = this.condition;\r\n    if (typeof key === 'function') return key;\r\n    switch (key) {\r\n      case 'altKeyOnly':\r\n        this.condition = altKeyOnly;\r\n        break;\r\n      case 'altShiftKeysOnly':\r\n        this.condition = altShiftKeysOnly;\r\n        break;\r\n      case 'click':\r\n        this.condition = click;\r\n        break;\r\n      case 'doubleClick':\r\n        this.condition = doubleClick;\r\n        break;\r\n      case 'focus':\r\n        this.condition = focus;\r\n        break;\r\n      case 'mouseActionButton':\r\n        this.condition = mouseActionButton;\r\n        break;\r\n      case 'mouseOnly':\r\n        this.condition = mouseOnly;\r\n        break;\r\n      case 'noModifierKeys':\r\n        this.condition = noModifierKeys;\r\n        break;\r\n      case 'penOnly':\r\n        this.condition = penOnly;\r\n        break;\r\n      case 'platformModifierKeyOnly':\r\n        this.condition = platformModifierKeyOnly;\r\n        break;\r\n      case 'pointerMove':\r\n        this.condition = pointerMove;\r\n        break;\r\n      case 'primaryAction':\r\n        this.condition = primaryAction;\r\n        break;\r\n      case 'shiftKeyOnly':\r\n        this.condition = shiftKeyOnly;\r\n        break;\r\n      case 'singleClick':\r\n        this.condition = singleClick;\r\n        break;\r\n      case 'targetNotEditable':\r\n        this.condition = targetNotEditable;\r\n        break;\r\n      case 'touchOnly':\r\n        this.condition = touchOnly;\r\n        break;\r\n      default:\r\n        this.condition = click;\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\nenum conditionType {\r\n  altKeyOnly = 'altKeyOnly',\r\n  altShiftKeysOnly = 'altShiftKeysOnly',\r\n  click = 'click',\r\n  doubleClick = 'doubleClick',\r\n  focus = 'focus',\r\n  mouseActionButton = 'mouseActionButton',\r\n  mouseOnly = 'mouseOnly',\r\n  noModifierKeys = 'noModifierKeys',\r\n  penOnly = 'penOnly',\r\n  platformModifierKeyOnly = 'platformModifierKeyOnly',\r\n  pointerMove = 'pointerMove',\r\n  primaryAction = 'primaryAction',\r\n  shiftKeyOnly = 'shiftKeyOnly',\r\n  singleClick = 'singleClick',\r\n  targetNotEditable = 'targetNotEditable',\r\n  touchOnly = 'touchOnly',\r\n}\r\n","module.exports = ol.events.condition;","import * as angular from 'angular';\r\nimport { Options, DragAndDropEvent } from 'ol/interaction/DragAndDrop';\r\nimport { DragAndDrop } from 'ol/interaction';\r\nimport aolMap, { MapComponent } from '../map.component';\r\nimport FeatureFormat from 'ol/format/Feature';\r\nimport { Vector } from 'ol/source';\r\nimport { Geometry } from 'ol/geom';\r\nimport { ProjectionLike } from 'ol/proj';\r\nimport BaseEvent from 'ol/events/Event';\r\nimport { ObjectEvent } from 'ol/Object';\r\nimport { DraganddropInteractionExtend } from './draganddrop.component.extend';\r\n\r\nexport class DraganddropInteractionComponent\r\n  extends DraganddropInteractionExtend\r\n  implements ng.IController, Options {\r\n  private instance: DragAndDrop;\r\n  protected host: MapComponent;\r\n\r\n  formatConstructors?: FeatureFormat[];\r\n  source?: Vector<Geometry>;\r\n  projection?: ProjectionLike;\r\n  target?: HTMLElement;\r\n\r\n  onAddFeatures = angular.noop;\r\n  onChange = angular.noop;\r\n  onPropertyChange = angular.noop;\r\n\r\n  //   constructor(private map: MapComponent) {}\r\n\r\n  $onInit() {\r\n    if (!this.host) {\r\n      console.error('The DragAndDrop interaction requires map component');\r\n      return;\r\n    }\r\n    super.decorate(this);\r\n    this.instance = new DragAndDrop(this);\r\n    this.instance.on('addfeatures', (event: DragAndDropEvent) =>\r\n      this.onAddFeatures({ event }),\r\n    );\r\n    this.instance.on('change', (event: BaseEvent) => this.onChange({ event }));\r\n    this.instance.on('propertychange', (event: ObjectEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.host.instance.addInteraction(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'source':\r\n            this.$onDestroy();\r\n            this.$onInit();\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeInteraction(this.instance);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    formatConstructors: '<',\r\n    source: '<?',\r\n    projection: '<?',\r\n    target: '<?',\r\n    onChange: '&?',\r\n    onAddFeatures: '&?',\r\n    onPropertyChange: '&?',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: [DraganddropInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionDraganddrop = {\r\n  name: 'aolInteractionDraganddrop',\r\n  ...component,\r\n};\r\n","import { DraganddropInteractionComponent } from './draganddrop.component';\r\n// import FeatureFormat from 'ol/format/Feature';\r\nimport {\r\n  GPX,\r\n  GeoJSON,\r\n  IGC,\r\n  KML,\r\n  TopoJSON,\r\n  EsriJSON,\r\n  GML,\r\n  IIIFInfo,\r\n  MVT,\r\n  OWS,\r\n  Polyline,\r\n  WFS,\r\n  WKT,\r\n  WMSCapabilities,\r\n  WMSGetFeatureInfo,\r\n  WMTSCapabilities,\r\n} from 'ol/format';\r\n\r\nexport abstract class DraganddropInteractionExtend {\r\n  defaultFormat: { [index: string]: any } = {\r\n    GPX,\r\n    GeoJSON,\r\n    IGC,\r\n    KML,\r\n    TopoJSON,\r\n    EsriJSON,\r\n    GML,\r\n    IIIFInfo,\r\n    MVT,\r\n    OWS,\r\n    Polyline,\r\n    WFS,\r\n    WKT,\r\n    WMSCapabilities,\r\n    WMSGetFeatureInfo,\r\n    WMTSCapabilities,\r\n  };\r\n\r\n  decorate(child: DraganddropInteractionComponent) {\r\n    if (child.formatConstructors) {\r\n      child.formatConstructors = this.getFormat(child.formatConstructors);\r\n    }\r\n  }\r\n\r\n  getFormat(featureConlist: any[]) {\r\n    return featureConlist.map(item => {\r\n      //@FIXME: ol && item instanceof FeatureFormat\r\n      if (typeof item === 'function') {\r\n        return item;\r\n      }\r\n      let formatCon = this.defaultFormat[item];\r\n      if (formatCon) {\r\n        return formatCon;\r\n      } else {\r\n        throw new Error('DragandDropFeatureFormat');\r\n      }\r\n    });\r\n  }\r\n}\r\n","module.exports = ol.format;","import * as angular from 'angular';\r\nimport { Options, GeometryFunction, DrawEvent } from 'ol/interaction/Draw';\r\nimport { Draw } from 'ol/interaction';\r\nimport GeometryType from 'ol/geom/GeometryType';\r\nimport { Collection, Feature } from 'ol';\r\nimport { Geometry } from 'ol/geom';\r\nimport VectorSource from 'ol/source/Vector';\r\nimport { Condition } from 'ol/events/condition';\r\nimport { StyleLike } from 'ol/style/Style';\r\nimport aolMap, { MapComponent } from '../map.component';\r\nimport { DrawInteractionExtend } from './draw.component.extend';\r\n\r\nexport class DrawInteractionComponent extends DrawInteractionExtend\r\n  implements ng.IController, Options {\r\n  private instance: Draw;\r\n  protected host: MapComponent;\r\n\r\n  type: GeometryType;\r\n  clickTolerance?: number;\r\n  features?: Collection<Feature<Geometry>>;\r\n  source?: VectorSource<Geometry>;\r\n  dragVertexDelay?: number;\r\n  snapTolerance?: number;\r\n  stopClick?: boolean;\r\n  maxPoints?: number;\r\n  minPoints?: number;\r\n  finishCondition?: Condition;\r\n  style?: StyleLike;\r\n  geometryFunction?: GeometryFunction;\r\n  geometryName?: string;\r\n  condition?: Condition;\r\n  freehand?: boolean;\r\n  freehandCondition?: Condition;\r\n  wrapX?: boolean;\r\n\r\n  public onChange = angular.noop;\r\n  public onChangeActive = angular.noop;\r\n  public onDrawEnd = angular.noop;\r\n  public onDrawStart = angular.noop;\r\n  public onPropertyChange = angular.noop;\r\n\r\n  //   constructor(private map: MapComponent) {}\r\n\r\n  $onInit() {\r\n    super.init(this.type);\r\n    this.instance = new Draw(this);\r\n    this.instance.on('change', (event: DrawEvent) => this.onChange({ event }));\r\n    this.instance.on('change:active', (event: DrawEvent) =>\r\n      this.onChangeActive({ event }),\r\n    );\r\n    this.instance.on('drawend', (event: DrawEvent) =>\r\n      this.onDrawEnd({ event }),\r\n    );\r\n    this.instance.on('drawstart', (event: DrawEvent) =>\r\n      this.onDrawStart({ event }),\r\n    );\r\n    this.instance.on('propertychange', (event: DrawEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.host.instance.addInteraction(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'source':\r\n            this.$onDestroy();\r\n            this.$onInit();\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeInteraction(this.instance);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    type: '<',\r\n    clickTolerance: '<?',\r\n    features: '<?',\r\n    source: '<?',\r\n    dragVertexDelay: '<?',\r\n    snapTolerance: '<?',\r\n    stopClick: '<?',\r\n    maxPoints: '<?',\r\n    minPoints: '<?',\r\n    finishCondition: '<?',\r\n    style: '<?',\r\n    geometryFunction: '<?',\r\n    geometryName: '<?',\r\n    condition: '<?',\r\n    freehand: '<?',\r\n    freehandCondition: '<?',\r\n    wrapX: '<?',\r\n    onChange: '&?',\r\n    onChangeActive: '&?',\r\n    onDrawEnd: '&?',\r\n    onDrawStart: '&?',\r\n    onPropertyChange: '&?',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', DrawInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionDraw = {\r\n  name: 'aolInteractionDraw',\r\n  ...component,\r\n};\r\n","import GeometryType from 'ol/geom/GeometryType';\r\nimport { Options, GeometryFunction } from 'ol/interaction/Draw';\r\nimport { Polygon } from 'ol/geom';\r\n\r\nexport abstract class DrawInteractionExtend implements Options {\r\n  type: any;\r\n  // clickTolerance?: number;\r\n  // features?: Collection<Feature<Geometry>>;\r\n  // source?: VectorSource<Geometry>;\r\n  // dragVertexDelay?: number;\r\n  // snapTolerance?: number;\r\n  // stopClick?: boolean;\r\n  maxPoints?: number;\r\n  minPoints?: number;\r\n  // finishCondition?: Condition;\r\n  // style?: StyleLike;\r\n  geometryFunction?: GeometryFunction;\r\n  // geometryName?: string;\r\n  // condition?: Condition;\r\n  // freehand?: boolean;\r\n  // freehandCondition?: Condition;\r\n  // wrapX?: boolean;\r\n\r\n  init(type: GeometryType | 'Rectangle') {\r\n    switch (type) {\r\n      case 'Rectangle':\r\n        this.__createRectangleParams();\r\n        break;\r\n      default:\r\n        this.type = type;\r\n        break;\r\n    }\r\n  }\r\n\r\n  __createRectangleParams() {\r\n    this.maxPoints = 2;\r\n    this.type = 'LineString';\r\n    this.geometryFunction = (coordinates: any, geometry) => {\r\n      //geometry\r\n      if (!geometry) {\r\n        //\r\n        geometry = new Polygon([]);\r\n      }\r\n      // \r\n      var start = coordinates[0];\r\n      // \r\n      var end = coordinates[1];\r\n      // ,\r\n      geometry.setCoordinates([\r\n        [start, [start[0], end[1]], end, [end[0], start[1]], start],\r\n      ]);\r\n      // \r\n      return geometry;\r\n    };\r\n  }\r\n}\r\n","/**\n * @module ol/obj\n */\n/**\n * Polyfill for Object.assign().  Assigns enumerable and own properties from\n * one or more source objects to a target object.\n * See https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign.\n *\n * @param {!Object} target The target object.\n * @param {...Object} var_sources The source object(s).\n * @return {!Object} The modified target object.\n */\nexport var assign = (typeof Object.assign === 'function') ? Object.assign : function (target, var_sources) {\n    if (target === undefined || target === null) {\n        throw new TypeError('Cannot convert undefined or null to object');\n    }\n    var output = Object(target);\n    for (var i = 1, ii = arguments.length; i < ii; ++i) {\n        var source = arguments[i];\n        if (source !== undefined && source !== null) {\n            for (var key in source) {\n                if (source.hasOwnProperty(key)) {\n                    output[key] = source[key];\n                }\n            }\n        }\n    }\n    return output;\n};\n/**\n * Removes all properties from an object.\n * @param {Object} object The object to clear.\n */\nexport function clear(object) {\n    for (var property in object) {\n        delete object[property];\n    }\n}\n/**\n * Polyfill for Object.values().  Get an array of property values from an object.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/values\n *\n * @param {!Object<K,V>} object The object from which to get the values.\n * @return {!Array<V>} The property values.\n * @template K,V\n */\nexport var getValues = (typeof Object.values === 'function') ? Object.values : function (object) {\n    var values = [];\n    for (var property in object) {\n        values.push(object[property]);\n    }\n    return values;\n};\n/**\n * Determine if an object has any properties.\n * @param {Object} object The object to check.\n * @return {boolean} The object is empty.\n */\nexport function isEmpty(object) {\n    var property;\n    for (property in object) {\n        return false;\n    }\n    return !property;\n}\n//# sourceMappingURL=obj.js.map","/**\n * @module ol/webgl\n */\n/**\n * Constants taken from goog.webgl\n */\n/**\n * Used by {@link module:ol/webgl/Helper~WebGLHelper} for buffers containing vertices data, such as\n * position, color, texture coordinate, etc. These vertices are then referenced by an index buffer\n * to be drawn on screen (see {@link module:ol/webgl.ELEMENT_ARRAY_BUFFER}).\n * @const\n * @type {number}\n * @api\n */\nexport var ARRAY_BUFFER = 0x8892;\n/**\n * Used by {@link module:ol/webgl/Helper~WebGLHelper} for buffers containing indices data.\n * Index buffers are essentially lists of references to vertices defined in a vertex buffer\n * (see {@link module:ol/webgl.ARRAY_BUFFER}), and define the primitives (triangles) to be drawn.\n * @const\n * @type {number}\n * @api\n */\nexport var ELEMENT_ARRAY_BUFFER = 0x8893;\n/**\n * Used by {link module:ol/webgl/Buffer~WebGLArrayBuffer}.\n * @const\n * @type {number}\n * @api\n */\nexport var STREAM_DRAW = 0x88E0;\n/**\n * Used by {link module:ol/webgl/Buffer~WebGLArrayBuffer}.\n * @const\n * @type {number}\n * @api\n */\nexport var STATIC_DRAW = 0x88E4;\n/**\n * Used by {link module:ol/webgl/Buffer~WebGLArrayBuffer}.\n * @const\n * @type {number}\n * @api\n */\nexport var DYNAMIC_DRAW = 0x88E8;\n/**\n * @const\n * @type {number}\n */\nexport var UNSIGNED_BYTE = 0x1401;\n/**\n * @const\n * @type {number}\n */\nexport var UNSIGNED_SHORT = 0x1403;\n/**\n * @const\n * @type {number}\n */\nexport var UNSIGNED_INT = 0x1405;\n/**\n * @const\n * @type {number}\n */\nexport var FLOAT = 0x1406;\n/** end of goog.webgl constants\n */\n/**\n * @const\n * @type {Array<string>}\n */\nvar CONTEXT_IDS = [\n    'experimental-webgl',\n    'webgl',\n    'webkit-3d',\n    'moz-webgl'\n];\n/**\n * @param {HTMLCanvasElement} canvas Canvas.\n * @param {Object=} opt_attributes Attributes.\n * @return {WebGLRenderingContext} WebGL rendering context.\n */\nexport function getContext(canvas, opt_attributes) {\n    var ii = CONTEXT_IDS.length;\n    for (var i = 0; i < ii; ++i) {\n        try {\n            var context = canvas.getContext(CONTEXT_IDS[i], opt_attributes);\n            if (context) {\n                return /** @type {!WebGLRenderingContext} */ (context);\n            }\n        }\n        catch (e) {\n            // pass\n        }\n    }\n    return null;\n}\n/**\n * @type {Array<string>}\n */\nvar supportedExtensions;\n/**\n * @return {Array<string>} List of supported WebGL extensions.\n */\nexport function getSupportedExtensions() {\n    if (!supportedExtensions) {\n        var canvas = document.createElement('canvas');\n        var gl = getContext(canvas);\n        if (gl) {\n            supportedExtensions = gl.getSupportedExtensions();\n        }\n    }\n    return supportedExtensions;\n}\n//# sourceMappingURL=webgl.js.map","/**\n * @module ol/webgl/Buffer\n */\nimport { STATIC_DRAW, STREAM_DRAW, DYNAMIC_DRAW } from '../webgl.js';\nimport { ARRAY_BUFFER, ELEMENT_ARRAY_BUFFER } from '../webgl.js';\nimport { assert } from '../asserts.js';\n/**\n * Used to describe the intended usage for the data: `STATIC_DRAW`, `STREAM_DRAW`\n * or `DYNAMIC_DRAW`.\n * @enum {number}\n */\nexport var BufferUsage = {\n    STATIC_DRAW: STATIC_DRAW,\n    STREAM_DRAW: STREAM_DRAW,\n    DYNAMIC_DRAW: DYNAMIC_DRAW\n};\n/**\n * @classdesc\n * Object used to store an array of data as well as usage information for that data.\n * Stores typed arrays internally, either Float32Array or Uint16/32Array depending on\n * the buffer type (ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER) and available extensions.\n *\n * To populate the array, you can either use:\n * * A size using `#ofSize(buffer)`\n * * An `ArrayBuffer` object using `#fromArrayBuffer(buffer)`\n * * A plain array using `#fromArray(array)`\n *\n * Note:\n * See the documentation of [WebGLRenderingContext.bufferData](https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/bufferData)\n * for more info on buffer usage.\n * @api\n */\nvar WebGLArrayBuffer = /** @class */ (function () {\n    /**\n     * @param {number} type Buffer type, either ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER.\n     * @param {number=} opt_usage Intended usage, either `STATIC_DRAW`, `STREAM_DRAW` or `DYNAMIC_DRAW`.\n     * Default is `DYNAMIC_DRAW`.\n     */\n    function WebGLArrayBuffer(type, opt_usage) {\n        /**\n         * @private\n         * @type {Float32Array|Uint32Array}\n         */\n        this.array = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.type = type;\n        assert(type === ARRAY_BUFFER || type === ELEMENT_ARRAY_BUFFER, 62);\n        /**\n         * @private\n         * @type {number}\n         */\n        this.usage = opt_usage !== undefined ? opt_usage : BufferUsage.STATIC_DRAW;\n    }\n    /**\n     * Populates the buffer with an array of the given size (all values will be zeroes).\n     * @param {number} size Array size\n     */\n    WebGLArrayBuffer.prototype.ofSize = function (size) {\n        this.array = new (getArrayClassForType(this.type))(size);\n    };\n    /**\n     * Populates the buffer with an array of the given size (all values will be zeroes).\n     * @param {Array<number>} array Numerical array\n     */\n    WebGLArrayBuffer.prototype.fromArray = function (array) {\n        this.array = (getArrayClassForType(this.type)).from(array);\n    };\n    /**\n     * Populates the buffer with a raw binary array buffer.\n     * @param {ArrayBuffer} buffer Raw binary buffer to populate the array with. Note that this buffer must have been\n     * initialized for the same typed array class.\n     */\n    WebGLArrayBuffer.prototype.fromArrayBuffer = function (buffer) {\n        this.array = new (getArrayClassForType(this.type))(buffer);\n    };\n    /**\n     * @return {number} Buffer type.\n     */\n    WebGLArrayBuffer.prototype.getType = function () {\n        return this.type;\n    };\n    /**\n     * Will return null if the buffer was not initialized\n     * @return {Float32Array|Uint32Array} Array.\n     */\n    WebGLArrayBuffer.prototype.getArray = function () {\n        return this.array;\n    };\n    /**\n     * @return {number} Usage.\n     */\n    WebGLArrayBuffer.prototype.getUsage = function () {\n        return this.usage;\n    };\n    /**\n     * Will return 0 if the buffer is not initialized\n     * @return {number} Array size\n     */\n    WebGLArrayBuffer.prototype.getSize = function () {\n        return this.array ? this.array.length : 0;\n    };\n    return WebGLArrayBuffer;\n}());\n/**\n * Returns a typed array constructor based on the given buffer type\n * @param {number} type Buffer type, either ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER.\n * @returns {Float32ArrayConstructor|Uint32ArrayConstructor} The typed array class to use for this buffer.\n */\nexport function getArrayClassForType(type) {\n    switch (type) {\n        case ARRAY_BUFFER:\n            return Float32Array;\n        case ELEMENT_ARRAY_BUFFER:\n            return Uint32Array;\n        default:\n            return Float32Array;\n    }\n}\nexport default WebGLArrayBuffer;\n//# sourceMappingURL=Buffer.js.map","/**\n * @module ol/Disposable\n */\n/**\n * @classdesc\n * Objects that need to clean up after themselves.\n */\nvar Disposable = /** @class */ (function () {\n    function Disposable() {\n        /**\n         * The object has already been disposed.\n         * @type {boolean}\n         * @private\n         */\n        this.disposed_ = false;\n    }\n    /**\n     * Clean up.\n     */\n    Disposable.prototype.dispose = function () {\n        if (!this.disposed_) {\n            this.disposed_ = true;\n            this.disposeInternal();\n        }\n    };\n    /**\n     * Extension point for disposable objects.\n     * @protected\n     */\n    Disposable.prototype.disposeInternal = function () { };\n    return Disposable;\n}());\nexport default Disposable;\n//# sourceMappingURL=Disposable.js.map","/**\n * @module ol/webgl/ContextEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    LOST: 'webglcontextlost',\n    RESTORED: 'webglcontextrestored'\n};\n//# sourceMappingURL=ContextEventType.js.map","/**\n * @module ol/transform\n */\nimport { assert } from './asserts.js';\n/**\n * An array representing an affine 2d transformation for use with\n * {@link module:ol/transform} functions. The array has 6 elements.\n * @typedef {!Array<number>} Transform\n * @api\n */\n/**\n * Collection of affine 2d transformation functions. The functions work on an\n * array of 6 elements. The element order is compatible with the [SVGMatrix\n * interface](https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix) and is\n * a subset (elements a to f) of a 33 matrix:\n * ```\n * [ a c e ]\n * [ b d f ]\n * [ 0 0 1 ]\n * ```\n */\n/**\n * @private\n * @type {Transform}\n */\nvar tmp_ = new Array(6);\n/**\n * Create an identity transform.\n * @return {!Transform} Identity transform.\n */\nexport function create() {\n    return [1, 0, 0, 1, 0, 0];\n}\n/**\n * Resets the given transform to an identity transform.\n * @param {!Transform} transform Transform.\n * @return {!Transform} Transform.\n */\nexport function reset(transform) {\n    return set(transform, 1, 0, 0, 1, 0, 0);\n}\n/**\n * Multiply the underlying matrices of two transforms and return the result in\n * the first transform.\n * @param {!Transform} transform1 Transform parameters of matrix 1.\n * @param {!Transform} transform2 Transform parameters of matrix 2.\n * @return {!Transform} transform1 multiplied with transform2.\n */\nexport function multiply(transform1, transform2) {\n    var a1 = transform1[0];\n    var b1 = transform1[1];\n    var c1 = transform1[2];\n    var d1 = transform1[3];\n    var e1 = transform1[4];\n    var f1 = transform1[5];\n    var a2 = transform2[0];\n    var b2 = transform2[1];\n    var c2 = transform2[2];\n    var d2 = transform2[3];\n    var e2 = transform2[4];\n    var f2 = transform2[5];\n    transform1[0] = a1 * a2 + c1 * b2;\n    transform1[1] = b1 * a2 + d1 * b2;\n    transform1[2] = a1 * c2 + c1 * d2;\n    transform1[3] = b1 * c2 + d1 * d2;\n    transform1[4] = a1 * e2 + c1 * f2 + e1;\n    transform1[5] = b1 * e2 + d1 * f2 + f1;\n    return transform1;\n}\n/**\n * Set the transform components a-f on a given transform.\n * @param {!Transform} transform Transform.\n * @param {number} a The a component of the transform.\n * @param {number} b The b component of the transform.\n * @param {number} c The c component of the transform.\n * @param {number} d The d component of the transform.\n * @param {number} e The e component of the transform.\n * @param {number} f The f component of the transform.\n * @return {!Transform} Matrix with transform applied.\n */\nexport function set(transform, a, b, c, d, e, f) {\n    transform[0] = a;\n    transform[1] = b;\n    transform[2] = c;\n    transform[3] = d;\n    transform[4] = e;\n    transform[5] = f;\n    return transform;\n}\n/**\n * Set transform on one matrix from another matrix.\n * @param {!Transform} transform1 Matrix to set transform to.\n * @param {!Transform} transform2 Matrix to set transform from.\n * @return {!Transform} transform1 with transform from transform2 applied.\n */\nexport function setFromArray(transform1, transform2) {\n    transform1[0] = transform2[0];\n    transform1[1] = transform2[1];\n    transform1[2] = transform2[2];\n    transform1[3] = transform2[3];\n    transform1[4] = transform2[4];\n    transform1[5] = transform2[5];\n    return transform1;\n}\n/**\n * Transforms the given coordinate with the given transform returning the\n * resulting, transformed coordinate. The coordinate will be modified in-place.\n *\n * @param {Transform} transform The transformation.\n * @param {import(\"./coordinate.js\").Coordinate|import(\"./pixel.js\").Pixel} coordinate The coordinate to transform.\n * @return {import(\"./coordinate.js\").Coordinate|import(\"./pixel.js\").Pixel} return coordinate so that operations can be\n *     chained together.\n */\nexport function apply(transform, coordinate) {\n    var x = coordinate[0];\n    var y = coordinate[1];\n    coordinate[0] = transform[0] * x + transform[2] * y + transform[4];\n    coordinate[1] = transform[1] * x + transform[3] * y + transform[5];\n    return coordinate;\n}\n/**\n * Applies rotation to the given transform.\n * @param {!Transform} transform Transform.\n * @param {number} angle Angle in radians.\n * @return {!Transform} The rotated transform.\n */\nexport function rotate(transform, angle) {\n    var cos = Math.cos(angle);\n    var sin = Math.sin(angle);\n    return multiply(transform, set(tmp_, cos, sin, -sin, cos, 0, 0));\n}\n/**\n * Applies scale to a given transform.\n * @param {!Transform} transform Transform.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!Transform} The scaled transform.\n */\nexport function scale(transform, x, y) {\n    return multiply(transform, set(tmp_, x, 0, 0, y, 0, 0));\n}\n/**\n * Creates a scale transform.\n * @param {!Transform} target Transform to overwrite.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!Transform} The scale transform.\n */\nexport function makeScale(target, x, y) {\n    return set(target, x, 0, 0, y, 0, 0);\n}\n/**\n * Applies translation to the given transform.\n * @param {!Transform} transform Transform.\n * @param {number} dx Translation x.\n * @param {number} dy Translation y.\n * @return {!Transform} The translated transform.\n */\nexport function translate(transform, dx, dy) {\n    return multiply(transform, set(tmp_, 1, 0, 0, 1, dx, dy));\n}\n/**\n * Creates a composite transform given an initial translation, scale, rotation, and\n * final translation (in that order only, not commutative).\n * @param {!Transform} transform The transform (will be modified in place).\n * @param {number} dx1 Initial translation x.\n * @param {number} dy1 Initial translation y.\n * @param {number} sx Scale factor x.\n * @param {number} sy Scale factor y.\n * @param {number} angle Rotation (in counter-clockwise radians).\n * @param {number} dx2 Final translation x.\n * @param {number} dy2 Final translation y.\n * @return {!Transform} The composite transform.\n */\nexport function compose(transform, dx1, dy1, sx, sy, angle, dx2, dy2) {\n    var sin = Math.sin(angle);\n    var cos = Math.cos(angle);\n    transform[0] = sx * cos;\n    transform[1] = sy * sin;\n    transform[2] = -sx * sin;\n    transform[3] = sy * cos;\n    transform[4] = dx2 * sx * cos - dy2 * sx * sin + dx1;\n    transform[5] = dx2 * sy * sin + dy2 * sy * cos + dy1;\n    return transform;\n}\n/**\n * Creates a composite transform given an initial translation, scale, rotation, and\n * final translation (in that order only, not commutative). The resulting transform\n * string can be applied as `transform` porperty of an HTMLElement's style.\n * @param {number} dx1 Initial translation x.\n * @param {number} dy1 Initial translation y.\n * @param {number} sx Scale factor x.\n * @param {number} sy Scale factor y.\n * @param {number} angle Rotation (in counter-clockwise radians).\n * @param {number} dx2 Final translation x.\n * @param {number} dy2 Final translation y.\n * @return {string} The composite css transform.\n * @api\n */\nexport function composeCssTransform(dx1, dy1, sx, sy, angle, dx2, dy2) {\n    return toString(compose(create(), dx1, dy1, sx, sy, angle, dx2, dy2));\n}\n/**\n * Invert the given transform.\n * @param {!Transform} source The source transform to invert.\n * @return {!Transform} The inverted (source) transform.\n */\nexport function invert(source) {\n    return makeInverse(source, source);\n}\n/**\n * Invert the given transform.\n * @param {!Transform} target Transform to be set as the inverse of\n *     the source transform.\n * @param {!Transform} source The source transform to invert.\n * @return {!Transform} The inverted (target) transform.\n */\nexport function makeInverse(target, source) {\n    var det = determinant(source);\n    assert(det !== 0, 32); // Transformation matrix cannot be inverted\n    var a = source[0];\n    var b = source[1];\n    var c = source[2];\n    var d = source[3];\n    var e = source[4];\n    var f = source[5];\n    target[0] = d / det;\n    target[1] = -b / det;\n    target[2] = -c / det;\n    target[3] = a / det;\n    target[4] = (c * f - d * e) / det;\n    target[5] = -(a * f - b * e) / det;\n    return target;\n}\n/**\n * Returns the determinant of the given matrix.\n * @param {!Transform} mat Matrix.\n * @return {number} Determinant.\n */\nexport function determinant(mat) {\n    return mat[0] * mat[3] - mat[1] * mat[2];\n}\n/**\n * A string version of the transform.  This can be used\n * for CSS transforms.\n * @param {!Transform} mat Matrix.\n * @return {string} The transform as a string.\n */\nexport function toString(mat) {\n    return 'matrix(' + mat.join(', ') + ')';\n}\n//# sourceMappingURL=transform.js.map","/**\n * @module ol/vec/mat4\n */\n/**\n * @return {Array<number>} \"4x4 matrix representing a 3D identity transform.\"\n */\nexport function create() {\n    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\n/**\n * @param {Array<number>} mat4 Flattened 4x4 matrix receiving the result.\n * @param {import(\"../transform.js\").Transform} transform Transformation matrix.\n * @return {Array<number>} \"2D transformation matrix as flattened 4x4 matrix.\"\n */\nexport function fromTransform(mat4, transform) {\n    mat4[0] = transform[0];\n    mat4[1] = transform[1];\n    mat4[4] = transform[2];\n    mat4[5] = transform[3];\n    mat4[12] = transform[4];\n    mat4[13] = transform[5];\n    return mat4;\n}\n//# sourceMappingURL=mat4.js.map","/**\n * @module ol/webgl/PostProcessingPass\n */\nvar DEFAULT_VERTEX_SHADER = \"\\n  precision mediump float;\\n  \\n  attribute vec2 a_position;\\n  varying vec2 v_texCoord;\\n  varying vec2 v_screenCoord;\\n  \\n  uniform vec2 u_screenSize;\\n   \\n  void main() {\\n    v_texCoord = a_position * 0.5 + 0.5;\\n    v_screenCoord = v_texCoord * u_screenSize;\\n    gl_Position = vec4(a_position, 0.0, 1.0);\\n  }\\n\";\nvar DEFAULT_FRAGMENT_SHADER = \"\\n  precision mediump float;\\n   \\n  uniform sampler2D u_image;\\n   \\n  varying vec2 v_texCoord;\\n   \\n  void main() {\\n    gl_FragColor = texture2D(u_image, v_texCoord);\\n  }\\n\";\n/**\n * @typedef {Object} Options\n * @property {WebGLRenderingContext} webGlContext WebGL context; mandatory.\n * @property {number} [scaleRatio] Scale ratio; if < 1, the post process will render to a texture smaller than\n * the main canvas that will then be sampled up (useful for saving resource on blur steps).\n * @property {string} [vertexShader] Vertex shader source\n * @property {string} [fragmentShader] Fragment shader source\n * @property {Object.<string,import(\"./Helper\").UniformValue>} [uniforms] Uniform definitions for the post process step\n */\n/**\n * @typedef {Object} UniformInternalDescription\n * @property {import(\"./Helper\").UniformValue} value Value\n * @property {number} location Location\n * @property {WebGLTexture} [texture] Texture\n * @private\n */\n/**\n * @classdesc\n * This class is used to define Post Processing passes with custom shaders and uniforms.\n * This is used internally by {@link module:ol/webgl/Helper~WebGLHelper}.\n *\n * Please note that the final output on the DOM canvas is expected to have premultiplied alpha, which means that\n * a pixel which is 100% red with an opacity of 50% must have a color of (r=0.5, g=0, b=0, a=0.5).\n * Failing to provide pixel colors with premultiplied alpha will result in render anomalies.\n *\n * The default post-processing pass does *not* multiply color values with alpha value, it expects color values to be\n * premultiplied.\n *\n * Default shaders are shown hereafter:\n *\n * * Vertex shader:\n *\n *   ```\n *   precision mediump float;\n *\n *   attribute vec2 a_position;\n *   varying vec2 v_texCoord;\n *   varying vec2 v_screenCoord;\n *\n *   uniform vec2 u_screenSize;\n *\n *   void main() {\n *     v_texCoord = a_position * 0.5 + 0.5;\n *     v_screenCoord = v_texCoord * u_screenSize;\n *     gl_Position = vec4(a_position, 0.0, 1.0);\n *   }\n *   ```\n *\n * * Fragment shader:\n *\n *   ```\n *   precision mediump float;\n *\n *   uniform sampler2D u_image;\n *\n *   varying vec2 v_texCoord;\n *\n *   void main() {\n *     gl_FragColor = texture2D(u_image, v_texCoord);\n *   }\n *   ```\n *\n * @api\n */\nvar WebGLPostProcessingPass = /** @class */ (function () {\n    /**\n     * @param {Options} options Options.\n     */\n    function WebGLPostProcessingPass(options) {\n        this.gl_ = options.webGlContext;\n        var gl = this.gl_;\n        this.scaleRatio_ = options.scaleRatio || 1;\n        this.renderTargetTexture_ = gl.createTexture();\n        this.renderTargetTextureSize_ = null;\n        this.frameBuffer_ = gl.createFramebuffer();\n        // compile the program for the frame buffer\n        // TODO: make compilation errors show up\n        var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n        gl.shaderSource(vertexShader, options.vertexShader || DEFAULT_VERTEX_SHADER);\n        gl.compileShader(vertexShader);\n        var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n        gl.shaderSource(fragmentShader, options.fragmentShader || DEFAULT_FRAGMENT_SHADER);\n        gl.compileShader(fragmentShader);\n        this.renderTargetProgram_ = gl.createProgram();\n        gl.attachShader(this.renderTargetProgram_, vertexShader);\n        gl.attachShader(this.renderTargetProgram_, fragmentShader);\n        gl.linkProgram(this.renderTargetProgram_);\n        // bind the vertices buffer for the frame buffer\n        this.renderTargetVerticesBuffer_ = gl.createBuffer();\n        var verticesArray = [\n            -1, -1,\n            1, -1,\n            -1, 1,\n            1, -1,\n            1, 1,\n            -1, 1\n        ];\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.renderTargetVerticesBuffer_);\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verticesArray), gl.STATIC_DRAW);\n        this.renderTargetAttribLocation_ = gl.getAttribLocation(this.renderTargetProgram_, 'a_position');\n        this.renderTargetUniformLocation_ = gl.getUniformLocation(this.renderTargetProgram_, 'u_screenSize');\n        this.renderTargetTextureLocation_ = gl.getUniformLocation(this.renderTargetProgram_, 'u_image');\n        /**\n         * Holds info about custom uniforms used in the post processing pass\n         * @type {Array<UniformInternalDescription>}\n         * @private\n         */\n        this.uniforms_ = [];\n        options.uniforms && Object.keys(options.uniforms).forEach(function (name) {\n            this.uniforms_.push({\n                value: options.uniforms[name],\n                location: gl.getUniformLocation(this.renderTargetProgram_, name)\n            });\n        }.bind(this));\n    }\n    /**\n     * Get the WebGL rendering context\n     * @return {WebGLRenderingContext} The rendering context.\n     * @api\n     */\n    WebGLPostProcessingPass.prototype.getGL = function () {\n        return this.gl_;\n    };\n    /**\n     * Initialize the render target texture of the post process, make sure it is at the\n     * right size and bind it as a render target for the next draw calls.\n     * The last step to be initialized will be the one where the primitives are rendered.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n     * @api\n     */\n    WebGLPostProcessingPass.prototype.init = function (frameState) {\n        var gl = this.getGL();\n        var textureSize = [\n            gl.drawingBufferWidth * this.scaleRatio_,\n            gl.drawingBufferHeight * this.scaleRatio_\n        ];\n        // rendering goes to my buffer\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.getFrameBuffer());\n        gl.viewport(0, 0, textureSize[0], textureSize[1]);\n        // if size has changed: adjust canvas & render target texture\n        if (!this.renderTargetTextureSize_ ||\n            this.renderTargetTextureSize_[0] !== textureSize[0] || this.renderTargetTextureSize_[1] !== textureSize[1]) {\n            this.renderTargetTextureSize_ = textureSize;\n            // create a new texture\n            var level = 0;\n            var internalFormat = gl.RGBA;\n            var border = 0;\n            var format = gl.RGBA;\n            var type = gl.UNSIGNED_BYTE;\n            var data = null;\n            gl.bindTexture(gl.TEXTURE_2D, this.renderTargetTexture_);\n            gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, textureSize[0], textureSize[1], border, format, type, data);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n            // bind the texture to the framebuffer\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.renderTargetTexture_, 0);\n        }\n    };\n    /**\n     * Render to the next postprocessing pass (or to the canvas if final pass).\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n     * @param {WebGLPostProcessingPass} [nextPass] Next pass, optional\n     * @api\n     */\n    WebGLPostProcessingPass.prototype.apply = function (frameState, nextPass) {\n        var gl = this.getGL();\n        var size = frameState.size;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, nextPass ? nextPass.getFrameBuffer() : null);\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.renderTargetTexture_);\n        // render the frame buffer to the canvas\n        gl.clearColor(0.0, 0.0, 0.0, 0.0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n        gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.renderTargetVerticesBuffer_);\n        gl.useProgram(this.renderTargetProgram_);\n        gl.enableVertexAttribArray(this.renderTargetAttribLocation_);\n        gl.vertexAttribPointer(this.renderTargetAttribLocation_, 2, gl.FLOAT, false, 0, 0);\n        gl.uniform2f(this.renderTargetUniformLocation_, size[0], size[1]);\n        gl.uniform1i(this.renderTargetTextureLocation_, 0);\n        this.applyUniforms(frameState);\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\n    };\n    /**\n     * @returns {WebGLFramebuffer} Frame buffer\n     * @api\n     */\n    WebGLPostProcessingPass.prototype.getFrameBuffer = function () {\n        return this.frameBuffer_;\n    };\n    /**\n     * Sets the custom uniforms based on what was given in the constructor.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @private\n     */\n    WebGLPostProcessingPass.prototype.applyUniforms = function (frameState) {\n        var gl = this.getGL();\n        var value;\n        var textureSlot = 1;\n        this.uniforms_.forEach(function (uniform) {\n            value = typeof uniform.value === 'function' ? uniform.value(frameState) : uniform.value;\n            // apply value based on type\n            if (value instanceof HTMLCanvasElement || value instanceof ImageData) {\n                // create a texture & put data\n                if (!uniform.texture) {\n                    uniform.texture = gl.createTexture();\n                }\n                gl.activeTexture(gl[\"TEXTURE\" + textureSlot]);\n                gl.bindTexture(gl.TEXTURE_2D, uniform.texture);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n                if (value instanceof ImageData) {\n                    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, value.width, value.height, 0, gl.UNSIGNED_BYTE, new Uint8Array(value.data));\n                }\n                else {\n                    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, value);\n                }\n                // fill texture slots\n                gl.uniform1i(uniform.location, textureSlot++);\n            }\n            else if (Array.isArray(value)) {\n                switch (value.length) {\n                    case 2:\n                        gl.uniform2f(uniform.location, value[0], value[1]);\n                        return;\n                    case 3:\n                        gl.uniform3f(uniform.location, value[0], value[1], value[2]);\n                        return;\n                    case 4:\n                        gl.uniform4f(uniform.location, value[0], value[1], value[2], value[3]);\n                        return;\n                    default: return;\n                }\n            }\n            else if (typeof value === 'number') {\n                gl.uniform1f(uniform.location, value);\n            }\n        });\n    };\n    return WebGLPostProcessingPass;\n}());\nexport default WebGLPostProcessingPass;\n//# sourceMappingURL=PostProcessingPass.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/webgl/Helper\n */\nimport { getUid } from '../util.js';\nimport Disposable from '../Disposable.js';\nimport { clear } from '../obj.js';\nimport ContextEventType from '../webgl/ContextEventType.js';\nimport { compose as composeTransform, create as createTransform, reset as resetTransform, rotate as rotateTransform, scale as scaleTransform } from '../transform.js';\nimport { create, fromTransform } from '../vec/mat4.js';\nimport WebGLPostProcessingPass from './PostProcessingPass.js';\nimport { FLOAT, getContext, getSupportedExtensions, UNSIGNED_BYTE, UNSIGNED_INT, UNSIGNED_SHORT } from '../webgl.js';\nimport { includes } from '../array.js';\nimport { assert } from '../asserts.js';\n/**\n * @typedef {Object} BufferCacheEntry\n * @property {import(\"./Buffer.js\").default} buffer\n * @property {WebGLBuffer} webGlBuffer\n */\n/**\n * Shader types, either `FRAGMENT_SHADER` or `VERTEX_SHADER`.\n * @enum {number}\n */\nexport var ShaderType = {\n    FRAGMENT_SHADER: 0x8B30,\n    VERTEX_SHADER: 0x8B31\n};\n/**\n * Uniform names used in the default shaders: `PROJECTION_MATRIX`, `OFFSET_SCALE_MATRIX`.\n * and `OFFSET_ROTATION_MATRIX`.\n * @enum {string}\n */\nexport var DefaultUniform = {\n    PROJECTION_MATRIX: 'u_projectionMatrix',\n    OFFSET_SCALE_MATRIX: 'u_offsetScaleMatrix',\n    OFFSET_ROTATION_MATRIX: 'u_offsetRotateMatrix',\n    TIME: 'u_time',\n    ZOOM: 'u_zoom',\n    RESOLUTION: 'u_resolution'\n};\n/**\n * Attribute types, either `UNSIGNED_BYTE`, `UNSIGNED_SHORT`, `UNSIGNED_INT` or `FLOAT`\n * Note: an attribute stored in a `Float32Array` should be of type `FLOAT`.\n * @enum {number}\n */\nexport var AttributeType = {\n    UNSIGNED_BYTE: UNSIGNED_BYTE,\n    UNSIGNED_SHORT: UNSIGNED_SHORT,\n    UNSIGNED_INT: UNSIGNED_INT,\n    FLOAT: FLOAT\n};\n/**\n * Description of an attribute in a buffer\n * @typedef {Object} AttributeDescription\n * @property {string} name Attribute name to use in shaders\n * @property {number} size Number of components per attributes\n * @property {AttributeType} [type] Attribute type, i.e. number of bytes used to store the value. This is\n * determined by the class of typed array which the buffer uses (eg. `Float32Array` for a `FLOAT` attribute).\n * Default is `FLOAT`.\n */\n/**\n * @typedef {number|Array<number>|HTMLCanvasElement|HTMLImageElement|ImageData|import(\"../transform\").Transform} UniformLiteralValue\n */\n/**\n * Uniform value can be a number, array of numbers (2 to 4), canvas element or a callback returning\n * one of the previous types.\n * @typedef {UniformLiteralValue|function(import(\"../PluggableMap.js\").FrameState):UniformLiteralValue} UniformValue\n */\n/**\n * @typedef {Object} PostProcessesOptions\n * @property {number} [scaleRatio] Scale ratio; if < 1, the post process will render to a texture smaller than\n * the main canvas which will then be sampled up (useful for saving resource on blur steps).\n * @property {string} [vertexShader] Vertex shader source\n * @property {string} [fragmentShader] Fragment shader source\n * @property {Object.<string,UniformValue>} [uniforms] Uniform definitions for the post process step\n */\n/**\n * @typedef {Object} Options\n * @property {Object.<string,UniformValue>} [uniforms] Uniform definitions; property names must match the uniform\n * names in the provided or default shaders.\n * @property {Array<PostProcessesOptions>} [postProcesses] Post-processes definitions\n */\n/**\n * @typedef {Object} UniformInternalDescription\n * @property {string} name Name\n * @property {UniformValue=} value Value\n * @property {WebGLTexture} [texture] Texture\n * @private\n */\n/**\n * @classdesc\n * This class is intended to provide low-level functions related to WebGL rendering, so that accessing\n * directly the WebGL API should not be required anymore.\n *\n * Several operations are handled by the `WebGLHelper` class:\n *\n * ### Define custom shaders and uniforms\n *\n *   *Shaders* are low-level programs executed on the GPU and written in GLSL. There are two types of shaders:\n *\n *   Vertex shaders are used to manipulate the position and attribute of *vertices* of rendered primitives (ie. corners of a square).\n *   Outputs are:\n *\n *   * `gl_Position`: position of the vertex in screen space\n *\n *   * Varyings usually prefixed with `v_` are passed on to the fragment shader\n *\n *   Fragment shaders are used to control the actual color of the pixels drawn on screen. Their only output is `gl_FragColor`.\n *\n *   Both shaders can take *uniforms* or *attributes* as input. Attributes are explained later. Uniforms are common, read-only values that\n *   can be changed at every frame and can be of type float, arrays of float or images.\n *\n *   Shaders must be compiled and assembled into a program like so:\n *   ```js\n *   // here we simply create two shaders and assemble them in a program which is then used\n *   // for subsequent rendering calls\n *   const vertexShader = new WebGLVertex(VERTEX_SHADER);\n *   const fragmentShader = new WebGLFragment(FRAGMENT_SHADER);\n *   const program = this.context.getProgram(fragmentShader, vertexShader);\n *   helper.useProgram(this.program);\n *   ```\n *\n *   Uniforms are defined using the `uniforms` option and can either be explicit values or callbacks taking the frame state as argument.\n *   You can also change their value along the way like so:\n *   ```js\n *   helper.setUniformFloatValue('u_value', valueAsNumber);\n *   ```\n *\n * ### Defining post processing passes\n *\n *   *Post processing* describes the act of rendering primitives to a texture, and then rendering this texture to the final canvas\n *   while applying special effects in screen space.\n *   Typical uses are: blurring, color manipulation, depth of field, filtering...\n *\n *   The `WebGLHelper` class offers the possibility to define post processes at creation time using the `postProcesses` option.\n *   A post process step accepts the following options:\n *\n *   * `fragmentShader` and `vertexShader`: text literals in GLSL language that will be compiled and used in the post processing step.\n *   * `uniforms`: uniforms can be defined for the post processing steps just like for the main render.\n *   * `scaleRatio`: allows using an intermediate texture smaller or higher than the final canvas in the post processing step.\n *     This is typically used in blur steps to reduce the performance overhead by using an already downsampled texture as input.\n *\n *   The {@link module:ol/webgl/PostProcessingPass~WebGLPostProcessingPass} class is used internally, refer to its documentation for more info.\n *\n * ### Binding WebGL buffers and flushing data into them\n *\n *   Data that must be passed to the GPU has to be transferred using {@link module:ol/webgl/Buffer~WebGLArrayBuffer} objects.\n *   A buffer has to be created only once, but must be bound every time the buffer content will be used for rendering.\n *   This is done using {@link bindBuffer}.\n *   When the buffer's array content has changed, the new data has to be flushed to the GPU memory; this is done using\n *   {@link flushBufferData}. Note: this operation is expensive and should be done as infrequently as possible.\n *\n *   When binding an array buffer, a `target` parameter must be given: it should be either {@link module:ol/webgl.ARRAY_BUFFER}\n *   (if the buffer contains vertices data) or {@link module:ol/webgl.ELEMENT_ARRAY_BUFFER} (if the buffer contains indices data).\n *\n *   Examples below:\n *   ```js\n *   // at initialization phase\n *   const verticesBuffer = new WebGLArrayBuffer([], DYNAMIC_DRAW);\n *   const indicesBuffer = new WebGLArrayBuffer([], DYNAMIC_DRAW);\n *\n *   // when array values have changed\n *   helper.flushBufferData(ARRAY_BUFFER, this.verticesBuffer);\n *   helper.flushBufferData(ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n *\n *   // at rendering phase\n *   helper.bindBuffer(ARRAY_BUFFER, this.verticesBuffer);\n *   helper.bindBuffer(ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n *   ```\n *\n * ### Specifying attributes\n *\n *   The GPU only receives the data as arrays of numbers. These numbers must be handled differently depending on what it describes (position, texture coordinate...).\n *   Attributes are used to specify these uses. Use {@link enableAttributeArray_} and either\n *   the default attribute names in {@link module:ol/webgl/Helper.DefaultAttrib} or custom ones.\n *\n *   Please note that you will have to specify the type and offset of the attributes in the data array. You can refer to the documentation of [WebGLRenderingContext.vertexAttribPointer](https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/vertexAttribPointer) for more explanation.\n *   ```js\n *   // here we indicate that the data array has the following structure:\n *   // [posX, posY, offsetX, offsetY, texCoordU, texCoordV, posX, posY, ...]\n *   helper.enableAttributes([\n *     {\n *        name: 'a_position',\n *        size: 2\n *     },\n *     {\n *       name: 'a_offset',\n *       size: 2\n *     },\n *     {\n *       name: 'a_texCoord',\n *       size: 2\n *     }\n *   ])\n *   ```\n *\n * ### Rendering primitives\n *\n *   Once all the steps above have been achieved, rendering primitives to the screen is done using {@link prepareDraw}, {@link drawElements} and {@link finalizeDraw}.\n *   ```js\n *   // frame preparation step\n *   helper.prepareDraw(frameState);\n *\n *   // call this for every data array that has to be rendered on screen\n *   helper.drawElements(0, this.indicesBuffer.getArray().length);\n *\n *   // finalize the rendering by applying post processes\n *   helper.finalizeDraw(frameState);\n *   ```\n *\n * For an example usage of this class, refer to {@link module:ol/renderer/webgl/PointsLayer~WebGLPointsLayerRenderer}.\n *\n *\n * @api\n */\nvar WebGLHelper = /** @class */ (function (_super) {\n    __extends(WebGLHelper, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function WebGLHelper(opt_options) {\n        var _this = _super.call(this) || this;\n        var options = opt_options || {};\n        /** @private */\n        _this.boundHandleWebGLContextLost_ = _this.handleWebGLContextLost.bind(_this);\n        /** @private */\n        _this.boundHandleWebGLContextRestored_ = _this.handleWebGLContextRestored.bind(_this);\n        /**\n         * @private\n         * @type {HTMLCanvasElement}\n         */\n        _this.canvas_ = document.createElement('canvas');\n        _this.canvas_.style.position = 'absolute';\n        _this.canvas_.style.left = '0';\n        /**\n         * @private\n         * @type {WebGLRenderingContext}\n         */\n        _this.gl_ = getContext(_this.canvas_);\n        var gl = _this.getGL();\n        /**\n         * @private\n         * @type {!Object<string, BufferCacheEntry>}\n         */\n        _this.bufferCache_ = {};\n        /**\n         * @private\n         * @type {WebGLProgram}\n         */\n        _this.currentProgram_ = null;\n        assert(includes(getSupportedExtensions(), 'OES_element_index_uint'), 63);\n        gl.getExtension('OES_element_index_uint');\n        _this.canvas_.addEventListener(ContextEventType.LOST, _this.boundHandleWebGLContextLost_);\n        _this.canvas_.addEventListener(ContextEventType.RESTORED, _this.boundHandleWebGLContextRestored_);\n        /**\n         * @private\n         * @type {import(\"../transform.js\").Transform}\n         */\n        _this.offsetRotateMatrix_ = createTransform();\n        /**\n         * @private\n         * @type {import(\"../transform.js\").Transform}\n         */\n        _this.offsetScaleMatrix_ = createTransform();\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.tmpMat4_ = create();\n        /**\n         * @private\n         * @type {Object.<string, WebGLUniformLocation>}\n         */\n        _this.uniformLocations_ = {};\n        /**\n         * @private\n         * @type {Object.<string, number>}\n         */\n        _this.attribLocations_ = {};\n        /**\n         * Holds info about custom uniforms used in the post processing pass.\n         * If the uniform is a texture, the WebGL Texture object will be stored here.\n         * @type {Array<UniformInternalDescription>}\n         * @private\n         */\n        _this.uniforms_ = [];\n        if (options.uniforms) {\n            for (var name_1 in options.uniforms) {\n                _this.uniforms_.push({\n                    name: name_1,\n                    value: options.uniforms[name_1]\n                });\n            }\n        }\n        /**\n         * An array of PostProcessingPass objects is kept in this variable, built from the steps provided in the\n         * options. If no post process was given, a default one is used (so as not to have to make an exception to\n         * the frame buffer logic).\n         * @type {Array<WebGLPostProcessingPass>}\n         * @private\n         */\n        _this.postProcessPasses_ = options.postProcesses ? options.postProcesses.map(function (options) {\n            return new WebGLPostProcessingPass({\n                webGlContext: gl,\n                scaleRatio: options.scaleRatio,\n                vertexShader: options.vertexShader,\n                fragmentShader: options.fragmentShader,\n                uniforms: options.uniforms\n            });\n        }) : [new WebGLPostProcessingPass({ webGlContext: gl })];\n        /**\n         * @type {string|null}\n         * @private\n         */\n        _this.shaderCompileErrors_ = null;\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.startTime_ = Date.now();\n        return _this;\n    }\n    /**\n     * Just bind the buffer if it's in the cache. Otherwise create\n     * the WebGL buffer, bind it, populate it, and add an entry to\n     * the cache.\n     * @param {import(\"./Buffer\").default} buffer Buffer.\n     * @api\n     */\n    WebGLHelper.prototype.bindBuffer = function (buffer) {\n        var gl = this.getGL();\n        var bufferKey = getUid(buffer);\n        var bufferCache = this.bufferCache_[bufferKey];\n        if (!bufferCache) {\n            var webGlBuffer = gl.createBuffer();\n            bufferCache = {\n                buffer: buffer,\n                webGlBuffer: webGlBuffer\n            };\n            this.bufferCache_[bufferKey] = bufferCache;\n        }\n        gl.bindBuffer(buffer.getType(), bufferCache.webGlBuffer);\n    };\n    /**\n     * Update the data contained in the buffer array; this is required for the\n     * new data to be rendered\n     * @param {import(\"./Buffer\").default} buffer Buffer.\n     * @api\n     */\n    WebGLHelper.prototype.flushBufferData = function (buffer) {\n        var gl = this.getGL();\n        this.bindBuffer(buffer);\n        gl.bufferData(buffer.getType(), buffer.getArray(), buffer.getUsage());\n    };\n    /**\n     * @param {import(\"./Buffer.js\").default} buf Buffer.\n     */\n    WebGLHelper.prototype.deleteBuffer = function (buf) {\n        var gl = this.getGL();\n        var bufferKey = getUid(buf);\n        var bufferCacheEntry = this.bufferCache_[bufferKey];\n        if (!gl.isContextLost()) {\n            gl.deleteBuffer(bufferCacheEntry.buffer);\n        }\n        delete this.bufferCache_[bufferKey];\n    };\n    /**\n     * @inheritDoc\n     */\n    WebGLHelper.prototype.disposeInternal = function () {\n        this.canvas_.removeEventListener(ContextEventType.LOST, this.boundHandleWebGLContextLost_);\n        this.canvas_.removeEventListener(ContextEventType.RESTORED, this.boundHandleWebGLContextRestored_);\n    };\n    /**\n     * Clear the buffer & set the viewport to draw.\n     * Post process passes will be initialized here, the first one being bound as a render target for\n     * subsequent draw calls.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n     * @api\n     */\n    WebGLHelper.prototype.prepareDraw = function (frameState) {\n        var gl = this.getGL();\n        var canvas = this.getCanvas();\n        var size = frameState.size;\n        var pixelRatio = frameState.pixelRatio;\n        canvas.width = size[0] * pixelRatio;\n        canvas.height = size[1] * pixelRatio;\n        canvas.style.width = size[0] + 'px';\n        canvas.style.height = size[1] + 'px';\n        gl.useProgram(this.currentProgram_);\n        // loop backwards in post processes list\n        for (var i = this.postProcessPasses_.length - 1; i >= 0; i--) {\n            this.postProcessPasses_[i].init(frameState);\n        }\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        gl.clearColor(0.0, 0.0, 0.0, 0.0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n        gl.useProgram(this.currentProgram_);\n        this.applyFrameState(frameState);\n        this.applyUniforms(frameState);\n    };\n    /**\n     * Clear the render target & bind it for future draw operations.\n     * This is similar to `prepareDraw`, only post processes will not be applied.\n     * Note: the whole viewport will be drawn to the render target, regardless of its size.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n     * @param {import(\"./RenderTarget.js\").default} renderTarget Render target to draw to\n     * @param {boolean} [opt_disableAlphaBlend] If true, no alpha blending will happen.\n     */\n    WebGLHelper.prototype.prepareDrawToRenderTarget = function (frameState, renderTarget, opt_disableAlphaBlend) {\n        var gl = this.getGL();\n        var size = renderTarget.getSize();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, renderTarget.getFramebuffer());\n        gl.viewport(0, 0, size[0], size[1]);\n        gl.bindTexture(gl.TEXTURE_2D, renderTarget.getTexture());\n        gl.clearColor(0.0, 0.0, 0.0, 0.0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.ONE, opt_disableAlphaBlend ? gl.ZERO : gl.ONE_MINUS_SRC_ALPHA);\n        gl.useProgram(this.currentProgram_);\n        this.applyFrameState(frameState);\n        this.applyUniforms(frameState);\n    };\n    /**\n     * Execute a draw call based on the currently bound program, texture, buffers, attributes.\n     * @param {number} start Start index.\n     * @param {number} end End index.\n     * @api\n     */\n    WebGLHelper.prototype.drawElements = function (start, end) {\n        var gl = this.getGL();\n        var elementType = gl.UNSIGNED_INT;\n        var elementSize = 4;\n        var numItems = end - start;\n        var offsetInBytes = start * elementSize;\n        gl.drawElements(gl.TRIANGLES, numItems, elementType, offsetInBytes);\n    };\n    /**\n     * Apply the successive post process passes which will eventually render to the actual canvas.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n     * @api\n     */\n    WebGLHelper.prototype.finalizeDraw = function (frameState) {\n        // apply post processes using the next one as target\n        for (var i = 0; i < this.postProcessPasses_.length; i++) {\n            this.postProcessPasses_[i].apply(frameState, this.postProcessPasses_[i + 1] || null);\n        }\n    };\n    /**\n     * @return {HTMLCanvasElement} Canvas.\n     * @api\n     */\n    WebGLHelper.prototype.getCanvas = function () {\n        return this.canvas_;\n    };\n    /**\n     * Get the WebGL rendering context\n     * @return {WebGLRenderingContext} The rendering context.\n     * @api\n     */\n    WebGLHelper.prototype.getGL = function () {\n        return this.gl_;\n    };\n    /**\n     * Sets the default matrix uniforms for a given frame state. This is called internally in `prepareDraw`.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @private\n     */\n    WebGLHelper.prototype.applyFrameState = function (frameState) {\n        var size = frameState.size;\n        var rotation = frameState.viewState.rotation;\n        var offsetScaleMatrix = resetTransform(this.offsetScaleMatrix_);\n        scaleTransform(offsetScaleMatrix, 2 / size[0], 2 / size[1]);\n        var offsetRotateMatrix = resetTransform(this.offsetRotateMatrix_);\n        if (rotation !== 0) {\n            rotateTransform(offsetRotateMatrix, -rotation);\n        }\n        this.setUniformMatrixValue(DefaultUniform.OFFSET_SCALE_MATRIX, fromTransform(this.tmpMat4_, offsetScaleMatrix));\n        this.setUniformMatrixValue(DefaultUniform.OFFSET_ROTATION_MATRIX, fromTransform(this.tmpMat4_, offsetRotateMatrix));\n        this.setUniformFloatValue(DefaultUniform.TIME, (Date.now() - this.startTime_) * 0.001);\n        this.setUniformFloatValue(DefaultUniform.ZOOM, frameState.viewState.zoom);\n        this.setUniformFloatValue(DefaultUniform.RESOLUTION, frameState.viewState.resolution);\n    };\n    /**\n     * Sets the custom uniforms based on what was given in the constructor. This is called internally in `prepareDraw`.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @private\n     */\n    WebGLHelper.prototype.applyUniforms = function (frameState) {\n        var gl = this.getGL();\n        var value;\n        var textureSlot = 0;\n        this.uniforms_.forEach(function (uniform) {\n            value = typeof uniform.value === 'function' ? uniform.value(frameState) : uniform.value;\n            // apply value based on type\n            if (value instanceof HTMLCanvasElement || value instanceof HTMLImageElement || value instanceof ImageData) {\n                // create a texture & put data\n                if (!uniform.texture) {\n                    uniform.texture = gl.createTexture();\n                }\n                gl.activeTexture(gl[\"TEXTURE\" + textureSlot]);\n                gl.bindTexture(gl.TEXTURE_2D, uniform.texture);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n                var imageReady = !(value instanceof HTMLImageElement) || /** @type {HTMLImageElement} */ (value).complete;\n                if (imageReady) {\n                    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, value);\n                }\n                // fill texture slots by increasing index\n                gl.uniform1i(this.getUniformLocation(uniform.name), textureSlot++);\n            }\n            else if (Array.isArray(value) && value.length === 6) {\n                this.setUniformMatrixValue(uniform.name, fromTransform(this.tmpMat4_, value));\n            }\n            else if (Array.isArray(value) && value.length <= 4) {\n                switch (value.length) {\n                    case 2:\n                        gl.uniform2f(this.getUniformLocation(uniform.name), value[0], value[1]);\n                        return;\n                    case 3:\n                        gl.uniform3f(this.getUniformLocation(uniform.name), value[0], value[1], value[2]);\n                        return;\n                    case 4:\n                        gl.uniform4f(this.getUniformLocation(uniform.name), value[0], value[1], value[2], value[3]);\n                        return;\n                    default:\n                        return;\n                }\n            }\n            else if (typeof value === 'number') {\n                gl.uniform1f(this.getUniformLocation(uniform.name), value);\n            }\n        }.bind(this));\n    };\n    /**\n     * Use a program.  If the program is already in use, this will return `false`.\n     * @param {WebGLProgram} program Program.\n     * @return {boolean} Changed.\n     * @api\n     */\n    WebGLHelper.prototype.useProgram = function (program) {\n        if (program == this.currentProgram_) {\n            return false;\n        }\n        else {\n            var gl = this.getGL();\n            gl.useProgram(program);\n            this.currentProgram_ = program;\n            this.uniformLocations_ = {};\n            this.attribLocations_ = {};\n            return true;\n        }\n    };\n    /**\n     * Will attempt to compile a vertex or fragment shader based on source\n     * On error, the shader will be returned but\n     * `gl.getShaderParameter(shader, gl.COMPILE_STATUS)` will return `true`\n     * Use `gl.getShaderInfoLog(shader)` to have details\n     * @param {string} source Shader source\n     * @param {ShaderType} type VERTEX_SHADER or FRAGMENT_SHADER\n     * @return {WebGLShader} Shader object\n     */\n    WebGLHelper.prototype.compileShader = function (source, type) {\n        var gl = this.getGL();\n        var shader = gl.createShader(type);\n        gl.shaderSource(shader, source);\n        gl.compileShader(shader);\n        return shader;\n    };\n    /**\n     * Create a program for a vertex and fragment shader. The shaders compilation may have failed:\n     * use `WebGLHelper.getShaderCompileErrors()`to have details if any.\n     * @param {string} fragmentShaderSource Fragment shader source.\n     * @param {string} vertexShaderSource Vertex shader source.\n     * @return {WebGLProgram} Program\n     * @api\n     */\n    WebGLHelper.prototype.getProgram = function (fragmentShaderSource, vertexShaderSource) {\n        var gl = this.getGL();\n        var fragmentShader = this.compileShader(fragmentShaderSource, gl.FRAGMENT_SHADER);\n        var vertexShader = this.compileShader(vertexShaderSource, gl.VERTEX_SHADER);\n        this.shaderCompileErrors_ = null;\n        if (gl.getShaderInfoLog(fragmentShader)) {\n            this.shaderCompileErrors_ =\n                \"Fragment shader compilation failed:\\n\" + gl.getShaderInfoLog(fragmentShader);\n        }\n        if (gl.getShaderInfoLog(vertexShader)) {\n            this.shaderCompileErrors_ = (this.shaderCompileErrors_ || '') +\n                (\"Vertex shader compilation failed:\\n\" + gl.getShaderInfoLog(vertexShader));\n        }\n        var program = gl.createProgram();\n        gl.attachShader(program, fragmentShader);\n        gl.attachShader(program, vertexShader);\n        gl.linkProgram(program);\n        return program;\n    };\n    /**\n     * Will return the last shader compilation errors. If no error happened, will return null;\n     * @return {string|null} Errors description, or null if last compilation was successful\n     * @api\n     */\n    WebGLHelper.prototype.getShaderCompileErrors = function () {\n        return this.shaderCompileErrors_;\n    };\n    /**\n     * Will get the location from the shader or the cache\n     * @param {string} name Uniform name\n     * @return {WebGLUniformLocation} uniformLocation\n     * @api\n     */\n    WebGLHelper.prototype.getUniformLocation = function (name) {\n        if (this.uniformLocations_[name] === undefined) {\n            this.uniformLocations_[name] = this.getGL().getUniformLocation(this.currentProgram_, name);\n        }\n        return this.uniformLocations_[name];\n    };\n    /**\n     * Will get the location from the shader or the cache\n     * @param {string} name Attribute name\n     * @return {number} attribLocation\n     * @api\n     */\n    WebGLHelper.prototype.getAttributeLocation = function (name) {\n        if (this.attribLocations_[name] === undefined) {\n            this.attribLocations_[name] = this.getGL().getAttribLocation(this.currentProgram_, name);\n        }\n        return this.attribLocations_[name];\n    };\n    /**\n     * Modifies the given transform to apply the rotation/translation/scaling of the given frame state.\n     * The resulting transform can be used to convert world space coordinates to view coordinates.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {import(\"../transform\").Transform} transform Transform to update.\n     * @return {import(\"../transform\").Transform} The updated transform object.\n     * @api\n     */\n    WebGLHelper.prototype.makeProjectionTransform = function (frameState, transform) {\n        var size = frameState.size;\n        var rotation = frameState.viewState.rotation;\n        var resolution = frameState.viewState.resolution;\n        var center = frameState.viewState.center;\n        resetTransform(transform);\n        composeTransform(transform, 0, 0, 2 / (resolution * size[0]), 2 / (resolution * size[1]), -rotation, -center[0], -center[1]);\n        return transform;\n    };\n    /**\n     * Give a value for a standard float uniform\n     * @param {string} uniform Uniform name\n     * @param {number} value Value\n     * @api\n     */\n    WebGLHelper.prototype.setUniformFloatValue = function (uniform, value) {\n        this.getGL().uniform1f(this.getUniformLocation(uniform), value);\n    };\n    /**\n     * Give a value for a standard matrix4 uniform\n     * @param {string} uniform Uniform name\n     * @param {Array<number>} value Matrix value\n     * @api\n     */\n    WebGLHelper.prototype.setUniformMatrixValue = function (uniform, value) {\n        this.getGL().uniformMatrix4fv(this.getUniformLocation(uniform), false, value);\n    };\n    /**\n     * Will set the currently bound buffer to an attribute of the shader program. Used by `#enableAttributes`\n     * internally.\n     * @param {string} attribName Attribute name\n     * @param {number} size Number of components per attributes\n     * @param {number} type UNSIGNED_INT, UNSIGNED_BYTE, UNSIGNED_SHORT or FLOAT\n     * @param {number} stride Stride in bytes (0 means attribs are packed)\n     * @param {number} offset Offset in bytes\n     * @private\n     */\n    WebGLHelper.prototype.enableAttributeArray_ = function (attribName, size, type, stride, offset) {\n        var location = this.getAttributeLocation(attribName);\n        // the attribute has not been found in the shaders; do not enable it\n        if (location < 0) {\n            return;\n        }\n        this.getGL().enableVertexAttribArray(location);\n        this.getGL().vertexAttribPointer(location, size, type, false, stride, offset);\n    };\n    /**\n     * Will enable the following attributes to be read from the currently bound buffer,\n     * i.e. tell the GPU where to read the different attributes in the buffer. An error in the\n     * size/type/order of attributes will most likely break the rendering and throw a WebGL exception.\n     * @param {Array<AttributeDescription>} attributes Ordered list of attributes to read from the buffer\n     * @api\n     */\n    WebGLHelper.prototype.enableAttributes = function (attributes) {\n        var stride = computeAttributesStride(attributes);\n        var offset = 0;\n        for (var i = 0; i < attributes.length; i++) {\n            var attr = attributes[i];\n            this.enableAttributeArray_(attr.name, attr.size, attr.type || FLOAT, stride, offset);\n            offset += attr.size * getByteSizeFromType(attr.type);\n        }\n    };\n    /**\n     * WebGL context was lost\n     * @private\n     */\n    WebGLHelper.prototype.handleWebGLContextLost = function () {\n        clear(this.bufferCache_);\n        this.currentProgram_ = null;\n    };\n    /**\n     * WebGL context was restored\n     * @private\n     */\n    WebGLHelper.prototype.handleWebGLContextRestored = function () {\n    };\n    /**\n     * Will create or reuse a given webgl texture and apply the given size. If no image data\n     * specified, the texture will be empty, otherwise image data will be used and the `size`\n     * parameter will be ignored.\n     * Note: wrap parameters are set to clamp to edge, min filter is set to linear.\n     * @param {Array<number>} size Expected size of the texture\n     * @param {ImageData|HTMLImageElement|HTMLCanvasElement} [opt_data] Image data/object to bind to the texture\n     * @param {WebGLTexture} [opt_texture] Existing texture to reuse\n     * @return {WebGLTexture} The generated texture\n     * @api\n     */\n    WebGLHelper.prototype.createTexture = function (size, opt_data, opt_texture) {\n        var gl = this.getGL();\n        var texture = opt_texture || gl.createTexture();\n        // set params & size\n        var level = 0;\n        var internalFormat = gl.RGBA;\n        var border = 0;\n        var format = gl.RGBA;\n        var type = gl.UNSIGNED_BYTE;\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        if (opt_data) {\n            gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, format, type, opt_data);\n        }\n        else {\n            gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, size[0], size[1], border, format, type, null);\n        }\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        return texture;\n    };\n    return WebGLHelper;\n}(Disposable));\n/**\n * Compute a stride in bytes based on a list of attributes\n * @param {Array<AttributeDescription>} attributes Ordered list of attributes\n * @returns {number} Stride, ie amount of values for each vertex in the vertex buffer\n * @api\n */\nexport function computeAttributesStride(attributes) {\n    var stride = 0;\n    for (var i = 0; i < attributes.length; i++) {\n        var attr = attributes[i];\n        stride += attr.size * getByteSizeFromType(attr.type);\n    }\n    return stride;\n}\n/**\n * Computes the size in byte of an attribute type.\n * @param {AttributeType} type Attribute type\n * @returns {number} The size in bytes\n */\nfunction getByteSizeFromType(type) {\n    switch (type) {\n        case AttributeType.UNSIGNED_BYTE: return Uint8Array.BYTES_PER_ELEMENT;\n        case AttributeType.UNSIGNED_SHORT: return Uint16Array.BYTES_PER_ELEMENT;\n        case AttributeType.UNSIGNED_INT: return Uint32Array.BYTES_PER_ELEMENT;\n        case AttributeType.FLOAT:\n        default: return Float32Array.BYTES_PER_ELEMENT;\n    }\n}\nexport default WebGLHelper;\n//# sourceMappingURL=Helper.js.map","/**\n * @module ol/geom/GeometryType\n */\n/**\n * The geometry type. One of `'Point'`, `'LineString'`, `'LinearRing'`,\n * `'Polygon'`, `'MultiPoint'`, `'MultiLineString'`, `'MultiPolygon'`,\n * `'GeometryCollection'`, `'Circle'`.\n * @enum {string}\n */\nexport default {\n    POINT: 'Point',\n    LINE_STRING: 'LineString',\n    LINEAR_RING: 'LinearRing',\n    POLYGON: 'Polygon',\n    MULTI_POINT: 'MultiPoint',\n    MULTI_LINE_STRING: 'MultiLineString',\n    MULTI_POLYGON: 'MultiPolygon',\n    GEOMETRY_COLLECTION: 'GeometryCollection',\n    CIRCLE: 'Circle'\n};\n//# sourceMappingURL=GeometryType.js.map","/**\n * @module ol/ImageState\n */\n/**\n * @enum {number}\n */\nexport default {\n    IDLE: 0,\n    LOADING: 1,\n    LOADED: 2,\n    ERROR: 3,\n    EMPTY: 4\n};\n//# sourceMappingURL=ImageState.js.map","/**\n * @module ol/events\n */\nimport { clear } from './obj.js';\n/**\n * Key to use with {@link module:ol/Observable~Observable#unByKey}.\n * @typedef {Object} EventsKey\n * @property {ListenerFunction} listener\n * @property {import(\"./events/Target.js\").EventTargetLike} target\n * @property {string} type\n * @api\n */\n/**\n * Listener function. This function is called with an event object as argument.\n * When the function returns `false`, event propagation will stop.\n *\n * @typedef {function((Event|import(\"./events/Event.js\").default)): (void|boolean)} ListenerFunction\n * @api\n */\n/**\n * Registers an event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` to a `this` object, and returns\n * a key for use with {@link module:ol/events~unlistenByKey}.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @param {boolean=} opt_once If true, add the listener as one-off listener.\n * @return {EventsKey} Unique key for the listener.\n */\nexport function listen(target, type, listener, opt_this, opt_once) {\n    if (opt_this && opt_this !== target) {\n        listener = listener.bind(opt_this);\n    }\n    if (opt_once) {\n        var originalListener_1 = listener;\n        listener = function () {\n            target.removeEventListener(type, listener);\n            originalListener_1.apply(this, arguments);\n        };\n    }\n    var eventsKey = {\n        target: target,\n        type: type,\n        listener: listener\n    };\n    target.addEventListener(type, listener);\n    return eventsKey;\n}\n/**\n * Registers a one-off event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` as self-unregistering listener\n * to a `this` object, and returns a key for use with\n * {@link module:ol/events~unlistenByKey} in case the listener needs to be\n * unregistered before it is called.\n *\n * When {@link module:ol/events~listen} is called with the same arguments after this\n * function, the self-unregistering listener will be turned into a permanent\n * listener.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @return {EventsKey} Key for unlistenByKey.\n */\nexport function listenOnce(target, type, listener, opt_this) {\n    return listen(target, type, listener, opt_this, true);\n}\n/**\n * Unregisters event listeners on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * The argument passed to this function is the key returned from\n * {@link module:ol/events~listen} or {@link module:ol/events~listenOnce}.\n *\n * @param {EventsKey} key The key.\n */\nexport function unlistenByKey(key) {\n    if (key && key.target) {\n        key.target.removeEventListener(key.type, key.listener);\n        clear(key);\n    }\n}\n//# sourceMappingURL=events.js.map","/**\n * @module ol/functions\n */\nimport { equals as arrayEquals } from './array.js';\n/**\n * Always returns true.\n * @returns {boolean} true.\n */\nexport function TRUE() {\n    return true;\n}\n/**\n * Always returns false.\n * @returns {boolean} false.\n */\nexport function FALSE() {\n    return false;\n}\n/**\n * A reusable function, used e.g. as a default for callbacks.\n *\n * @return {void} Nothing.\n */\nexport function VOID() { }\n/**\n * Wrap a function in another function that remembers the last return.  If the\n * returned function is called twice in a row with the same arguments and the same\n * this object, it will return the value from the first call in the second call.\n *\n * @param {function(...any): ReturnType} fn The function to memoize.\n * @return {function(...any): ReturnType} The memoized function.\n * @template ReturnType\n */\nexport function memoizeOne(fn) {\n    var called = false;\n    /** @type {ReturnType} */\n    var lastResult;\n    /** @type {Array<any>} */\n    var lastArgs;\n    var lastThis;\n    return function () {\n        var nextArgs = Array.prototype.slice.call(arguments);\n        if (!called || this !== lastThis || !arrayEquals(nextArgs, lastArgs)) {\n            called = true;\n            lastThis = this;\n            lastArgs = nextArgs;\n            lastResult = fn.apply(this, arguments);\n        }\n        return lastResult;\n    };\n}\n//# sourceMappingURL=functions.js.map","/**\n * @module ol/events/Event\n */\n/**\n * @classdesc\n * Stripped down implementation of the W3C DOM Level 2 Event interface.\n * See https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-interface.\n *\n * This implementation only provides `type` and `target` properties, and\n * `stopPropagation` and `preventDefault` methods. It is meant as base class\n * for higher level events defined in the library, and works with\n * {@link module:ol/events/Target~Target}.\n */\nvar BaseEvent = /** @class */ (function () {\n    /**\n     * @param {string} type Type.\n     */\n    function BaseEvent(type) {\n        /**\n         * @type {boolean}\n         */\n        this.propagationStopped;\n        /**\n         * The event type.\n         * @type {string}\n         * @api\n         */\n        this.type = type;\n        /**\n         * The event target.\n         * @type {Object}\n         * @api\n         */\n        this.target = null;\n    }\n    /**\n     * Stop event propagation.\n     * @api\n     */\n    BaseEvent.prototype.preventDefault = function () {\n        this.propagationStopped = true;\n    };\n    /**\n     * Stop event propagation.\n     * @api\n     */\n    BaseEvent.prototype.stopPropagation = function () {\n        this.propagationStopped = true;\n    };\n    return BaseEvent;\n}());\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function stopPropagation(evt) {\n    evt.stopPropagation();\n}\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function preventDefault(evt) {\n    evt.preventDefault();\n}\nexport default BaseEvent;\n//# sourceMappingURL=Event.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/events/Target\n */\nimport Disposable from '../Disposable.js';\nimport { VOID } from '../functions.js';\nimport Event from './Event.js';\nimport { clear } from '../obj.js';\n/**\n * @typedef {EventTarget|Target} EventTargetLike\n */\n/**\n * @classdesc\n * A simplified implementation of the W3C DOM Level 2 EventTarget interface.\n * See https://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-EventTarget.\n *\n * There are two important simplifications compared to the specification:\n *\n * 1. The handling of `useCapture` in `addEventListener` and\n *    `removeEventListener`. There is no real capture model.\n * 2. The handling of `stopPropagation` and `preventDefault` on `dispatchEvent`.\n *    There is no event target hierarchy. When a listener calls\n *    `stopPropagation` or `preventDefault` on an event object, it means that no\n *    more listeners after this one will be called. Same as when the listener\n *    returns false.\n */\nvar Target = /** @class */ (function (_super) {\n    __extends(Target, _super);\n    /**\n     * @param {*=} opt_target Default event target for dispatched events.\n     */\n    function Target(opt_target) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {*}\n         */\n        _this.eventTarget_ = opt_target;\n        /**\n         * @private\n         * @type {!Object<string, number>}\n         */\n        _this.pendingRemovals_ = {};\n        /**\n         * @private\n         * @type {!Object<string, number>}\n         */\n        _this.dispatching_ = {};\n        /**\n         * @private\n         * @type {!Object<string, Array<import(\"../events.js\").ListenerFunction>>}\n         */\n        _this.listeners_ = {};\n        return _this;\n    }\n    /**\n     * @param {string} type Type.\n     * @param {import(\"../events.js\").ListenerFunction} listener Listener.\n     */\n    Target.prototype.addEventListener = function (type, listener) {\n        if (!type || !listener) {\n            return;\n        }\n        var listeners = this.listeners_[type];\n        if (!listeners) {\n            listeners = [];\n            this.listeners_[type] = listeners;\n        }\n        if (listeners.indexOf(listener) === -1) {\n            listeners.push(listener);\n        }\n    };\n    /**\n     * Dispatches an event and calls all listeners listening for events\n     * of this type. The event parameter can either be a string or an\n     * Object with a `type` property.\n     *\n     * @param {{type: string,\n     *     target: (EventTargetLike|undefined),\n     *     propagationStopped: (boolean|undefined)}|\n     *     import(\"./Event.js\").default|string} event Event object.\n     * @return {boolean|undefined} `false` if anyone called preventDefault on the\n     *     event object or if any of the listeners returned false.\n     * @api\n     */\n    Target.prototype.dispatchEvent = function (event) {\n        var evt = typeof event === 'string' ? new Event(event) : event;\n        var type = evt.type;\n        if (!evt.target) {\n            evt.target = this.eventTarget_ || this;\n        }\n        var listeners = this.listeners_[type];\n        var propagate;\n        if (listeners) {\n            if (!(type in this.dispatching_)) {\n                this.dispatching_[type] = 0;\n                this.pendingRemovals_[type] = 0;\n            }\n            ++this.dispatching_[type];\n            for (var i = 0, ii = listeners.length; i < ii; ++i) {\n                if (listeners[i].call(this, evt) === false || evt.propagationStopped) {\n                    propagate = false;\n                    break;\n                }\n            }\n            --this.dispatching_[type];\n            if (this.dispatching_[type] === 0) {\n                var pendingRemovals = this.pendingRemovals_[type];\n                delete this.pendingRemovals_[type];\n                while (pendingRemovals--) {\n                    this.removeEventListener(type, VOID);\n                }\n                delete this.dispatching_[type];\n            }\n            return propagate;\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    Target.prototype.disposeInternal = function () {\n        clear(this.listeners_);\n    };\n    /**\n     * Get the listeners for a specified event type. Listeners are returned in the\n     * order that they will be called in.\n     *\n     * @param {string} type Type.\n     * @return {Array<import(\"../events.js\").ListenerFunction>} Listeners.\n     */\n    Target.prototype.getListeners = function (type) {\n        return this.listeners_[type];\n    };\n    /**\n     * @param {string=} opt_type Type. If not provided,\n     *     `true` will be returned if this event target has any listeners.\n     * @return {boolean} Has listeners.\n     */\n    Target.prototype.hasListener = function (opt_type) {\n        return opt_type ?\n            opt_type in this.listeners_ :\n            Object.keys(this.listeners_).length > 0;\n    };\n    /**\n     * @param {string} type Type.\n     * @param {import(\"../events.js\").ListenerFunction} listener Listener.\n     */\n    Target.prototype.removeEventListener = function (type, listener) {\n        var listeners = this.listeners_[type];\n        if (listeners) {\n            var index = listeners.indexOf(listener);\n            if (index !== -1) {\n                if (type in this.pendingRemovals_) {\n                    // make listener a no-op, and remove later in #dispatchEvent()\n                    listeners[index] = VOID;\n                    ++this.pendingRemovals_[type];\n                }\n                else {\n                    listeners.splice(index, 1);\n                    if (listeners.length === 0) {\n                        delete this.listeners_[type];\n                    }\n                }\n            }\n        }\n    };\n    return Target;\n}(Disposable));\nexport default Target;\n//# sourceMappingURL=Target.js.map","/**\n * @module ol/events/EventType\n */\n/**\n * @enum {string}\n * @const\n */\nexport default {\n    /**\n     * Generic change event. Triggered when the revision counter is increased.\n     * @event module:ol/events/Event~BaseEvent#change\n     * @api\n     */\n    CHANGE: 'change',\n    /**\n     * Generic error event. Triggered when an error occurs.\n     * @event module:ol/events/Event~BaseEvent#error\n     * @api\n     */\n    ERROR: 'error',\n    BLUR: 'blur',\n    CLEAR: 'clear',\n    CONTEXTMENU: 'contextmenu',\n    CLICK: 'click',\n    DBLCLICK: 'dblclick',\n    DRAGENTER: 'dragenter',\n    DRAGOVER: 'dragover',\n    DROP: 'drop',\n    FOCUS: 'focus',\n    KEYDOWN: 'keydown',\n    KEYPRESS: 'keypress',\n    LOAD: 'load',\n    RESIZE: 'resize',\n    TOUCHMOVE: 'touchmove',\n    WHEEL: 'wheel'\n};\n//# sourceMappingURL=EventType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Observable\n */\nimport { listen, unlistenByKey, listenOnce } from './events.js';\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * An event target providing convenient methods for listener registration\n * and unregistration. A generic `change` event is always available through\n * {@link module:ol/Observable~Observable#changed}.\n *\n * @fires import(\"./events/Event.js\").default\n * @api\n */\nvar Observable = /** @class */ (function (_super) {\n    __extends(Observable, _super);\n    function Observable() {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.revision_ = 0;\n        return _this;\n    }\n    /**\n     * Increases the revision counter and dispatches a 'change' event.\n     * @api\n     */\n    Observable.prototype.changed = function () {\n        ++this.revision_;\n        this.dispatchEvent(EventType.CHANGE);\n    };\n    /**\n     * Get the version number for this object.  Each time the object is modified,\n     * its version number will be incremented.\n     * @return {number} Revision.\n     * @api\n     */\n    Observable.prototype.getRevision = function () {\n        return this.revision_;\n    };\n    /**\n     * Listen for a certain type of event.\n     * @param {string|Array<string>} type The event type or array of event types.\n     * @param {function(?): ?} listener The listener function.\n     * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n     *     called with an array of event types as the first argument, the return\n     *     will be an array of keys.\n     * @api\n     */\n    Observable.prototype.on = function (type, listener) {\n        if (Array.isArray(type)) {\n            var len = type.length;\n            var keys = new Array(len);\n            for (var i = 0; i < len; ++i) {\n                keys[i] = listen(this, type[i], listener);\n            }\n            return keys;\n        }\n        else {\n            return listen(this, /** @type {string} */ (type), listener);\n        }\n    };\n    /**\n     * Listen once for a certain type of event.\n     * @param {string|Array<string>} type The event type or array of event types.\n     * @param {function(?): ?} listener The listener function.\n     * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n     *     called with an array of event types as the first argument, the return\n     *     will be an array of keys.\n     * @api\n     */\n    Observable.prototype.once = function (type, listener) {\n        if (Array.isArray(type)) {\n            var len = type.length;\n            var keys = new Array(len);\n            for (var i = 0; i < len; ++i) {\n                keys[i] = listenOnce(this, type[i], listener);\n            }\n            return keys;\n        }\n        else {\n            return listenOnce(this, /** @type {string} */ (type), listener);\n        }\n    };\n    /**\n     * Unlisten for a certain type of event.\n     * @param {string|Array<string>} type The event type or array of event types.\n     * @param {function(?): ?} listener The listener function.\n     * @api\n     */\n    Observable.prototype.un = function (type, listener) {\n        if (Array.isArray(type)) {\n            for (var i = 0, ii = type.length; i < ii; ++i) {\n                this.removeEventListener(type[i], listener);\n            }\n        }\n        else {\n            this.removeEventListener(type, listener);\n        }\n    };\n    return Observable;\n}(EventTarget));\n/**\n * Removes an event listener using the key returned by `on()` or `once()`.\n * @param {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} key The key returned by `on()`\n *     or `once()` (or an array of keys).\n * @api\n */\nexport function unByKey(key) {\n    if (Array.isArray(key)) {\n        for (var i = 0, ii = key.length; i < ii; ++i) {\n            unlistenByKey(key[i]);\n        }\n    }\n    else {\n        unlistenByKey(/** @type {import(\"./events.js\").EventsKey} */ (key));\n    }\n}\nexport default Observable;\n//# sourceMappingURL=Observable.js.map","/**\n * @module ol/source/State\n */\n/**\n * @enum {string}\n * State of the source, one of 'undefined', 'loading', 'ready' or 'error'.\n */\nexport default {\n    UNDEFINED: 'undefined',\n    LOADING: 'loading',\n    READY: 'ready',\n    ERROR: 'error'\n};\n//# sourceMappingURL=State.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/Layer\n */\nimport { abstract } from '../util.js';\nimport ImageState from '../ImageState.js';\nimport Observable from '../Observable.js';\nimport EventType from '../events/EventType.js';\nimport SourceState from '../source/State.js';\n/**\n * @template {import(\"../layer/Layer.js\").default} LayerType\n */\nvar LayerRenderer = /** @class */ (function (_super) {\n    __extends(LayerRenderer, _super);\n    /**\n     * @param {LayerType} layer Layer.\n     */\n    function LayerRenderer(layer) {\n        var _this = _super.call(this) || this;\n        /** @private */\n        _this.boundHandleImageChange_ = _this.handleImageChange_.bind(_this);\n        /**\n         * @private\n         * @type {LayerType}\n         */\n        _this.layer_ = layer;\n        return _this;\n    }\n    /**\n     * Asynchronous layer level hit detection.\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @return {Promise<Array<import(\"../Feature\").default>>} Promise that resolves with\n     * an array of features.\n     */\n    LayerRenderer.prototype.getFeatures = function (pixel) {\n        return abstract();\n    };\n    /**\n     * Determine whether render should be called.\n     * @abstract\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @return {boolean} Layer is ready to be rendered.\n     */\n    LayerRenderer.prototype.prepareFrame = function (frameState) {\n        return abstract();\n    };\n    /**\n     * Render the layer.\n     * @abstract\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {HTMLElement} target Target that may be used to render content to.\n     * @return {HTMLElement} The rendered element.\n     */\n    LayerRenderer.prototype.renderFrame = function (frameState, target) {\n        return abstract();\n    };\n    /**\n     * @param {Object<number, Object<string, import(\"../Tile.js\").default>>} tiles Lookup of loaded tiles by zoom level.\n     * @param {number} zoom Zoom level.\n     * @param {import(\"../Tile.js\").default} tile Tile.\n     */\n    LayerRenderer.prototype.loadedTileCallback = function (tiles, zoom, tile) {\n        if (!tiles[zoom]) {\n            tiles[zoom] = {};\n        }\n        tiles[zoom][tile.tileCoord.toString()] = tile;\n    };\n    /**\n     * Create a function that adds loaded tiles to the tile lookup.\n     * @param {import(\"../source/Tile.js\").default} source Tile source.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection of the tiles.\n     * @param {Object<number, Object<string, import(\"../Tile.js\").default>>} tiles Lookup of loaded tiles by zoom level.\n     * @return {function(number, import(\"../TileRange.js\").default):boolean} A function that can be\n     *     called with a zoom level and a tile range to add loaded tiles to the lookup.\n     * @protected\n     */\n    LayerRenderer.prototype.createLoadedTileFinder = function (source, projection, tiles) {\n        return (\n        /**\n         * @param {number} zoom Zoom level.\n         * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n         * @return {boolean} The tile range is fully loaded.\n         * @this {LayerRenderer}\n         */\n        function (zoom, tileRange) {\n            var callback = this.loadedTileCallback.bind(this, tiles, zoom);\n            return source.forEachLoadedTile(projection, zoom, tileRange, callback);\n        }).bind(this);\n    };\n    /**\n     * @abstract\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {function(import(\"../Feature.js\").FeatureLike, import(\"../layer/Layer.js\").default): T} callback Feature callback.\n     * @param {Array<import(\"../Feature.js\").FeatureLike>} declutteredFeatures Decluttered features.\n     * @return {T|void} Callback result.\n     * @template T\n     */\n    LayerRenderer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, callback, declutteredFeatures) { };\n    /**\n     * @abstract\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @return {Uint8ClampedArray|Uint8Array} The result.  If there is no data at the pixel\n     *    location, null will be returned.  If there is data, but pixel values cannot be\n     *    returned, and empty array will be returned.\n     */\n    LayerRenderer.prototype.getDataAtPixel = function (pixel, frameState, hitTolerance) {\n        return abstract();\n    };\n    /**\n     * @return {LayerType} Layer.\n     */\n    LayerRenderer.prototype.getLayer = function () {\n        return this.layer_;\n    };\n    /**\n     * Perform action necessary to get the layer rendered after new fonts have loaded\n     * @abstract\n     */\n    LayerRenderer.prototype.handleFontsChanged = function () { };\n    /**\n     * Handle changes in image state.\n     * @param {import(\"../events/Event.js\").default} event Image change event.\n     * @private\n     */\n    LayerRenderer.prototype.handleImageChange_ = function (event) {\n        var image = /** @type {import(\"../Image.js\").default} */ (event.target);\n        if (image.getState() === ImageState.LOADED) {\n            this.renderIfReadyAndVisible();\n        }\n    };\n    /**\n     * Load the image if not already loaded, and register the image change\n     * listener if needed.\n     * @param {import(\"../ImageBase.js\").default} image Image.\n     * @return {boolean} `true` if the image is already loaded, `false` otherwise.\n     * @protected\n     */\n    LayerRenderer.prototype.loadImage = function (image) {\n        var imageState = image.getState();\n        if (imageState != ImageState.LOADED && imageState != ImageState.ERROR) {\n            image.addEventListener(EventType.CHANGE, this.boundHandleImageChange_);\n        }\n        if (imageState == ImageState.IDLE) {\n            image.load();\n            imageState = image.getState();\n        }\n        return imageState == ImageState.LOADED;\n    };\n    /**\n     * @protected\n     */\n    LayerRenderer.prototype.renderIfReadyAndVisible = function () {\n        var layer = this.getLayer();\n        if (layer.getVisible() && layer.getSourceState() == SourceState.READY) {\n            layer.changed();\n        }\n    };\n    return LayerRenderer;\n}(Observable));\nexport default LayerRenderer;\n//# sourceMappingURL=Layer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/webgl/Layer\n */\nimport LayerRenderer from '../Layer.js';\nimport WebGLHelper from '../../webgl/Helper.js';\n/**\n * @enum {string}\n */\nexport var WebGLWorkerMessageType = {\n    GENERATE_BUFFERS: 'GENERATE_BUFFERS'\n};\n/**\n * @typedef {Object} WebGLWorkerGenerateBuffersMessage\n * This message will trigger the generation of a vertex and an index buffer based on the given render instructions.\n * When the buffers are generated, the worked will send a message of the same type to the main thread, with\n * the generated buffers in it.\n * Note that any addition properties present in the message *will* be sent back to the main thread.\n * @property {WebGLWorkerMessageType} type Message type\n * @property {ArrayBuffer} renderInstructions Render instructions raw binary buffer.\n * @property {ArrayBuffer} [vertexBuffer] Vertices array raw binary buffer (sent by the worker).\n * @property {ArrayBuffer} [indexBuffer] Indices array raw binary buffer (sent by the worker).\n * @property {number} [customAttributesCount] Amount of custom attributes count in the render instructions.\n */\n/**\n * @typedef {Object} PostProcessesOptions\n * @property {number} [scaleRatio] Scale ratio; if < 1, the post process will render to a texture smaller than\n * the main canvas that will then be sampled up (useful for saving resource on blur steps).\n * @property {string} [vertexShader] Vertex shader source\n * @property {string} [fragmentShader] Fragment shader source\n * @property {Object.<string,import(\"../../webgl/Helper\").UniformValue>} [uniforms] Uniform definitions for the post process step\n */\n/**\n * @typedef {Object} Options\n * @property {Object.<string,import(\"../../webgl/Helper\").UniformValue>} [uniforms] Uniform definitions for the post process steps\n * @property {Array<PostProcessesOptions>} [postProcesses] Post-processes definitions\n */\n/**\n * @classdesc\n * Base WebGL renderer class.\n * Holds all logic related to data manipulation & some common rendering logic\n * @template {import(\"../../layer/Layer.js\").default} LayerType\n */\nvar WebGLLayerRenderer = /** @class */ (function (_super) {\n    __extends(WebGLLayerRenderer, _super);\n    /**\n     * @param {LayerType} layer Layer.\n     * @param {Options=} [opt_options] Options.\n     */\n    function WebGLLayerRenderer(layer, opt_options) {\n        var _this = _super.call(this, layer) || this;\n        var options = opt_options || {};\n        /**\n         * @type {WebGLHelper}\n         * @protected\n         */\n        _this.helper = new WebGLHelper({\n            postProcesses: options.postProcesses,\n            uniforms: options.uniforms\n        });\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    WebGLLayerRenderer.prototype.disposeInternal = function () {\n        this.helper.dispose();\n        _super.prototype.disposeInternal.call(this);\n    };\n    /**\n     * Will return the last shader compilation errors. If no error happened, will return null;\n     * @return {string|null} Errors, or null if last compilation was successful\n     * @api\n     */\n    WebGLLayerRenderer.prototype.getShaderCompileErrors = function () {\n        return this.helper.getShaderCompileErrors();\n    };\n    return WebGLLayerRenderer;\n}(LayerRenderer));\nvar tmpArray_ = [];\nvar bufferPositions_ = { vertexPosition: 0, indexPosition: 0 };\nfunction writePointVertex(buffer, pos, x, y, index) {\n    buffer[pos + 0] = x;\n    buffer[pos + 1] = y;\n    buffer[pos + 2] = index;\n}\n/**\n * An object holding positions both in an index and a vertex buffer.\n * @typedef {Object} BufferPositions\n * @property {number} vertexPosition Position in the vertex buffer\n * @property {number} indexPosition Position in the index buffer\n */\n/**\n * Pushes a quad (two triangles) based on a point geometry\n * @param {Float32Array} instructions Array of render instructions for points.\n * @param {number} elementIndex Index from which render instructions will be read.\n * @param {Float32Array} vertexBuffer Buffer in the form of a typed array.\n * @param {Uint32Array} indexBuffer Buffer in the form of a typed array.\n * @param {number} customAttributesCount Amount of custom attributes for each element.\n * @param {BufferPositions} [bufferPositions] Buffer write positions; if not specified, positions will be set at 0.\n * @return {BufferPositions} New buffer positions where to write next\n * @property {number} vertexPosition New position in the vertex buffer where future writes should start.\n * @property {number} indexPosition New position in the index buffer where future writes should start.\n * @private\n */\nexport function writePointFeatureToBuffers(instructions, elementIndex, vertexBuffer, indexBuffer, customAttributesCount, bufferPositions) {\n    // This is for x, y and index\n    var baseVertexAttrsCount = 3;\n    var baseInstructionsCount = 2;\n    var stride = baseVertexAttrsCount + customAttributesCount;\n    var x = instructions[elementIndex + 0];\n    var y = instructions[elementIndex + 1];\n    // read custom numerical attributes on the feature\n    var customAttrs = tmpArray_;\n    customAttrs.length = customAttributesCount;\n    for (var i = 0; i < customAttrs.length; i++) {\n        customAttrs[i] = instructions[elementIndex + baseInstructionsCount + i];\n    }\n    var vPos = bufferPositions ? bufferPositions.vertexPosition : 0;\n    var iPos = bufferPositions ? bufferPositions.indexPosition : 0;\n    var baseIndex = vPos / stride;\n    // push vertices for each of the four quad corners (first standard then custom attributes)\n    writePointVertex(vertexBuffer, vPos, x, y, 0);\n    customAttrs.length && vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n    vPos += stride;\n    writePointVertex(vertexBuffer, vPos, x, y, 1);\n    customAttrs.length && vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n    vPos += stride;\n    writePointVertex(vertexBuffer, vPos, x, y, 2);\n    customAttrs.length && vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n    vPos += stride;\n    writePointVertex(vertexBuffer, vPos, x, y, 3);\n    customAttrs.length && vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n    vPos += stride;\n    indexBuffer[iPos++] = baseIndex;\n    indexBuffer[iPos++] = baseIndex + 1;\n    indexBuffer[iPos++] = baseIndex + 3;\n    indexBuffer[iPos++] = baseIndex + 1;\n    indexBuffer[iPos++] = baseIndex + 2;\n    indexBuffer[iPos++] = baseIndex + 3;\n    bufferPositions_.vertexPosition = vPos;\n    bufferPositions_.indexPosition = iPos;\n    return bufferPositions_;\n}\n/**\n * Returns a texture of 1x1 pixel, white\n * @private\n * @return {ImageData} Image data.\n */\nexport function getBlankImageData() {\n    var canvas = document.createElement('canvas');\n    var image = canvas.getContext('2d').createImageData(1, 1);\n    image.data[0] = 255;\n    image.data[1] = 255;\n    image.data[2] = 255;\n    image.data[3] = 255;\n    return image;\n}\n/**\n * Generates a color array based on a numerical id\n * Note: the range for each component is 0 to 1 with 256 steps\n * @param {number} id Id\n * @param {Array<number>} [opt_array] Reusable array\n * @return {Array<number>} Color array containing the encoded id\n */\nexport function colorEncodeId(id, opt_array) {\n    var array = opt_array || [];\n    var radix = 256;\n    var divide = radix - 1;\n    array[0] = Math.floor(id / radix / radix / radix) / divide;\n    array[1] = (Math.floor(id / radix / radix) % radix) / divide;\n    array[2] = (Math.floor(id / radix) % radix) / divide;\n    array[3] = (id % radix) / divide;\n    return array;\n}\n/**\n * Reads an id from a color-encoded array\n * Note: the expected range for each component is 0 to 1 with 256 steps.\n * @param {Array<number>} color Color array containing the encoded id\n * @return {number} Decoded id\n */\nexport function colorDecodeId(color) {\n    var id = 0;\n    var radix = 256;\n    var mult = radix - 1;\n    id += Math.round(color[0] * radix * radix * radix * mult);\n    id += Math.round(color[1] * radix * radix * mult);\n    id += Math.round(color[2] * radix * mult);\n    id += Math.round(color[3] * mult);\n    return id;\n}\nexport default WebGLLayerRenderer;\n//# sourceMappingURL=Layer.js.map","/**\n * @module ol/ViewHint\n */\n/**\n * @enum {number}\n */\nexport default {\n    ANIMATING: 0,\n    INTERACTING: 1\n};\n//# sourceMappingURL=ViewHint.js.map","var source = \"var e=\\\"function\\\"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError(\\\"Cannot convert undefined or null to object\\\");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n=\\\"GENERATE_BUFFERS\\\",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,u){var a=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=u?u.vertexPosition:0,h=u?u.indexPosition:0,d=b/a;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=a,l,v,1),c.length&&i.set(c,b+3),o(i,b+=a,l,v,2),c.length&&i.set(c,b+3),o(i,b+=a,l,v,3),c.length&&i.set(c,b+3),b+=a,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o=r.customAttributesCount,s=2+o,u=new Float32Array(r.renderInstructions),a=u.length/s,l=4*a*(o+3),v=new Uint32Array(6*a),c=new Float32Array(l),g=null,b=0;b<u.length;b+=s)g=i(u,b,c,v,o,g);var h=e({vertexBuffer:c.buffer,indexBuffer:v.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[c.buffer,v.buffer,u.buffer])}};\";\nvar blob = new Blob([source], { type: 'application/javascript' });\nvar url = URL.createObjectURL(blob);\nexport function create() {\n    return new Worker(url);\n}\n//# sourceMappingURL=webgl.js.map","/**\n * A wrapper class to simplify rendering to a texture instead of the final canvas\n * @module ol/webgl/RenderTarget\n */\nimport { equals } from '../array.js';\n// for pixel color reading\nvar tmpArray4 = new Uint8Array(4);\n/**\n * @classdesc\n * This class is a wrapper around the association of both a `WebGLTexture` and a `WebGLFramebuffer` instances,\n * simplifying initialization and binding for rendering.\n * @api\n */\nvar WebGLRenderTarget = /** @class */ (function () {\n    /**\n     * @param {import(\"./Helper.js\").default} helper WebGL helper; mandatory.\n     * @param {Array<number>} [opt_size] Expected size of the render target texture; note: this can be changed later on.\n     */\n    function WebGLRenderTarget(helper, opt_size) {\n        /**\n         * @private\n         * @type {import(\"./Helper.js\").default}\n         */\n        this.helper_ = helper;\n        var gl = helper.getGL();\n        /**\n         * @private\n         * @type {WebGLTexture}\n         */\n        this.texture_ = gl.createTexture();\n        /**\n         * @private\n         * @type {WebGLFramebuffer}\n         */\n        this.framebuffer_ = gl.createFramebuffer();\n        /**\n         * @type {Array<number>}\n         * @private\n         */\n        this.size_ = opt_size || [1, 1];\n        /**\n         * @type {Uint8Array}\n         * @private\n         */\n        this.data_ = new Uint8Array(0);\n        /**\n         * @type {boolean}\n         * @private\n         */\n        this.dataCacheDirty_ = true;\n        this.updateSize_();\n    }\n    /**\n     * Changes the size of the render target texture. Note: will do nothing if the size\n     * is already the same.\n     * @param {Array<number>} size Expected size of the render target texture\n     * @api\n     */\n    WebGLRenderTarget.prototype.setSize = function (size) {\n        if (equals(size, this.size_)) {\n            return;\n        }\n        this.size_[0] = size[0];\n        this.size_[1] = size[1];\n        this.updateSize_();\n    };\n    /**\n     * Returns the size of the render target texture\n     * @return {Array<number>} Size of the render target texture\n     * @api\n     */\n    WebGLRenderTarget.prototype.getSize = function () {\n        return this.size_;\n    };\n    /**\n     * This will cause following calls to `#readAll` or `#readPixel` to download the content of the\n     * render target into memory, which is an expensive operation.\n     * This content will be kept in cache but should be cleared after each new render.\n     * @api\n     */\n    WebGLRenderTarget.prototype.clearCachedData = function () {\n        this.dataCacheDirty_ = true;\n    };\n    /**\n     * Returns the full content of the frame buffer as a series of r, g, b, a components\n     * in the 0-255 range (unsigned byte).\n     * @return {Uint8Array} Integer array of color values\n     * @api\n     */\n    WebGLRenderTarget.prototype.readAll = function () {\n        if (this.dataCacheDirty_) {\n            var size = this.size_;\n            var gl = this.helper_.getGL();\n            gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer_);\n            gl.readPixels(0, 0, size[0], size[1], gl.RGBA, gl.UNSIGNED_BYTE, this.data_);\n            this.dataCacheDirty_ = false;\n        }\n        return this.data_;\n    };\n    /**\n     * Reads one pixel of the frame buffer as an array of r, g, b, a components\n     * in the 0-255 range (unsigned byte).\n     * If x and/or y are outside of existing data, an array filled with 0 is returned.\n     * @param {number} x Pixel coordinate\n     * @param {number} y Pixel coordinate\n     * @returns {Uint8Array} Integer array with one color value (4 components)\n     * @api\n     */\n    WebGLRenderTarget.prototype.readPixel = function (x, y) {\n        if (x < 0 || y < 0 || x > this.size_[0] || y >= this.size_[1]) {\n            tmpArray4[0] = 0;\n            tmpArray4[1] = 0;\n            tmpArray4[2] = 0;\n            tmpArray4[3] = 0;\n            return tmpArray4;\n        }\n        this.readAll();\n        var index = Math.floor(x) + (this.size_[1] - Math.floor(y) - 1) * this.size_[0];\n        tmpArray4[0] = this.data_[index * 4];\n        tmpArray4[1] = this.data_[index * 4 + 1];\n        tmpArray4[2] = this.data_[index * 4 + 2];\n        tmpArray4[3] = this.data_[index * 4 + 3];\n        return tmpArray4;\n    };\n    /**\n     * @return {WebGLTexture} Texture to render to\n     */\n    WebGLRenderTarget.prototype.getTexture = function () {\n        return this.texture_;\n    };\n    /**\n     * @return {WebGLFramebuffer} Frame buffer of the render target\n     */\n    WebGLRenderTarget.prototype.getFramebuffer = function () {\n        return this.framebuffer_;\n    };\n    /**\n     * @private\n     */\n    WebGLRenderTarget.prototype.updateSize_ = function () {\n        var size = this.size_;\n        var gl = this.helper_.getGL();\n        this.texture_ = this.helper_.createTexture(size, null, this.texture_);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer_);\n        gl.viewport(0, 0, size[0], size[1]);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.texture_, 0);\n        this.data_ = new Uint8Array(size[0] * size[1] * 4);\n    };\n    return WebGLRenderTarget;\n}());\nexport default WebGLRenderTarget;\n//# sourceMappingURL=RenderTarget.js.map","/**\n * @module ol/ObjectEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when a property is changed.\n     * @event module:ol/Object.ObjectEvent#propertychange\n     * @api\n     */\n    PROPERTYCHANGE: 'propertychange'\n};\n//# sourceMappingURL=ObjectEventType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Object\n */\nimport { getUid } from './util.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport Observable from './Observable.js';\nimport Event from './events/Event.js';\nimport { assign } from './obj.js';\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Object~BaseObject} instances are instances of this type.\n */\nvar ObjectEvent = /** @class */ (function (_super) {\n    __extends(ObjectEvent, _super);\n    /**\n     * @param {string} type The event type.\n     * @param {string} key The property name.\n     * @param {*} oldValue The old value for `key`.\n     */\n    function ObjectEvent(type, key, oldValue) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The name of the property whose value is changing.\n         * @type {string}\n         * @api\n         */\n        _this.key = key;\n        /**\n         * The old value. To get the new value use `e.target.get(e.key)` where\n         * `e` is the event object.\n         * @type {*}\n         * @api\n         */\n        _this.oldValue = oldValue;\n        return _this;\n    }\n    return ObjectEvent;\n}(Event));\nexport { ObjectEvent };\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Most non-trivial classes inherit from this.\n *\n * This extends {@link module:ol/Observable} with observable\n * properties, where each property is observable as well as the object as a\n * whole.\n *\n * Classes that inherit from this have pre-defined properties, to which you can\n * add your owns. The pre-defined properties are listed in this documentation as\n * 'Observable Properties', and have their own accessors; for example,\n * {@link module:ol/Map~Map} has a `target` property, accessed with\n * `getTarget()` and changed with `setTarget()`. Not all properties are however\n * settable. There are also general-purpose accessors `get()` and `set()`. For\n * example, `get('target')` is equivalent to `getTarget()`.\n *\n * The `set` accessors trigger a change event, and you can monitor this by\n * registering a listener. For example, {@link module:ol/View~View} has a\n * `center` property, so `view.on('change:center', function(evt) {...});` would\n * call the function whenever the value of the center property changes. Within\n * the function, `evt.target` would be the view, so `evt.target.getCenter()`\n * would return the new center.\n *\n * You can add your own observable properties with\n * `object.set('prop', 'value')`, and retrieve that with `object.get('prop')`.\n * You can listen for changes on that property value with\n * `object.on('change:prop', listener)`. You can get a list of all\n * properties with {@link module:ol/Object~BaseObject#getProperties}.\n *\n * Note that the observable properties are separate from standard JS properties.\n * You can, for example, give your map object a title with\n * `map.title='New title'` and with `map.set('title', 'Another title')`. The\n * first will be a `hasOwnProperty`; the second will appear in\n * `getProperties()`. Only the second is observable.\n *\n * Properties can be deleted by using the unset method. E.g.\n * object.unset('foo').\n *\n * @fires ObjectEvent\n * @api\n */\nvar BaseObject = /** @class */ (function (_super) {\n    __extends(BaseObject, _super);\n    /**\n     * @param {Object<string, *>=} opt_values An object with key-value pairs.\n     */\n    function BaseObject(opt_values) {\n        var _this = _super.call(this) || this;\n        // Call {@link module:ol/util~getUid} to ensure that the order of objects' ids is\n        // the same as the order in which they were created.  This also helps to\n        // ensure that object properties are always added in the same order, which\n        // helps many JavaScript engines generate faster code.\n        getUid(_this);\n        /**\n         * @private\n         * @type {!Object<string, *>}\n         */\n        _this.values_ = {};\n        if (opt_values !== undefined) {\n            _this.setProperties(opt_values);\n        }\n        return _this;\n    }\n    /**\n     * Gets a value.\n     * @param {string} key Key name.\n     * @return {*} Value.\n     * @api\n     */\n    BaseObject.prototype.get = function (key) {\n        var value;\n        if (this.values_.hasOwnProperty(key)) {\n            value = this.values_[key];\n        }\n        return value;\n    };\n    /**\n     * Get a list of object property names.\n     * @return {Array<string>} List of property names.\n     * @api\n     */\n    BaseObject.prototype.getKeys = function () {\n        return Object.keys(this.values_);\n    };\n    /**\n     * Get an object of all property names and values.\n     * @return {Object<string, *>} Object.\n     * @api\n     */\n    BaseObject.prototype.getProperties = function () {\n        return assign({}, this.values_);\n    };\n    /**\n     * @param {string} key Key name.\n     * @param {*} oldValue Old value.\n     */\n    BaseObject.prototype.notify = function (key, oldValue) {\n        var eventType;\n        eventType = getChangeEventType(key);\n        this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n        eventType = ObjectEventType.PROPERTYCHANGE;\n        this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n    };\n    /**\n     * Sets a value.\n     * @param {string} key Key name.\n     * @param {*} value Value.\n     * @param {boolean=} opt_silent Update without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.set = function (key, value, opt_silent) {\n        if (opt_silent) {\n            this.values_[key] = value;\n        }\n        else {\n            var oldValue = this.values_[key];\n            this.values_[key] = value;\n            if (oldValue !== value) {\n                this.notify(key, oldValue);\n            }\n        }\n    };\n    /**\n     * Sets a collection of key-value pairs.  Note that this changes any existing\n     * properties and adds new ones (it does not remove any existing properties).\n     * @param {Object<string, *>} values Values.\n     * @param {boolean=} opt_silent Update without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.setProperties = function (values, opt_silent) {\n        for (var key in values) {\n            this.set(key, values[key], opt_silent);\n        }\n    };\n    /**\n     * Unsets a property.\n     * @param {string} key Key name.\n     * @param {boolean=} opt_silent Unset without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.unset = function (key, opt_silent) {\n        if (key in this.values_) {\n            var oldValue = this.values_[key];\n            delete this.values_[key];\n            if (!opt_silent) {\n                this.notify(key, oldValue);\n            }\n        }\n    };\n    return BaseObject;\n}(Observable));\n/**\n * @type {Object<string, string>}\n */\nvar changeEventTypeCache = {};\n/**\n * @param {string} key Key name.\n * @return {string} Change name.\n */\nexport function getChangeEventType(key) {\n    return changeEventTypeCache.hasOwnProperty(key) ?\n        changeEventTypeCache[key] :\n        (changeEventTypeCache[key] = 'change:' + key);\n}\nexport default BaseObject;\n//# sourceMappingURL=Object.js.map","/**\n * @module ol/layer/Property\n */\n/**\n * @enum {string}\n */\nexport default {\n    OPACITY: 'opacity',\n    VISIBLE: 'visible',\n    EXTENT: 'extent',\n    Z_INDEX: 'zIndex',\n    MAX_RESOLUTION: 'maxResolution',\n    MIN_RESOLUTION: 'minResolution',\n    MAX_ZOOM: 'maxZoom',\n    MIN_ZOOM: 'minZoom',\n    SOURCE: 'source'\n};\n//# sourceMappingURL=Property.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Base\n */\nimport { abstract } from '../util.js';\nimport BaseObject from '../Object.js';\nimport LayerProperty from './Property.js';\nimport { clamp } from '../math.js';\nimport { assign } from '../obj.js';\nimport { assert } from '../asserts.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Note that with {@link module:ol/layer/Base} and all its subclasses, any property set in\n * the options is set as a {@link module:ol/Object} property on the layer object, so\n * is observable, and has get/set accessors.\n *\n * @api\n */\nvar BaseLayer = /** @class */ (function (_super) {\n    __extends(BaseLayer, _super);\n    /**\n     * @param {Options} options Layer options.\n     */\n    function BaseLayer(options) {\n        var _this = _super.call(this) || this;\n        /**\n         * @type {Object<string, *>}\n         */\n        var properties = assign({}, options);\n        properties[LayerProperty.OPACITY] =\n            options.opacity !== undefined ? options.opacity : 1;\n        assert(typeof properties[LayerProperty.OPACITY] === 'number', 64); // Layer opacity must be a number\n        properties[LayerProperty.VISIBLE] =\n            options.visible !== undefined ? options.visible : true;\n        properties[LayerProperty.Z_INDEX] = options.zIndex;\n        properties[LayerProperty.MAX_RESOLUTION] =\n            options.maxResolution !== undefined ? options.maxResolution : Infinity;\n        properties[LayerProperty.MIN_RESOLUTION] =\n            options.minResolution !== undefined ? options.minResolution : 0;\n        properties[LayerProperty.MIN_ZOOM] =\n            options.minZoom !== undefined ? options.minZoom : -Infinity;\n        properties[LayerProperty.MAX_ZOOM] =\n            options.maxZoom !== undefined ? options.maxZoom : Infinity;\n        /**\n         * @type {string}\n         * @private\n         */\n        _this.className_ = properties.className !== undefined ? options.className : 'ol-layer';\n        delete properties.className;\n        _this.setProperties(properties);\n        /**\n         * @type {import(\"./Layer.js\").State}\n         * @private\n         */\n        _this.state_ = null;\n        return _this;\n    }\n    /**\n     * @return {string} CSS class name.\n     */\n    BaseLayer.prototype.getClassName = function () {\n        return this.className_;\n    };\n    /**\n     * This method is not meant to be called by layers or layer renderers because the state\n     * is incorrect if the layer is included in a layer group.\n     *\n     * @param {boolean=} opt_managed Layer is managed.\n     * @return {import(\"./Layer.js\").State} Layer state.\n     */\n    BaseLayer.prototype.getLayerState = function (opt_managed) {\n        /** @type {import(\"./Layer.js\").State} */\n        var state = this.state_ || /** @type {?} */ ({\n            layer: this,\n            managed: opt_managed === undefined ? true : opt_managed\n        });\n        var zIndex = this.getZIndex();\n        state.opacity = clamp(Math.round(this.getOpacity() * 100) / 100, 0, 1);\n        state.sourceState = this.getSourceState();\n        state.visible = this.getVisible();\n        state.extent = this.getExtent();\n        state.zIndex = zIndex !== undefined ? zIndex : (state.managed === false ? Infinity : 0);\n        state.maxResolution = this.getMaxResolution();\n        state.minResolution = Math.max(this.getMinResolution(), 0);\n        state.minZoom = this.getMinZoom();\n        state.maxZoom = this.getMaxZoom();\n        this.state_ = state;\n        return state;\n    };\n    /**\n     * @abstract\n     * @param {Array<import(\"./Layer.js\").default>=} opt_array Array of layers (to be\n     *     modified in place).\n     * @return {Array<import(\"./Layer.js\").default>} Array of layers.\n     */\n    BaseLayer.prototype.getLayersArray = function (opt_array) {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @param {Array<import(\"./Layer.js\").State>=} opt_states Optional list of layer\n     *     states (to be modified in place).\n     * @return {Array<import(\"./Layer.js\").State>} List of layer states.\n     */\n    BaseLayer.prototype.getLayerStatesArray = function (opt_states) {\n        return abstract();\n    };\n    /**\n     * Return the {@link module:ol/extent~Extent extent} of the layer or `undefined` if it\n     * will be visible regardless of extent.\n     * @return {import(\"../extent.js\").Extent|undefined} The layer extent.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getExtent = function () {\n        return (\n        /** @type {import(\"../extent.js\").Extent|undefined} */ (this.get(LayerProperty.EXTENT)));\n    };\n    /**\n     * Return the maximum resolution of the layer.\n     * @return {number} The maximum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMaxResolution = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MAX_RESOLUTION));\n    };\n    /**\n     * Return the minimum resolution of the layer.\n     * @return {number} The minimum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMinResolution = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MIN_RESOLUTION));\n    };\n    /**\n     * Return the minimum zoom level of the layer.\n     * @return {number} The minimum zoom level of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMinZoom = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MIN_ZOOM));\n    };\n    /**\n     * Return the maximum zoom level of the layer.\n     * @return {number} The maximum zoom level of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMaxZoom = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MAX_ZOOM));\n    };\n    /**\n     * Return the opacity of the layer (between 0 and 1).\n     * @return {number} The opacity of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getOpacity = function () {\n        return /** @type {number} */ (this.get(LayerProperty.OPACITY));\n    };\n    /**\n     * @abstract\n     * @return {import(\"../source/State.js\").default} Source state.\n     */\n    BaseLayer.prototype.getSourceState = function () {\n        return abstract();\n    };\n    /**\n     * Return the visibility of the layer (`true` or `false`).\n     * @return {boolean} The visibility of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getVisible = function () {\n        return /** @type {boolean} */ (this.get(LayerProperty.VISIBLE));\n    };\n    /**\n     * Return the Z-index of the layer, which is used to order layers before\n     * rendering. The default Z-index is 0.\n     * @return {number} The Z-index of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getZIndex = function () {\n        return /** @type {number} */ (this.get(LayerProperty.Z_INDEX));\n    };\n    /**\n     * Set the extent at which the layer is visible.  If `undefined`, the layer\n     * will be visible at all extents.\n     * @param {import(\"../extent.js\").Extent|undefined} extent The extent of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setExtent = function (extent) {\n        this.set(LayerProperty.EXTENT, extent);\n    };\n    /**\n     * Set the maximum resolution at which the layer is visible.\n     * @param {number} maxResolution The maximum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMaxResolution = function (maxResolution) {\n        this.set(LayerProperty.MAX_RESOLUTION, maxResolution);\n    };\n    /**\n     * Set the minimum resolution at which the layer is visible.\n     * @param {number} minResolution The minimum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMinResolution = function (minResolution) {\n        this.set(LayerProperty.MIN_RESOLUTION, minResolution);\n    };\n    /**\n     * Set the maximum zoom (exclusive) at which the layer is visible.\n     * Note that the zoom levels for layer visibility are based on the\n     * view zoom level, which may be different from a tile source zoom level.\n     * @param {number} maxZoom The maximum zoom of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMaxZoom = function (maxZoom) {\n        this.set(LayerProperty.MAX_ZOOM, maxZoom);\n    };\n    /**\n     * Set the minimum zoom (inclusive) at which the layer is visible.\n     * Note that the zoom levels for layer visibility are based on the\n     * view zoom level, which may be different from a tile source zoom level.\n     * @param {number} minZoom The minimum zoom of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMinZoom = function (minZoom) {\n        this.set(LayerProperty.MIN_ZOOM, minZoom);\n    };\n    /**\n     * Set the opacity of the layer, allowed values range from 0 to 1.\n     * @param {number} opacity The opacity of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setOpacity = function (opacity) {\n        assert(typeof opacity === 'number', 64); // Layer opacity must be a number\n        this.set(LayerProperty.OPACITY, opacity);\n    };\n    /**\n     * Set the visibility of the layer (`true` or `false`).\n     * @param {boolean} visible The visibility of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setVisible = function (visible) {\n        this.set(LayerProperty.VISIBLE, visible);\n    };\n    /**\n     * Set Z-index of the layer, which is used to order layers before rendering.\n     * The default Z-index is 0.\n     * @param {number} zindex The z-index of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setZIndex = function (zindex) {\n        this.set(LayerProperty.Z_INDEX, zindex);\n    };\n    /**\n     * @inheritDoc\n     */\n    BaseLayer.prototype.disposeInternal = function () {\n        if (this.state_) {\n            this.state_.layer = null;\n            this.state_ = null;\n        }\n        _super.prototype.disposeInternal.call(this);\n    };\n    return BaseLayer;\n}(BaseObject));\nexport default BaseLayer;\n//# sourceMappingURL=Base.js.map","/**\n * @module ol/render/EventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered before a layer is rendered.\n     * @event module:ol/render/Event~RenderEvent#prerender\n     * @api\n     */\n    PRERENDER: 'prerender',\n    /**\n     * Triggered after a layer is rendered.\n     * @event module:ol/render/Event~RenderEvent#postrender\n     * @api\n     */\n    POSTRENDER: 'postrender',\n    /**\n     * Triggered before layers are rendered.\n     * The event object will not have a `context` set.\n     * @event module:ol/render/Event~RenderEvent#precompose\n     * @api\n     */\n    PRECOMPOSE: 'precompose',\n    /**\n     * Triggered after all layers are rendered.\n     * The event object will not have a `context` set.\n     * @event module:ol/render/Event~RenderEvent#postcompose\n     * @api\n     */\n    POSTCOMPOSE: 'postcompose',\n    /**\n     * Triggered when rendering is complete, i.e. all sources and tiles have\n     * finished loading for the current viewport, and all tiles are faded in.\n     * The event object will not have a `context` set.\n     * @event module:ol/render/Event~RenderEvent#rendercomplete\n     * @api\n     */\n    RENDERCOMPLETE: 'rendercomplete'\n};\n//# sourceMappingURL=EventType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Layer\n */\nimport { listen, unlistenByKey } from '../events.js';\nimport EventType from '../events/EventType.js';\nimport { getChangeEventType } from '../Object.js';\nimport BaseLayer from './Base.js';\nimport LayerProperty from './Property.js';\nimport { assign } from '../obj.js';\nimport RenderEventType from '../render/EventType.js';\nimport SourceState from '../source/State.js';\nimport { assert } from '../asserts.js';\n/**\n * @typedef {function(import(\"../PluggableMap.js\").FrameState):HTMLElement} RenderFunction\n */\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../source/Source.js\").default} [source] Source for this layer.  If not provided to the constructor,\n * the source can be set by calling {@link module:ol/layer/Layer#setSource layer.setSource(source)} after\n * construction.\n * @property {import(\"../PluggableMap.js\").default} [map] Map.\n * @property {RenderFunction} [render] Render function. Takes the frame state as input and is expected to return an\n * HTML element. Will overwrite the default rendering for the layer.\n */\n/**\n * @typedef {Object} State\n * @property {import(\"./Base.js\").default} layer\n * @property {number} opacity Opacity, the value is rounded to two digits to appear after the decimal point.\n * @property {SourceState} sourceState\n * @property {boolean} visible\n * @property {boolean} managed\n * @property {import(\"../extent.js\").Extent} [extent]\n * @property {number} zIndex\n * @property {number} maxResolution\n * @property {number} minResolution\n * @property {number} minZoom\n * @property {number} maxZoom\n */\n/**\n * @classdesc\n * Base class from which all layer types are derived. This should only be instantiated\n * in the case where a custom layer is be added to the map with a custom `render` function.\n * Such a function can be specified in the `options` object, and is expected to return an HTML element.\n *\n * A visual representation of raster or vector map data.\n * Layers group together those properties that pertain to how the data is to be\n * displayed, irrespective of the source of that data.\n *\n * Layers are usually added to a map with {@link module:ol/Map#addLayer}. Components\n * like {@link module:ol/interaction/Select~Select} use unmanaged layers\n * internally. These unmanaged layers are associated with the map using\n * {@link module:ol/layer/Layer~Layer#setMap} instead.\n *\n * A generic `change` event is fired when the state of the source changes.\n *\n * Please note that for performance reasons several layers might get rendered to\n * the same HTML element, which will cause {@link module:ol/Map~Map#forEachLayerAtPixel} to\n * give false positives. To avoid this, apply different `className` properties to the\n * layers at creation time.\n *\n * @fires import(\"../render/Event.js\").RenderEvent#prerender\n * @fires import(\"../render/Event.js\").RenderEvent#postrender\n *\n * @template {import(\"../source/Source.js\").default} SourceType\n * @api\n */\nvar Layer = /** @class */ (function (_super) {\n    __extends(Layer, _super);\n    /**\n     * @param {Options} options Layer options.\n     */\n    function Layer(options) {\n        var _this = this;\n        var baseOptions = assign({}, options);\n        delete baseOptions.source;\n        _this = _super.call(this, baseOptions) || this;\n        /**\n         * @private\n         * @type {?import(\"../events.js\").EventsKey}\n         */\n        _this.mapPrecomposeKey_ = null;\n        /**\n         * @private\n         * @type {?import(\"../events.js\").EventsKey}\n         */\n        _this.mapRenderKey_ = null;\n        /**\n         * @private\n         * @type {?import(\"../events.js\").EventsKey}\n         */\n        _this.sourceChangeKey_ = null;\n        /**\n         * @private\n         * @type {import(\"../renderer/Layer.js\").default}\n         */\n        _this.renderer_ = null;\n        // Overwrite default render method with a custom one\n        if (options.render) {\n            _this.render = options.render;\n        }\n        if (options.map) {\n            _this.setMap(options.map);\n        }\n        _this.addEventListener(getChangeEventType(LayerProperty.SOURCE), _this.handleSourcePropertyChange_);\n        var source = options.source ? /** @type {SourceType} */ (options.source) : null;\n        _this.setSource(source);\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    Layer.prototype.getLayersArray = function (opt_array) {\n        var array = opt_array ? opt_array : [];\n        array.push(this);\n        return array;\n    };\n    /**\n     * @inheritDoc\n     */\n    Layer.prototype.getLayerStatesArray = function (opt_states) {\n        var states = opt_states ? opt_states : [];\n        states.push(this.getLayerState());\n        return states;\n    };\n    /**\n     * Get the layer source.\n     * @return {SourceType} The layer source (or `null` if not yet set).\n     * @observable\n     * @api\n     */\n    Layer.prototype.getSource = function () {\n        return /** @type {SourceType} */ (this.get(LayerProperty.SOURCE)) || null;\n    };\n    /**\n      * @inheritDoc\n      */\n    Layer.prototype.getSourceState = function () {\n        var source = this.getSource();\n        return !source ? SourceState.UNDEFINED : source.getState();\n    };\n    /**\n     * @private\n     */\n    Layer.prototype.handleSourceChange_ = function () {\n        this.changed();\n    };\n    /**\n     * @private\n     */\n    Layer.prototype.handleSourcePropertyChange_ = function () {\n        if (this.sourceChangeKey_) {\n            unlistenByKey(this.sourceChangeKey_);\n            this.sourceChangeKey_ = null;\n        }\n        var source = this.getSource();\n        if (source) {\n            this.sourceChangeKey_ = listen(source, EventType.CHANGE, this.handleSourceChange_, this);\n        }\n        this.changed();\n    };\n    /**\n     * @param {import(\"../pixel\").Pixel} pixel Pixel.\n     * @return {Promise<Array<import(\"../Feature\").default>>} Promise that resolves with\n     * an array of features.\n     */\n    Layer.prototype.getFeatures = function (pixel) {\n        return this.renderer_.getFeatures(pixel);\n    };\n    /**\n     * In charge to manage the rendering of the layer. One layer type is\n     * bounded with one layer renderer.\n     * @param {?import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {HTMLElement} target Target which the renderer may (but need not) use\n     * for rendering its content.\n     * @return {HTMLElement} The rendered element.\n     */\n    Layer.prototype.render = function (frameState, target) {\n        var layerRenderer = this.getRenderer();\n        if (layerRenderer.prepareFrame(frameState)) {\n            return layerRenderer.renderFrame(frameState, target);\n        }\n    };\n    /**\n     * Sets the layer to be rendered on top of other layers on a map. The map will\n     * not manage this layer in its layers collection, and the callback in\n     * {@link module:ol/Map#forEachLayerAtPixel} will receive `null` as layer. This\n     * is useful for temporary layers. To remove an unmanaged layer from the map,\n     * use `#setMap(null)`.\n     *\n     * To add the layer to a map and have it managed by the map, use\n     * {@link module:ol/Map#addLayer} instead.\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     * @api\n     */\n    Layer.prototype.setMap = function (map) {\n        if (this.mapPrecomposeKey_) {\n            unlistenByKey(this.mapPrecomposeKey_);\n            this.mapPrecomposeKey_ = null;\n        }\n        if (!map) {\n            this.changed();\n        }\n        if (this.mapRenderKey_) {\n            unlistenByKey(this.mapRenderKey_);\n            this.mapRenderKey_ = null;\n        }\n        if (map) {\n            this.mapPrecomposeKey_ = listen(map, RenderEventType.PRECOMPOSE, function (evt) {\n                var renderEvent = /** @type {import(\"../render/Event.js\").default} */ (evt);\n                var layerStatesArray = renderEvent.frameState.layerStatesArray;\n                var layerState = this.getLayerState(false);\n                // A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both.\n                assert(!layerStatesArray.some(function (arrayLayerState) {\n                    return arrayLayerState.layer === layerState.layer;\n                }), 67);\n                layerStatesArray.push(layerState);\n            }, this);\n            this.mapRenderKey_ = listen(this, EventType.CHANGE, map.render, map);\n            this.changed();\n        }\n    };\n    /**\n     * Set the layer source.\n     * @param {SourceType} source The layer source.\n     * @observable\n     * @api\n     */\n    Layer.prototype.setSource = function (source) {\n        this.set(LayerProperty.SOURCE, source);\n    };\n    /**\n     * Get the renderer for this layer.\n     * @return {import(\"../renderer/Layer.js\").default} The layer renderer.\n     */\n    Layer.prototype.getRenderer = function () {\n        if (!this.renderer_) {\n            this.renderer_ = this.createRenderer();\n        }\n        return this.renderer_;\n    };\n    /**\n     * @return {boolean} The layer has a renderer.\n     */\n    Layer.prototype.hasRenderer = function () {\n        return !!this.renderer_;\n    };\n    /**\n     * Create a renderer for this layer.\n     * @return {import(\"../renderer/Layer.js\").default} A layer renderer.\n     * @protected\n     */\n    Layer.prototype.createRenderer = function () {\n        return null;\n    };\n    /**\n     * @inheritDoc\n     */\n    Layer.prototype.disposeInternal = function () {\n        this.setSource(null);\n        _super.prototype.disposeInternal.call(this);\n    };\n    return Layer;\n}(BaseLayer));\n/**\n * Return `true` if the layer is visible and if the provided view state\n * has resolution and zoom levels that are in range of the layer's min/max.\n * @param {State} layerState Layer state.\n * @param {import(\"../View.js\").State} viewState View state.\n * @return {boolean} The layer is visible at the given view state.\n */\nexport function inView(layerState, viewState) {\n    if (!layerState.visible) {\n        return false;\n    }\n    var resolution = viewState.resolution;\n    if (resolution < layerState.minResolution || resolution >= layerState.maxResolution) {\n        return false;\n    }\n    var zoom = viewState.zoom;\n    return zoom > layerState.minZoom && zoom <= layerState.maxZoom;\n}\nexport default Layer;\n//# sourceMappingURL=Layer.js.map","/**\n * @module ol/color\n */\nimport { assert } from './asserts.js';\nimport { clamp } from './math.js';\n/**\n * A color represented as a short array [red, green, blue, alpha].\n * red, green, and blue should be integers in the range 0..255 inclusive.\n * alpha should be a float in the range 0..1 inclusive. If no alpha value is\n * given then `1` will be used.\n * @typedef {Array<number>} Color\n * @api\n */\n/**\n * This RegExp matches # followed by 3, 4, 6, or 8 hex digits.\n * @const\n * @type {RegExp}\n * @private\n */\nvar HEX_COLOR_RE_ = /^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i;\n/**\n * Regular expression for matching potential named color style strings.\n * @const\n * @type {RegExp}\n * @private\n */\nvar NAMED_COLOR_RE_ = /^([a-z]*)$|^hsla?\\(.*\\)$/i;\n/**\n * Return the color as an rgba string.\n * @param {Color|string} color Color.\n * @return {string} Rgba string.\n * @api\n */\nexport function asString(color) {\n    if (typeof color === 'string') {\n        return color;\n    }\n    else {\n        return toString(color);\n    }\n}\n/**\n * Return named color as an rgba string.\n * @param {string} color Named color.\n * @return {string} Rgb string.\n */\nfunction fromNamed(color) {\n    var el = document.createElement('div');\n    el.style.color = color;\n    if (el.style.color !== '') {\n        document.body.appendChild(el);\n        var rgb = getComputedStyle(el).color;\n        document.body.removeChild(el);\n        return rgb;\n    }\n    else {\n        return '';\n    }\n}\n/**\n * @param {string} s String.\n * @return {Color} Color.\n */\nexport var fromString = (function () {\n    // We maintain a small cache of parsed strings.  To provide cheap LRU-like\n    // semantics, whenever the cache grows too large we simply delete an\n    // arbitrary 25% of the entries.\n    /**\n     * @const\n     * @type {number}\n     */\n    var MAX_CACHE_SIZE = 1024;\n    /**\n     * @type {Object<string, Color>}\n     */\n    var cache = {};\n    /**\n     * @type {number}\n     */\n    var cacheSize = 0;\n    return (\n    /**\n     * @param {string} s String.\n     * @return {Color} Color.\n     */\n    function (s) {\n        var color;\n        if (cache.hasOwnProperty(s)) {\n            color = cache[s];\n        }\n        else {\n            if (cacheSize >= MAX_CACHE_SIZE) {\n                var i = 0;\n                for (var key in cache) {\n                    if ((i++ & 3) === 0) {\n                        delete cache[key];\n                        --cacheSize;\n                    }\n                }\n            }\n            color = fromStringInternal_(s);\n            cache[s] = color;\n            ++cacheSize;\n        }\n        return color;\n    });\n})();\n/**\n * Return the color as an array. This function maintains a cache of calculated\n * arrays which means the result should not be modified.\n * @param {Color|string} color Color.\n * @return {Color} Color.\n * @api\n */\nexport function asArray(color) {\n    if (Array.isArray(color)) {\n        return color;\n    }\n    else {\n        return fromString(color);\n    }\n}\n/**\n * @param {string} s String.\n * @private\n * @return {Color} Color.\n */\nfunction fromStringInternal_(s) {\n    var r, g, b, a, color;\n    if (NAMED_COLOR_RE_.exec(s)) {\n        s = fromNamed(s);\n    }\n    if (HEX_COLOR_RE_.exec(s)) { // hex\n        var n = s.length - 1; // number of hex digits\n        var d = // number of digits per channel\n         void 0; // number of digits per channel\n        if (n <= 4) {\n            d = 1;\n        }\n        else {\n            d = 2;\n        }\n        var hasAlpha = n === 4 || n === 8;\n        r = parseInt(s.substr(1 + 0 * d, d), 16);\n        g = parseInt(s.substr(1 + 1 * d, d), 16);\n        b = parseInt(s.substr(1 + 2 * d, d), 16);\n        if (hasAlpha) {\n            a = parseInt(s.substr(1 + 3 * d, d), 16);\n        }\n        else {\n            a = 255;\n        }\n        if (d == 1) {\n            r = (r << 4) + r;\n            g = (g << 4) + g;\n            b = (b << 4) + b;\n            if (hasAlpha) {\n                a = (a << 4) + a;\n            }\n        }\n        color = [r, g, b, a / 255];\n    }\n    else if (s.indexOf('rgba(') == 0) { // rgba()\n        color = s.slice(5, -1).split(',').map(Number);\n        normalize(color);\n    }\n    else if (s.indexOf('rgb(') == 0) { // rgb()\n        color = s.slice(4, -1).split(',').map(Number);\n        color.push(1);\n        normalize(color);\n    }\n    else {\n        assert(false, 14); // Invalid color\n    }\n    return color;\n}\n/**\n * TODO this function is only used in the test, we probably shouldn't export it\n * @param {Color} color Color.\n * @return {Color} Clamped color.\n */\nexport function normalize(color) {\n    color[0] = clamp((color[0] + 0.5) | 0, 0, 255);\n    color[1] = clamp((color[1] + 0.5) | 0, 0, 255);\n    color[2] = clamp((color[2] + 0.5) | 0, 0, 255);\n    color[3] = clamp(color[3], 0, 1);\n    return color;\n}\n/**\n * @param {Color} color Color.\n * @return {string} String.\n */\nexport function toString(color) {\n    var r = color[0];\n    if (r != (r | 0)) {\n        r = (r + 0.5) | 0;\n    }\n    var g = color[1];\n    if (g != (g | 0)) {\n        g = (g + 0.5) | 0;\n    }\n    var b = color[2];\n    if (b != (b | 0)) {\n        b = (b + 0.5) | 0;\n    }\n    var a = color[3] === undefined ? 1 : color[3];\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n}\n/**\n * @param {string} s String.\n * @return {boolean} Whether the string is actually a valid color\n */\nexport function isStringColor(s) {\n    if (NAMED_COLOR_RE_.test(s)) {\n        s = fromNamed(s);\n    }\n    return HEX_COLOR_RE_.test(s) || s.indexOf('rgba(') === 0 || s.indexOf('rgb(') === 0;\n}\n//# sourceMappingURL=color.js.map","/**\n * @module ol/colorlike\n */\nimport { toString } from './color.js';\n/**\n * A type accepted by CanvasRenderingContext2D.fillStyle\n * or CanvasRenderingContext2D.strokeStyle.\n * Represents a color, pattern, or gradient. The origin for patterns and\n * gradients as fill style is an increment of 512 css pixels from map coordinate\n * `[0, 0]`. For seamless repeat patterns, width and height of the pattern image\n * must be a factor of two (2, 4, 8, ..., 512).\n *\n * @typedef {string|CanvasPattern|CanvasGradient} ColorLike\n * @api\n */\n/**\n * @param {import(\"./color.js\").Color|ColorLike} color Color.\n * @return {ColorLike} The color as an {@link ol/colorlike~ColorLike}.\n * @api\n */\nexport function asColorLike(color) {\n    if (Array.isArray(color)) {\n        return toString(color);\n    }\n    else {\n        return color;\n    }\n}\n//# sourceMappingURL=colorlike.js.map","/**\n * @module ol/dom\n */\n/**\n * Create an html canvas element and returns its 2d context.\n * @param {number=} opt_width Canvas width.\n * @param {number=} opt_height Canvas height.\n * @param {Array<HTMLCanvasElement>=} opt_canvasPool Canvas pool to take existing canvas from.\n * @return {CanvasRenderingContext2D} The context.\n */\nexport function createCanvasContext2D(opt_width, opt_height, opt_canvasPool) {\n    var canvas = opt_canvasPool && opt_canvasPool.length ?\n        opt_canvasPool.shift() : document.createElement('canvas');\n    if (opt_width) {\n        canvas.width = opt_width;\n    }\n    if (opt_height) {\n        canvas.height = opt_height;\n    }\n    return canvas.getContext('2d');\n}\n/**\n * Get the current computed width for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerWidth(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The width.\n */\nexport function outerWidth(element) {\n    var width = element.offsetWidth;\n    var style = getComputedStyle(element);\n    width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10);\n    return width;\n}\n/**\n * Get the current computed height for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerHeight(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The height.\n */\nexport function outerHeight(element) {\n    var height = element.offsetHeight;\n    var style = getComputedStyle(element);\n    height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10);\n    return height;\n}\n/**\n * @param {Node} newNode Node to replace old node\n * @param {Node} oldNode The node to be replaced\n */\nexport function replaceNode(newNode, oldNode) {\n    var parent = oldNode.parentNode;\n    if (parent) {\n        parent.replaceChild(newNode, oldNode);\n    }\n}\n/**\n * @param {Node} node The node to remove.\n * @returns {Node} The node that was removed or null.\n */\nexport function removeNode(node) {\n    return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n}\n/**\n * @param {Node} node The node to remove the children from.\n */\nexport function removeChildren(node) {\n    while (node.lastChild) {\n        node.removeChild(node.lastChild);\n    }\n}\n/**\n * Transform the children of a parent node so they match the\n * provided list of children.  This function aims to efficiently\n * remove, add, and reorder child nodes while maintaining a simple\n * implementation (it is not guaranteed to minimize DOM operations).\n * @param {Node} node The parent node whose children need reworking.\n * @param {Array<Node>} children The desired children.\n */\nexport function replaceChildren(node, children) {\n    var oldChildren = node.childNodes;\n    for (var i = 0; true; ++i) {\n        var oldChild = oldChildren[i];\n        var newChild = children[i];\n        // check if our work is done\n        if (!oldChild && !newChild) {\n            break;\n        }\n        // check if children match\n        if (oldChild === newChild) {\n            continue;\n        }\n        // check if a new child needs to be added\n        if (!oldChild) {\n            node.appendChild(newChild);\n            continue;\n        }\n        // check if an old child needs to be removed\n        if (!newChild) {\n            node.removeChild(oldChild);\n            --i;\n            continue;\n        }\n        // reorder\n        node.insertBefore(newChild, oldChild);\n    }\n}\n//# sourceMappingURL=dom.js.map","/**\n * @module ol/css\n */\n/**\n * @typedef {Object} FontParameters\n * @property {Array<string>} families\n * @property {string} style\n * @property {string} weight\n */\n/**\n * The CSS class for hidden feature.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_HIDDEN = 'ol-hidden';\n/**\n * The CSS class that we'll give the DOM elements to have them selectable.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_SELECTABLE = 'ol-selectable';\n/**\n * The CSS class that we'll give the DOM elements to have them unselectable.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_UNSELECTABLE = 'ol-unselectable';\n/**\n * The CSS class for unsupported feature.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_UNSUPPORTED = 'ol-unsupported';\n/**\n * The CSS class for controls.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_CONTROL = 'ol-control';\n/**\n * The CSS class that we'll give the DOM elements that are collapsed, i.e.\n * to those elements which usually can be expanded.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_COLLAPSED = 'ol-collapsed';\n/**\n * Get the list of font families from a font spec.  Note that this doesn't work\n * for font families that have commas in them.\n * @param {string} The CSS font property.\n * @return {FontParameters} The font families (or null if the input spec is invalid).\n */\nexport var getFontParameters = (function () {\n    /**\n     * @type {CSSStyleDeclaration}\n     */\n    var style;\n    /**\n     * @type {Object<string, FontParameters>}\n     */\n    var cache = {};\n    return function (font) {\n        if (!style) {\n            style = document.createElement('div').style;\n        }\n        if (!(font in cache)) {\n            style.font = font;\n            var family = style.fontFamily;\n            var fontWeight = style.fontWeight;\n            var fontStyle = style.fontStyle;\n            style.font = '';\n            if (!family) {\n                return null;\n            }\n            var families = family.split(/,\\s?/);\n            cache[font] = {\n                families: families,\n                weight: fontWeight,\n                style: fontStyle\n            };\n        }\n        return cache[font];\n    };\n})();\n//# sourceMappingURL=css.js.map","/**\n * @module ol/render/canvas\n */\nimport { getFontParameters } from '../css.js';\nimport { createCanvasContext2D } from '../dom.js';\nimport { clear } from '../obj.js';\nimport BaseObject from '../Object.js';\nimport EventTarget from '../events/Target.js';\n/**\n * @typedef {Object} FillState\n * @property {import(\"../colorlike.js\").ColorLike} fillStyle\n */\n/**\n * @typedef Label\n * @property {number} width\n * @property {number} height\n * @property {Array<string|number>} contextInstructions\n */\n/**\n * @typedef {Object} FillStrokeState\n * @property {import(\"../colorlike.js\").ColorLike} [currentFillStyle]\n * @property {import(\"../colorlike.js\").ColorLike} [currentStrokeStyle]\n * @property {CanvasLineCap} [currentLineCap]\n * @property {Array<number>} currentLineDash\n * @property {number} [currentLineDashOffset]\n * @property {CanvasLineJoin} [currentLineJoin]\n * @property {number} [currentLineWidth]\n * @property {number} [currentMiterLimit]\n * @property {number} [lastStroke]\n * @property {import(\"../colorlike.js\").ColorLike} [fillStyle]\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle]\n * @property {CanvasLineCap} [lineCap]\n * @property {Array<number>} lineDash\n * @property {number} [lineDashOffset]\n * @property {CanvasLineJoin} [lineJoin]\n * @property {number} [lineWidth]\n * @property {number} [miterLimit]\n */\n/**\n * @typedef {Object} StrokeState\n * @property {CanvasLineCap} lineCap\n * @property {Array<number>} lineDash\n * @property {number} lineDashOffset\n * @property {CanvasLineJoin} lineJoin\n * @property {number} lineWidth\n * @property {number} miterLimit\n * @property {import(\"../colorlike.js\").ColorLike} strokeStyle\n */\n/**\n * @typedef {Object} TextState\n * @property {string} font\n * @property {string} [textAlign]\n * @property {string} textBaseline\n * @property {string} [placement]\n * @property {number} [maxAngle]\n * @property {boolean} [overflow]\n * @property {import(\"../style/Fill.js\").default} [backgroundFill]\n * @property {import(\"../style/Stroke.js\").default} [backgroundStroke]\n * @property {number} [scale]\n * @property {Array<number>} [padding]\n */\n/**\n * Container for decluttered replay instructions that need to be rendered or\n * omitted together, i.e. when styles render both an image and text, or for the\n * characters that form text along lines. The basic elements of this array are\n * `[minX, minY, maxX, maxY, count]`, where the first four entries are the\n * rendered extent of the group in pixel space. `count` is the number of styles\n * in the group, i.e. 2 when an image and a text are grouped, or 1 otherwise.\n * In addition to these four elements, declutter instruction arrays (i.e. the\n * arguments to {@link module:ol/render/canvas~drawImage} are appended to the array.\n * @typedef {Array<*>} DeclutterGroup\n */\n/**\n * Declutter groups for support of multi geometries.\n * @typedef {Array<DeclutterGroup>} DeclutterGroups\n */\n/**\n * @const\n * @type {string}\n */\nexport var defaultFont = '10px sans-serif';\n/**\n * @const\n * @type {import(\"../colorlike.js\").ColorLike}\n */\nexport var defaultFillStyle = '#000';\n/**\n * @const\n * @type {CanvasLineCap}\n */\nexport var defaultLineCap = 'round';\n/**\n * @const\n * @type {Array<number>}\n */\nexport var defaultLineDash = [];\n/**\n * @const\n * @type {number}\n */\nexport var defaultLineDashOffset = 0;\n/**\n * @const\n * @type {CanvasLineJoin}\n */\nexport var defaultLineJoin = 'round';\n/**\n * @const\n * @type {number}\n */\nexport var defaultMiterLimit = 10;\n/**\n * @const\n * @type {import(\"../colorlike.js\").ColorLike}\n */\nexport var defaultStrokeStyle = '#000';\n/**\n * @const\n * @type {string}\n */\nexport var defaultTextAlign = 'center';\n/**\n * @const\n * @type {string}\n */\nexport var defaultTextBaseline = 'middle';\n/**\n * @const\n * @type {Array<number>}\n */\nexport var defaultPadding = [0, 0, 0, 0];\n/**\n * @const\n * @type {number}\n */\nexport var defaultLineWidth = 1;\n/**\n * @type {BaseObject}\n */\nexport var checkedFonts = new BaseObject();\n/**\n * The label cache for text rendering. To change the default cache size of 2048\n * entries, use {@link module:ol/structs/LRUCache#setSize}.\n * Deprecated - there is no label cache any more.\n * @type {?}\n * @api\n * @deprecated\n */\nexport var labelCache = new EventTarget();\nlabelCache.setSize = function () {\n    console.warn('labelCache is deprecated.'); //eslint-disable-line\n};\n/**\n * @type {CanvasRenderingContext2D}\n */\nvar measureContext = null;\n/**\n * @type {string}\n */\nvar measureFont;\n/**\n * @type {!Object<string, number>}\n */\nexport var textHeights = {};\n/**\n * Clears the label cache when a font becomes available.\n * @param {string} fontSpec CSS font spec.\n */\nexport var registerFont = (function () {\n    var retries = 100;\n    var size = '32px ';\n    var referenceFonts = ['monospace', 'serif'];\n    var len = referenceFonts.length;\n    var text = 'wmytzilWMYTZIL@#/&?$%10\\uF013';\n    var interval, referenceWidth;\n    /**\n     * @param {string} fontStyle Css font-style\n     * @param {string} fontWeight Css font-weight\n     * @param {*} fontFamily Css font-family\n     * @return {boolean} Font with style and weight is available\n     */\n    function isAvailable(fontStyle, fontWeight, fontFamily) {\n        var available = true;\n        for (var i = 0; i < len; ++i) {\n            var referenceFont = referenceFonts[i];\n            referenceWidth = measureTextWidth(fontStyle + ' ' + fontWeight + ' ' + size + referenceFont, text);\n            if (fontFamily != referenceFont) {\n                var width = measureTextWidth(fontStyle + ' ' + fontWeight + ' ' + size + fontFamily + ',' + referenceFont, text);\n                // If width and referenceWidth are the same, then the fallback was used\n                // instead of the font we wanted, so the font is not available.\n                available = available && width != referenceWidth;\n            }\n        }\n        if (available) {\n            return true;\n        }\n        return false;\n    }\n    function check() {\n        var done = true;\n        var fonts = checkedFonts.getKeys();\n        for (var i = 0, ii = fonts.length; i < ii; ++i) {\n            var font = fonts[i];\n            if (checkedFonts.get(font) < retries) {\n                if (isAvailable.apply(this, font.split('\\n'))) {\n                    clear(textHeights);\n                    // Make sure that loaded fonts are picked up by Safari\n                    measureContext = null;\n                    measureFont = undefined;\n                    checkedFonts.set(font, retries);\n                }\n                else {\n                    checkedFonts.set(font, checkedFonts.get(font) + 1, true);\n                    done = false;\n                }\n            }\n        }\n        if (done) {\n            clearInterval(interval);\n            interval = undefined;\n        }\n    }\n    return function (fontSpec) {\n        var font = getFontParameters(fontSpec);\n        if (!font) {\n            return;\n        }\n        var families = font.families;\n        for (var i = 0, ii = families.length; i < ii; ++i) {\n            var family = families[i];\n            var key = font.style + '\\n' + font.weight + '\\n' + family;\n            if (checkedFonts.get(key) === undefined) {\n                checkedFonts.set(key, retries, true);\n                if (!isAvailable(font.style, font.weight, family)) {\n                    checkedFonts.set(key, 0, true);\n                    if (interval === undefined) {\n                        interval = setInterval(check, 32);\n                    }\n                }\n            }\n        }\n    };\n})();\n/**\n * @param {string} font Font to use for measuring.\n * @return {import(\"../size.js\").Size} Measurement.\n */\nexport var measureTextHeight = (function () {\n    /**\n     * @type {HTMLDivElement}\n     */\n    var div;\n    var heights = textHeights;\n    return function (font) {\n        var height = heights[font];\n        if (height == undefined) {\n            if (!div) {\n                div = document.createElement('div');\n                div.innerHTML = 'M';\n                div.style.margin = '0 !important';\n                div.style.padding = '0 !important';\n                div.style.position = 'absolute !important';\n                div.style.left = '-99999px !important';\n            }\n            div.style.font = font;\n            document.body.appendChild(div);\n            height = div.offsetHeight;\n            heights[font] = height;\n            document.body.removeChild(div);\n        }\n        return height;\n    };\n})();\n/**\n * @param {string} font Font.\n * @param {string} text Text.\n * @return {number} Width.\n */\nexport function measureTextWidth(font, text) {\n    if (!measureContext) {\n        measureContext = createCanvasContext2D(1, 1);\n    }\n    if (font != measureFont) {\n        measureContext.font = font;\n        measureFont = measureContext.font;\n    }\n    return measureContext.measureText(text).width;\n}\n/**\n * Measure text width using a cache.\n * @param {string} font The font.\n * @param {string} text The text to measure.\n * @param {Object<string, number>} cache A lookup of cached widths by text.\n * @returns {number} The text width.\n */\nexport function measureAndCacheTextWidth(font, text, cache) {\n    if (text in cache) {\n        return cache[text];\n    }\n    var width = measureTextWidth(font, text);\n    cache[text] = width;\n    return width;\n}\n/**\n * @param {string} font Font to use for measuring.\n * @param {Array<string>} lines Lines to measure.\n * @param {Array<number>} widths Array will be populated with the widths of\n * each line.\n * @return {number} Width of the whole text.\n */\nexport function measureTextWidths(font, lines, widths) {\n    var numLines = lines.length;\n    var width = 0;\n    for (var i = 0; i < numLines; ++i) {\n        var currentWidth = measureTextWidth(font, lines[i]);\n        width = Math.max(width, currentWidth);\n        widths.push(currentWidth);\n    }\n    return width;\n}\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n * @param {number} offsetX X offset.\n * @param {number} offsetY Y offset.\n */\nexport function rotateAtOffset(context, rotation, offsetX, offsetY) {\n    if (rotation !== 0) {\n        context.translate(offsetX, offsetY);\n        context.rotate(rotation);\n        context.translate(-offsetX, -offsetY);\n    }\n}\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {import(\"../transform.js\").Transform|null} transform Transform.\n * @param {number} opacity Opacity.\n * @param {Label|HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} labelOrImage Label.\n * @param {number} originX Origin X.\n * @param {number} originY Origin Y.\n * @param {number} w Width.\n * @param {number} h Height.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} scale Scale.\n */\nexport function drawImageOrLabel(context, transform, opacity, labelOrImage, originX, originY, w, h, x, y, scale) {\n    context.save();\n    if (transform) {\n        context.setTransform.apply(context, transform);\n    }\n    if (( /** @type {*} */(labelOrImage).contextInstructions)) {\n        // label\n        context.translate(x, y);\n        context.scale(scale, scale);\n        executeLabelInstructions(/** @type {Label} */ (labelOrImage), context);\n    }\n    else {\n        // image\n        context.drawImage(/** @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} */ (labelOrImage), originX, originY, w, h, x, y, w * scale, h * scale);\n    }\n    context.restore();\n}\n/**\n * @param {Label} label Label.\n * @param {CanvasRenderingContext2D} context Context.\n */\nfunction executeLabelInstructions(label, context) {\n    var contextInstructions = label.contextInstructions;\n    for (var i = 0, ii = contextInstructions.length; i < ii; i += 2) {\n        if (Array.isArray(contextInstructions[i + 1])) {\n            CanvasRenderingContext2D.prototype[contextInstructions[i]].apply(context, contextInstructions[i + 1]);\n        }\n        else {\n            context[contextInstructions[i]] = contextInstructions[i + 1];\n        }\n    }\n}\n//# sourceMappingURL=canvas.js.map","/**\n * @module ol/style/Image\n */\nimport { abstract } from '../util.js';\n/**\n * @typedef {Object} Options\n * @property {number} opacity\n * @property {boolean} rotateWithView\n * @property {number} rotation\n * @property {number} scale\n * @property {Array<number>} displacement\n */\n/**\n * @classdesc\n * A base class used for creating subclasses and not instantiated in\n * apps. Base class for {@link module:ol/style/Icon~Icon}, {@link module:ol/style/Circle~CircleStyle} and\n * {@link module:ol/style/RegularShape~RegularShape}.\n * @abstract\n * @api\n */\nvar ImageStyle = /** @class */ (function () {\n    /**\n     * @param {Options} options Options.\n     */\n    function ImageStyle(options) {\n        /**\n         * @private\n         * @type {number}\n         */\n        this.opacity_ = options.opacity;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        this.rotateWithView_ = options.rotateWithView;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.rotation_ = options.rotation;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.scale_ = options.scale;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.displacement_ = options.displacement;\n    }\n    /**\n     * Clones the style.\n     * @return {ImageStyle} The cloned style.\n     * @api\n     */\n    ImageStyle.prototype.clone = function () {\n        return new ImageStyle({\n            opacity: this.getOpacity(),\n            scale: this.getScale(),\n            rotation: this.getRotation(),\n            rotateWithView: this.getRotateWithView(),\n            displacement: this.getDisplacement().slice()\n        });\n    };\n    /**\n     * Get the symbolizer opacity.\n     * @return {number} Opacity.\n     * @api\n     */\n    ImageStyle.prototype.getOpacity = function () {\n        return this.opacity_;\n    };\n    /**\n     * Determine whether the symbolizer rotates with the map.\n     * @return {boolean} Rotate with map.\n     * @api\n     */\n    ImageStyle.prototype.getRotateWithView = function () {\n        return this.rotateWithView_;\n    };\n    /**\n     * Get the symoblizer rotation.\n     * @return {number} Rotation.\n     * @api\n     */\n    ImageStyle.prototype.getRotation = function () {\n        return this.rotation_;\n    };\n    /**\n     * Get the symbolizer scale.\n     * @return {number} Scale.\n     * @api\n     */\n    ImageStyle.prototype.getScale = function () {\n        return this.scale_;\n    };\n    /**\n     * Get the displacement of the shape\n     * @return {Array<number>} Shape's center displacement\n     * @api\n     */\n    ImageStyle.prototype.getDisplacement = function () {\n        return this.displacement_;\n    };\n    /**\n     * Get the anchor point in pixels. The anchor determines the center point for the\n     * symbolizer.\n     * @abstract\n     * @return {Array<number>} Anchor.\n     */\n    ImageStyle.prototype.getAnchor = function () {\n        return abstract();\n    };\n    /**\n     * Get the image element for the symbolizer.\n     * @abstract\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n     */\n    ImageStyle.prototype.getImage = function (pixelRatio) {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n     */\n    ImageStyle.prototype.getHitDetectionImage = function (pixelRatio) {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @return {import(\"../ImageState.js\").default} Image state.\n     */\n    ImageStyle.prototype.getImageState = function () {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @return {import(\"../size.js\").Size} Image size.\n     */\n    ImageStyle.prototype.getImageSize = function () {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @return {import(\"../size.js\").Size} Size of the hit-detection image.\n     */\n    ImageStyle.prototype.getHitDetectionImageSize = function () {\n        return abstract();\n    };\n    /**\n     * Get the origin of the symbolizer.\n     * @abstract\n     * @return {Array<number>} Origin.\n     */\n    ImageStyle.prototype.getOrigin = function () {\n        return abstract();\n    };\n    /**\n     * Get the size of the symbolizer (in pixels).\n     * @abstract\n     * @return {import(\"../size.js\").Size} Size.\n     */\n    ImageStyle.prototype.getSize = function () {\n        return abstract();\n    };\n    /**\n     * Set the opacity.\n     *\n     * @param {number} opacity Opacity.\n     * @api\n     */\n    ImageStyle.prototype.setOpacity = function (opacity) {\n        this.opacity_ = opacity;\n    };\n    /**\n     * Set whether to rotate the style with the view.\n     *\n     * @param {boolean} rotateWithView Rotate with map.\n     * @api\n     */\n    ImageStyle.prototype.setRotateWithView = function (rotateWithView) {\n        this.rotateWithView_ = rotateWithView;\n    };\n    /**\n     * Set the rotation.\n     *\n     * @param {number} rotation Rotation.\n     * @api\n     */\n    ImageStyle.prototype.setRotation = function (rotation) {\n        this.rotation_ = rotation;\n    };\n    /**\n     * Set the scale.\n     *\n     * @param {number} scale Scale.\n     * @api\n     */\n    ImageStyle.prototype.setScale = function (scale) {\n        this.scale_ = scale;\n    };\n    /**\n     * @abstract\n     * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n     * @template T\n     */\n    ImageStyle.prototype.listenImageChange = function (listener) {\n        abstract();\n    };\n    /**\n     * Load not yet loaded URI.\n     * @abstract\n     */\n    ImageStyle.prototype.load = function () {\n        abstract();\n    };\n    /**\n     * @abstract\n     * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n     * @template T\n     */\n    ImageStyle.prototype.unlistenImageChange = function (listener) {\n        abstract();\n    };\n    return ImageStyle;\n}());\nexport default ImageStyle;\n//# sourceMappingURL=Image.js.map","/**\n * @module ol/style/RegularShape\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { asArray } from '../color.js';\nimport { asColorLike } from '../colorlike.js';\nimport { createCanvasContext2D } from '../dom.js';\nimport ImageState from '../ImageState.js';\nimport { defaultStrokeStyle, defaultFillStyle, defaultLineCap, defaultLineWidth, defaultLineJoin, defaultMiterLimit } from '../render/canvas.js';\nimport ImageStyle from './Image.js';\n/**\n * Specify radius for regular polygons, or radius1 and radius2 for stars.\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} points Number of points for stars and regular polygons. In case of a polygon, the number of points\n * is the number of sides.\n * @property {number} [radius] Radius of a regular polygon.\n * @property {number} [radius1] Outer radius of a star.\n * @property {number} [radius2] Inner radius of a star.\n * @property {number} [angle=0] Shape's angle in radians. A value of 0 will have one of the shape's point facing up.\n * @property {Array<number>} [displacement=[0,0]] Displacement of the shape\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {boolean} [rotateWithView=false] Whether to rotate the shape with the view.\n */\n/**\n * @typedef {Object} RenderOptions\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle]\n * @property {number} strokeWidth\n * @property {number} size\n * @property {CanvasLineCap} lineCap\n * @property {Array<number>} lineDash\n * @property {number} lineDashOffset\n * @property {CanvasLineJoin} lineJoin\n * @property {number} miterLimit\n */\n/**\n * @classdesc\n * Set regular shape style for vector features. The resulting shape will be\n * a regular polygon when `radius` is provided, or a star when `radius1` and\n * `radius2` are provided.\n * @api\n */\nvar RegularShape = /** @class */ (function (_super) {\n    __extends(RegularShape, _super);\n    /**\n     * @param {Options} options Options.\n     */\n    function RegularShape(options) {\n        var _this = this;\n        /**\n         * @type {boolean}\n         */\n        var rotateWithView = options.rotateWithView !== undefined ?\n            options.rotateWithView : false;\n        _this = _super.call(this, {\n            opacity: 1,\n            rotateWithView: rotateWithView,\n            rotation: options.rotation !== undefined ? options.rotation : 0,\n            scale: 1,\n            displacement: options.displacement !== undefined ? options.displacement : [0, 0]\n        }) || this;\n        /**\n         * @private\n         * @type {HTMLCanvasElement}\n         */\n        _this.canvas_ = null;\n        /**\n         * @private\n         * @type {HTMLCanvasElement}\n         */\n        _this.hitDetectionCanvas_ = null;\n        /**\n         * @private\n         * @type {import(\"./Fill.js\").default}\n         */\n        _this.fill_ = options.fill !== undefined ? options.fill : null;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.origin_ = [0, 0];\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.points_ = options.points;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.radius_ = options.radius !== undefined ? options.radius : options.radius1;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.radius2_ = options.radius2;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.angle_ = options.angle !== undefined ? options.angle : 0;\n        /**\n         * @private\n         * @type {import(\"./Stroke.js\").default}\n         */\n        _this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.anchor_ = null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.size_ = null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.imageSize_ = null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.hitDetectionImageSize_ = null;\n        _this.render();\n        return _this;\n    }\n    /**\n     * Clones the style.\n     * @return {RegularShape} The cloned style.\n     * @api\n     */\n    RegularShape.prototype.clone = function () {\n        var style = new RegularShape({\n            fill: this.getFill() ? this.getFill().clone() : undefined,\n            points: this.getPoints(),\n            radius: this.getRadius(),\n            radius2: this.getRadius2(),\n            angle: this.getAngle(),\n            stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n            rotation: this.getRotation(),\n            rotateWithView: this.getRotateWithView(),\n            displacement: this.getDisplacement().slice()\n        });\n        style.setOpacity(this.getOpacity());\n        style.setScale(this.getScale());\n        return style;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    RegularShape.prototype.getAnchor = function () {\n        return this.anchor_;\n    };\n    /**\n     * Get the angle used in generating the shape.\n     * @return {number} Shape's rotation in radians.\n     * @api\n     */\n    RegularShape.prototype.getAngle = function () {\n        return this.angle_;\n    };\n    /**\n     * Get the fill style for the shape.\n     * @return {import(\"./Fill.js\").default} Fill style.\n     * @api\n     */\n    RegularShape.prototype.getFill = function () {\n        return this.fill_;\n    };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.getHitDetectionImage = function (pixelRatio) {\n        return this.hitDetectionCanvas_;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    RegularShape.prototype.getImage = function (pixelRatio) {\n        return this.canvas_;\n    };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.getImageSize = function () {\n        return this.imageSize_;\n    };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.getHitDetectionImageSize = function () {\n        return this.hitDetectionImageSize_;\n    };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.getImageState = function () {\n        return ImageState.LOADED;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    RegularShape.prototype.getOrigin = function () {\n        return this.origin_;\n    };\n    /**\n     * Get the number of points for generating the shape.\n     * @return {number} Number of points for stars and regular polygons.\n     * @api\n     */\n    RegularShape.prototype.getPoints = function () {\n        return this.points_;\n    };\n    /**\n     * Get the (primary) radius for the shape.\n     * @return {number} Radius.\n     * @api\n     */\n    RegularShape.prototype.getRadius = function () {\n        return this.radius_;\n    };\n    /**\n     * Get the secondary radius for the shape.\n     * @return {number|undefined} Radius2.\n     * @api\n     */\n    RegularShape.prototype.getRadius2 = function () {\n        return this.radius2_;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    RegularShape.prototype.getSize = function () {\n        return this.size_;\n    };\n    /**\n     * Get the stroke style for the shape.\n     * @return {import(\"./Stroke.js\").default} Stroke style.\n     * @api\n     */\n    RegularShape.prototype.getStroke = function () {\n        return this.stroke_;\n    };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.listenImageChange = function (listener) { };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.load = function () { };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.unlistenImageChange = function (listener) { };\n    /**\n     * @protected\n     */\n    RegularShape.prototype.render = function () {\n        var lineCap = defaultLineCap;\n        var lineJoin = defaultLineJoin;\n        var miterLimit = 0;\n        var lineDash = null;\n        var lineDashOffset = 0;\n        var strokeStyle;\n        var strokeWidth = 0;\n        if (this.stroke_) {\n            strokeStyle = this.stroke_.getColor();\n            if (strokeStyle === null) {\n                strokeStyle = defaultStrokeStyle;\n            }\n            strokeStyle = asColorLike(strokeStyle);\n            strokeWidth = this.stroke_.getWidth();\n            if (strokeWidth === undefined) {\n                strokeWidth = defaultLineWidth;\n            }\n            lineDash = this.stroke_.getLineDash();\n            lineDashOffset = this.stroke_.getLineDashOffset();\n            lineJoin = this.stroke_.getLineJoin();\n            if (lineJoin === undefined) {\n                lineJoin = defaultLineJoin;\n            }\n            lineCap = this.stroke_.getLineCap();\n            if (lineCap === undefined) {\n                lineCap = defaultLineCap;\n            }\n            miterLimit = this.stroke_.getMiterLimit();\n            if (miterLimit === undefined) {\n                miterLimit = defaultMiterLimit;\n            }\n        }\n        var size = 2 * (this.radius_ + strokeWidth) + 1;\n        var renderOptions = {\n            strokeStyle: strokeStyle,\n            strokeWidth: strokeWidth,\n            size: size,\n            lineCap: lineCap,\n            lineDash: lineDash,\n            lineDashOffset: lineDashOffset,\n            lineJoin: lineJoin,\n            miterLimit: miterLimit\n        };\n        var context = createCanvasContext2D(size, size);\n        this.canvas_ = context.canvas;\n        // canvas.width and height are rounded to the closest integer\n        size = this.canvas_.width;\n        var imageSize = size;\n        var displacement = this.getDisplacement();\n        this.draw_(renderOptions, context, 0, 0);\n        this.createHitDetectionCanvas_(renderOptions);\n        this.anchor_ = [size / 2 - displacement[0], size / 2 + displacement[1]];\n        this.size_ = [size, size];\n        this.imageSize_ = [imageSize, imageSize];\n    };\n    /**\n     * @private\n     * @param {RenderOptions} renderOptions Render options.\n     * @param {CanvasRenderingContext2D} context The rendering context.\n     * @param {number} x The origin for the symbol (x).\n     * @param {number} y The origin for the symbol (y).\n     */\n    RegularShape.prototype.draw_ = function (renderOptions, context, x, y) {\n        var i, angle0, radiusC;\n        // reset transform\n        context.setTransform(1, 0, 0, 1, 0, 0);\n        // then move to (x, y)\n        context.translate(x, y);\n        context.beginPath();\n        var points = this.points_;\n        if (points === Infinity) {\n            context.arc(renderOptions.size / 2, renderOptions.size / 2, this.radius_, 0, 2 * Math.PI, true);\n        }\n        else {\n            var radius2 = (this.radius2_ !== undefined) ? this.radius2_\n                : this.radius_;\n            if (radius2 !== this.radius_) {\n                points = 2 * points;\n            }\n            for (i = 0; i <= points; i++) {\n                angle0 = i * 2 * Math.PI / points - Math.PI / 2 + this.angle_;\n                radiusC = i % 2 === 0 ? this.radius_ : radius2;\n                context.lineTo(renderOptions.size / 2 + radiusC * Math.cos(angle0), renderOptions.size / 2 + radiusC * Math.sin(angle0));\n            }\n        }\n        if (this.fill_) {\n            var color = this.fill_.getColor();\n            if (color === null) {\n                color = defaultFillStyle;\n            }\n            context.fillStyle = asColorLike(color);\n            context.fill();\n        }\n        if (this.stroke_) {\n            context.strokeStyle = renderOptions.strokeStyle;\n            context.lineWidth = renderOptions.strokeWidth;\n            if (context.setLineDash && renderOptions.lineDash) {\n                context.setLineDash(renderOptions.lineDash);\n                context.lineDashOffset = renderOptions.lineDashOffset;\n            }\n            context.lineCap = renderOptions.lineCap;\n            context.lineJoin = renderOptions.lineJoin;\n            context.miterLimit = renderOptions.miterLimit;\n            context.stroke();\n        }\n        context.closePath();\n    };\n    /**\n     * @private\n     * @param {RenderOptions} renderOptions Render options.\n     */\n    RegularShape.prototype.createHitDetectionCanvas_ = function (renderOptions) {\n        this.hitDetectionImageSize_ = [renderOptions.size, renderOptions.size];\n        this.hitDetectionCanvas_ = this.canvas_;\n        if (this.fill_) {\n            var color = this.fill_.getColor();\n            // determine if fill is transparent (or pattern or gradient)\n            var opacity = 0;\n            if (typeof color === 'string') {\n                color = asArray(color);\n            }\n            if (color === null) {\n                opacity = 1;\n            }\n            else if (Array.isArray(color)) {\n                opacity = color.length === 4 ? color[3] : 1;\n            }\n            if (opacity === 0) {\n                // if a transparent fill style is set, create an extra hit-detection image\n                // with a default fill style\n                var context = createCanvasContext2D(renderOptions.size, renderOptions.size);\n                this.hitDetectionCanvas_ = context.canvas;\n                this.drawHitDetectionCanvas_(renderOptions, context, 0, 0);\n            }\n        }\n    };\n    /**\n     * @private\n     * @param {RenderOptions} renderOptions Render options.\n     * @param {CanvasRenderingContext2D} context The context.\n     * @param {number} x The origin for the symbol (x).\n     * @param {number} y The origin for the symbol (y).\n     */\n    RegularShape.prototype.drawHitDetectionCanvas_ = function (renderOptions, context, x, y) {\n        // reset transform\n        context.setTransform(1, 0, 0, 1, 0, 0);\n        // then move to (x, y)\n        context.translate(x, y);\n        context.beginPath();\n        var points = this.points_;\n        if (points === Infinity) {\n            context.arc(renderOptions.size / 2, renderOptions.size / 2, this.radius_, 0, 2 * Math.PI, true);\n        }\n        else {\n            var radius2 = (this.radius2_ !== undefined) ? this.radius2_\n                : this.radius_;\n            if (radius2 !== this.radius_) {\n                points = 2 * points;\n            }\n            var i = void 0, radiusC = void 0, angle0 = void 0;\n            for (i = 0; i <= points; i++) {\n                angle0 = i * 2 * Math.PI / points - Math.PI / 2 + this.angle_;\n                radiusC = i % 2 === 0 ? this.radius_ : radius2;\n                context.lineTo(renderOptions.size / 2 + radiusC * Math.cos(angle0), renderOptions.size / 2 + radiusC * Math.sin(angle0));\n            }\n        }\n        context.fillStyle = defaultFillStyle;\n        context.fill();\n        if (this.stroke_) {\n            context.strokeStyle = renderOptions.strokeStyle;\n            context.lineWidth = renderOptions.strokeWidth;\n            if (renderOptions.lineDash) {\n                context.setLineDash(renderOptions.lineDash);\n                context.lineDashOffset = renderOptions.lineDashOffset;\n            }\n            context.stroke();\n        }\n        context.closePath();\n    };\n    return RegularShape;\n}(ImageStyle));\nexport default RegularShape;\n//# sourceMappingURL=RegularShape.js.map","/**\n * @module ol/style/Circle\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport RegularShape from './RegularShape.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} radius Circle radius.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {Array<number>} [displacement=[0,0]] displacement\n */\n/**\n * @classdesc\n * Set circle style for vector features.\n * @api\n */\nvar CircleStyle = /** @class */ (function (_super) {\n    __extends(CircleStyle, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function CircleStyle(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            points: Infinity,\n            fill: options.fill,\n            radius: options.radius,\n            stroke: options.stroke,\n            displacement: options.displacement !== undefined ? options.displacement : [0, 0]\n        }) || this;\n        return _this;\n    }\n    /**\n    * Clones the style.\n    * @return {CircleStyle} The cloned style.\n    * @override\n    * @api\n    */\n    CircleStyle.prototype.clone = function () {\n        var style = new CircleStyle({\n            fill: this.getFill() ? this.getFill().clone() : undefined,\n            stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n            radius: this.getRadius(),\n            displacement: this.getDisplacement().slice()\n        });\n        style.setOpacity(this.getOpacity());\n        style.setScale(this.getScale());\n        return style;\n    };\n    /**\n     * Set the circle radius.\n     *\n     * @param {number} radius Circle radius.\n     * @api\n     */\n    CircleStyle.prototype.setRadius = function (radius) {\n        this.radius_ = radius;\n        this.render();\n    };\n    return CircleStyle;\n}(RegularShape));\nexport default CircleStyle;\n//# sourceMappingURL=Circle.js.map","/**\n * @module ol/style/Fill\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [color=null] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n */\n/**\n * @classdesc\n * Set fill style for vector features.\n * @api\n */\nvar Fill = /** @class */ (function () {\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function Fill(opt_options) {\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike}\n         */\n        this.color_ = options.color !== undefined ? options.color : null;\n    }\n    /**\n     * Clones the style. The color is not cloned if it is an {@link module:ol/colorlike~ColorLike}.\n     * @return {Fill} The cloned style.\n     * @api\n     */\n    Fill.prototype.clone = function () {\n        var color = this.getColor();\n        return new Fill({\n            color: Array.isArray(color) ? color.slice() : color || undefined\n        });\n    };\n    /**\n     * Get the fill color.\n     * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} Color.\n     * @api\n     */\n    Fill.prototype.getColor = function () {\n        return this.color_;\n    };\n    /**\n     * Set the color.\n     *\n     * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} color Color.\n     * @api\n     */\n    Fill.prototype.setColor = function (color) {\n        this.color_ = color;\n    };\n    return Fill;\n}());\nexport default Fill;\n//# sourceMappingURL=Fill.js.map","/**\n * @module ol/style/Stroke\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [color] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n * @property {CanvasLineCap} [lineCap='round'] Line cap style: `butt`, `round`, or `square`.\n * @property {CanvasLineJoin} [lineJoin='round'] Line join style: `bevel`, `round`, or `miter`.\n * @property {Array<number>} [lineDash] Line dash pattern. Default is `null` (no dash).\n * Please note that Internet Explorer 10 and lower do not support the `setLineDash` method on\n * the `CanvasRenderingContext2D` and therefore this option will have no visual effect in these browsers.\n * @property {number} [lineDashOffset=0] Line dash offset.\n * @property {number} [miterLimit=10] Miter limit.\n * @property {number} [width] Width.\n */\n/**\n * @classdesc\n * Set stroke style for vector features.\n * Note that the defaults given are the Canvas defaults, which will be used if\n * option is not defined. The `get` functions return whatever was entered in\n * the options; they will not return the default.\n * @api\n */\nvar Stroke = /** @class */ (function () {\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function Stroke(opt_options) {\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike}\n         */\n        this.color_ = options.color !== undefined ? options.color : null;\n        /**\n         * @private\n         * @type {CanvasLineCap|undefined}\n         */\n        this.lineCap_ = options.lineCap;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.lineDash_ = options.lineDash !== undefined ? options.lineDash : null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.lineDashOffset_ = options.lineDashOffset;\n        /**\n         * @private\n         * @type {CanvasLineJoin|undefined}\n         */\n        this.lineJoin_ = options.lineJoin;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.miterLimit_ = options.miterLimit;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.width_ = options.width;\n    }\n    /**\n     * Clones the style.\n     * @return {Stroke} The cloned style.\n     * @api\n     */\n    Stroke.prototype.clone = function () {\n        var color = this.getColor();\n        return new Stroke({\n            color: Array.isArray(color) ? color.slice() : color || undefined,\n            lineCap: this.getLineCap(),\n            lineDash: this.getLineDash() ? this.getLineDash().slice() : undefined,\n            lineDashOffset: this.getLineDashOffset(),\n            lineJoin: this.getLineJoin(),\n            miterLimit: this.getMiterLimit(),\n            width: this.getWidth()\n        });\n    };\n    /**\n     * Get the stroke color.\n     * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} Color.\n     * @api\n     */\n    Stroke.prototype.getColor = function () {\n        return this.color_;\n    };\n    /**\n     * Get the line cap type for the stroke.\n     * @return {CanvasLineCap|undefined} Line cap.\n     * @api\n     */\n    Stroke.prototype.getLineCap = function () {\n        return this.lineCap_;\n    };\n    /**\n     * Get the line dash style for the stroke.\n     * @return {Array<number>} Line dash.\n     * @api\n     */\n    Stroke.prototype.getLineDash = function () {\n        return this.lineDash_;\n    };\n    /**\n     * Get the line dash offset for the stroke.\n     * @return {number|undefined} Line dash offset.\n     * @api\n     */\n    Stroke.prototype.getLineDashOffset = function () {\n        return this.lineDashOffset_;\n    };\n    /**\n     * Get the line join type for the stroke.\n     * @return {CanvasLineJoin|undefined} Line join.\n     * @api\n     */\n    Stroke.prototype.getLineJoin = function () {\n        return this.lineJoin_;\n    };\n    /**\n     * Get the miter limit for the stroke.\n     * @return {number|undefined} Miter limit.\n     * @api\n     */\n    Stroke.prototype.getMiterLimit = function () {\n        return this.miterLimit_;\n    };\n    /**\n     * Get the stroke width.\n     * @return {number|undefined} Width.\n     * @api\n     */\n    Stroke.prototype.getWidth = function () {\n        return this.width_;\n    };\n    /**\n     * Set the color.\n     *\n     * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} color Color.\n     * @api\n     */\n    Stroke.prototype.setColor = function (color) {\n        this.color_ = color;\n    };\n    /**\n     * Set the line cap.\n     *\n     * @param {CanvasLineCap|undefined} lineCap Line cap.\n     * @api\n     */\n    Stroke.prototype.setLineCap = function (lineCap) {\n        this.lineCap_ = lineCap;\n    };\n    /**\n     * Set the line dash.\n     *\n     * Please note that Internet Explorer 10 and lower [do not support][mdn] the\n     * `setLineDash` method on the `CanvasRenderingContext2D` and therefore this\n     * property will have no visual effect in these browsers.\n     *\n     * [mdn]: https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility\n     *\n     * @param {Array<number>} lineDash Line dash.\n     * @api\n     */\n    Stroke.prototype.setLineDash = function (lineDash) {\n        this.lineDash_ = lineDash;\n    };\n    /**\n     * Set the line dash offset.\n     *\n     * @param {number|undefined} lineDashOffset Line dash offset.\n     * @api\n     */\n    Stroke.prototype.setLineDashOffset = function (lineDashOffset) {\n        this.lineDashOffset_ = lineDashOffset;\n    };\n    /**\n     * Set the line join.\n     *\n     * @param {CanvasLineJoin|undefined} lineJoin Line join.\n     * @api\n     */\n    Stroke.prototype.setLineJoin = function (lineJoin) {\n        this.lineJoin_ = lineJoin;\n    };\n    /**\n     * Set the miter limit.\n     *\n     * @param {number|undefined} miterLimit Miter limit.\n     * @api\n     */\n    Stroke.prototype.setMiterLimit = function (miterLimit) {\n        this.miterLimit_ = miterLimit;\n    };\n    /**\n     * Set the width.\n     *\n     * @param {number|undefined} width Width.\n     * @api\n     */\n    Stroke.prototype.setWidth = function (width) {\n        this.width_ = width;\n    };\n    return Stroke;\n}());\nexport default Stroke;\n//# sourceMappingURL=Stroke.js.map","/**\n * @module ol/style/Style\n */\nimport { assert } from '../asserts.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport CircleStyle from './Circle.js';\nimport Fill from './Fill.js';\nimport Stroke from './Stroke.js';\n/**\n * A function that takes an {@link module:ol/Feature} and a `{number}`\n * representing the view's resolution. The function should return a\n * {@link module:ol/style/Style} or an array of them. This way e.g. a\n * vector layer can be styled.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike, number):(Style|Array<Style>)} StyleFunction\n */\n/**\n * A {@link Style}, an array of {@link Style}, or a {@link StyleFunction}.\n * @typedef {Style|Array<Style>|StyleFunction} StyleLike\n */\n/**\n * A function that takes an {@link module:ol/Feature} as argument and returns an\n * {@link module:ol/geom/Geometry} that will be rendered and styled for the feature.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike):\n *     (import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined)} GeometryFunction\n */\n/**\n * Custom renderer function. Takes two arguments:\n *\n * 1. The pixel coordinates of the geometry in GeoJSON notation.\n * 2. The {@link module:ol/render~State} of the layer renderer.\n *\n * @typedef {function((import(\"../coordinate.js\").Coordinate|Array<import(\"../coordinate.js\").Coordinate>|Array<Array<import(\"../coordinate.js\").Coordinate>>),import(\"../render.js\").State): void}\n * RenderFunction\n */\n/**\n * @typedef {Object} Options\n * @property {string|import(\"../geom/Geometry.js\").default|GeometryFunction} [geometry] Feature property or geometry\n * or function returning a geometry to render for this style.\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {import(\"./Image.js\").default} [image] Image style.\n * @property {RenderFunction} [renderer] Custom renderer. When configured, `fill`, `stroke` and `image` will be\n * ignored, and the provided function will be called with each render frame for each geometry.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./Text.js\").default} [text] Text style.\n * @property {number} [zIndex] Z index.\n */\n/**\n * @classdesc\n * Container for vector feature rendering styles. Any changes made to the style\n * or its children through `set*()` methods will not take effect until the\n * feature or layer that uses the style is re-rendered.\n *\n * ## Feature styles\n *\n * If no style is defined, the following default style is used:\n * ```js\n *  import {Fill, Stroke, Circle, Style} from 'ol/style';\n *\n *  var fill = new Fill({\n *    color: 'rgba(255,255,255,0.4)'\n *  });\n *  var stroke = new Stroke({\n *    color: '#3399CC',\n *    width: 1.25\n *  });\n *  var styles = [\n *    new Style({\n *      image: new Circle({\n *        fill: fill,\n *        stroke: stroke,\n *        radius: 5\n *      }),\n *      fill: fill,\n *      stroke: stroke\n *    })\n *  ];\n * ```\n *\n * A separate editing style has the following defaults:\n * ```js\n *  import {Fill, Stroke, Circle, Style} from 'ol/style';\n *  import GeometryType from 'ol/geom/GeometryType';\n *\n *  var white = [255, 255, 255, 1];\n *  var blue = [0, 153, 255, 1];\n *  var width = 3;\n *  styles[GeometryType.POLYGON] = [\n *    new Style({\n *      fill: new Fill({\n *        color: [255, 255, 255, 0.5]\n *      })\n *    })\n *  ];\n *  styles[GeometryType.MULTI_POLYGON] =\n *      styles[GeometryType.POLYGON];\n *  styles[GeometryType.LINE_STRING] = [\n *    new Style({\n *      stroke: new Stroke({\n *        color: white,\n *        width: width + 2\n *      })\n *    }),\n *    new Style({\n *      stroke: new Stroke({\n *        color: blue,\n *        width: width\n *      })\n *    })\n *  ];\n *  styles[GeometryType.MULTI_LINE_STRING] =\n *      styles[GeometryType.LINE_STRING];\n *  styles[GeometryType.POINT] = [\n *    new Style({\n *      image: new Circle({\n *        radius: width * 2,\n *        fill: new Fill({\n *          color: blue\n *        }),\n *        stroke: new Stroke({\n *          color: white,\n *          width: width / 2\n *        })\n *      }),\n *      zIndex: Infinity\n *    })\n *  ];\n *  styles[GeometryType.MULTI_POINT] =\n *      styles[GeometryType.POINT];\n *  styles[GeometryType.GEOMETRY_COLLECTION] =\n *      styles[GeometryType.POLYGON].concat(\n *          styles[GeometryType.LINE_STRING],\n *          styles[GeometryType.POINT]\n *      );\n * ```\n *\n * @api\n */\nvar Style = /** @class */ (function () {\n    /**\n     * @param {Options=} opt_options Style options.\n     */\n    function Style(opt_options) {\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n         */\n        this.geometry_ = null;\n        /**\n         * @private\n         * @type {!GeometryFunction}\n         */\n        this.geometryFunction_ = defaultGeometryFunction;\n        if (options.geometry !== undefined) {\n            this.setGeometry(options.geometry);\n        }\n        /**\n         * @private\n         * @type {import(\"./Fill.js\").default}\n         */\n        this.fill_ = options.fill !== undefined ? options.fill : null;\n        /**\n           * @private\n           * @type {import(\"./Image.js\").default}\n           */\n        this.image_ = options.image !== undefined ? options.image : null;\n        /**\n         * @private\n         * @type {RenderFunction|null}\n         */\n        this.renderer_ = options.renderer !== undefined ? options.renderer : null;\n        /**\n         * @private\n         * @type {import(\"./Stroke.js\").default}\n         */\n        this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n        /**\n         * @private\n         * @type {import(\"./Text.js\").default}\n         */\n        this.text_ = options.text !== undefined ? options.text : null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.zIndex_ = options.zIndex;\n    }\n    /**\n     * Clones the style.\n     * @return {Style} The cloned style.\n     * @api\n     */\n    Style.prototype.clone = function () {\n        var geometry = this.getGeometry();\n        if (geometry && typeof geometry === 'object') {\n            geometry = /** @type {import(\"../geom/Geometry.js\").default} */ (geometry).clone();\n        }\n        return new Style({\n            geometry: geometry,\n            fill: this.getFill() ? this.getFill().clone() : undefined,\n            image: this.getImage() ? this.getImage().clone() : undefined,\n            stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n            text: this.getText() ? this.getText().clone() : undefined,\n            zIndex: this.getZIndex()\n        });\n    };\n    /**\n     * Get the custom renderer function that was configured with\n     * {@link #setRenderer} or the `renderer` constructor option.\n     * @return {RenderFunction|null} Custom renderer function.\n     * @api\n     */\n    Style.prototype.getRenderer = function () {\n        return this.renderer_;\n    };\n    /**\n     * Sets a custom renderer function for this style. When set, `fill`, `stroke`\n     * and `image` options of the style will be ignored.\n     * @param {RenderFunction|null} renderer Custom renderer function.\n     * @api\n     */\n    Style.prototype.setRenderer = function (renderer) {\n        this.renderer_ = renderer;\n    };\n    /**\n     * Get the geometry to be rendered.\n     * @return {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n     * Feature property or geometry or function that returns the geometry that will\n     * be rendered with this style.\n     * @api\n     */\n    Style.prototype.getGeometry = function () {\n        return this.geometry_;\n    };\n    /**\n     * Get the function used to generate a geometry for rendering.\n     * @return {!GeometryFunction} Function that is called with a feature\n     * and returns the geometry to render instead of the feature's geometry.\n     * @api\n     */\n    Style.prototype.getGeometryFunction = function () {\n        return this.geometryFunction_;\n    };\n    /**\n     * Get the fill style.\n     * @return {import(\"./Fill.js\").default} Fill style.\n     * @api\n     */\n    Style.prototype.getFill = function () {\n        return this.fill_;\n    };\n    /**\n     * Set the fill style.\n     * @param {import(\"./Fill.js\").default} fill Fill style.\n     * @api\n     */\n    Style.prototype.setFill = function (fill) {\n        this.fill_ = fill;\n    };\n    /**\n     * Get the image style.\n     * @return {import(\"./Image.js\").default} Image style.\n     * @api\n     */\n    Style.prototype.getImage = function () {\n        return this.image_;\n    };\n    /**\n     * Set the image style.\n     * @param {import(\"./Image.js\").default} image Image style.\n     * @api\n     */\n    Style.prototype.setImage = function (image) {\n        this.image_ = image;\n    };\n    /**\n     * Get the stroke style.\n     * @return {import(\"./Stroke.js\").default} Stroke style.\n     * @api\n     */\n    Style.prototype.getStroke = function () {\n        return this.stroke_;\n    };\n    /**\n     * Set the stroke style.\n     * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n     * @api\n     */\n    Style.prototype.setStroke = function (stroke) {\n        this.stroke_ = stroke;\n    };\n    /**\n     * Get the text style.\n     * @return {import(\"./Text.js\").default} Text style.\n     * @api\n     */\n    Style.prototype.getText = function () {\n        return this.text_;\n    };\n    /**\n     * Set the text style.\n     * @param {import(\"./Text.js\").default} text Text style.\n     * @api\n     */\n    Style.prototype.setText = function (text) {\n        this.text_ = text;\n    };\n    /**\n     * Get the z-index for the style.\n     * @return {number|undefined} ZIndex.\n     * @api\n     */\n    Style.prototype.getZIndex = function () {\n        return this.zIndex_;\n    };\n    /**\n     * Set a geometry that is rendered instead of the feature's geometry.\n     *\n     * @param {string|import(\"../geom/Geometry.js\").default|GeometryFunction} geometry\n     *     Feature property or geometry or function returning a geometry to render\n     *     for this style.\n     * @api\n     */\n    Style.prototype.setGeometry = function (geometry) {\n        if (typeof geometry === 'function') {\n            this.geometryFunction_ = geometry;\n        }\n        else if (typeof geometry === 'string') {\n            this.geometryFunction_ = function (feature) {\n                return (\n                /** @type {import(\"../geom/Geometry.js\").default} */ (feature.get(geometry)));\n            };\n        }\n        else if (!geometry) {\n            this.geometryFunction_ = defaultGeometryFunction;\n        }\n        else if (geometry !== undefined) {\n            this.geometryFunction_ = function () {\n                return (\n                /** @type {import(\"../geom/Geometry.js\").default} */ (geometry));\n            };\n        }\n        this.geometry_ = geometry;\n    };\n    /**\n     * Set the z-index.\n     *\n     * @param {number|undefined} zIndex ZIndex.\n     * @api\n     */\n    Style.prototype.setZIndex = function (zIndex) {\n        this.zIndex_ = zIndex;\n    };\n    return Style;\n}());\n/**\n * Convert the provided object into a style function.  Functions passed through\n * unchanged.  Arrays of Style or single style objects wrapped in a\n * new style function.\n * @param {StyleFunction|Array<Style>|Style} obj\n *     A style function, a single style, or an array of styles.\n * @return {StyleFunction} A style function.\n */\nexport function toFunction(obj) {\n    var styleFunction;\n    if (typeof obj === 'function') {\n        styleFunction = obj;\n    }\n    else {\n        /**\n         * @type {Array<Style>}\n         */\n        var styles_1;\n        if (Array.isArray(obj)) {\n            styles_1 = obj;\n        }\n        else {\n            assert(typeof /** @type {?} */ (obj).getZIndex === 'function', 41); // Expected an `Style` or an array of `Style`\n            var style = /** @type {Style} */ (obj);\n            styles_1 = [style];\n        }\n        styleFunction = function () {\n            return styles_1;\n        };\n    }\n    return styleFunction;\n}\n/**\n * @type {Array<Style>}\n */\nvar defaultStyles = null;\n/**\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {number} resolution Resolution.\n * @return {Array<Style>} Style.\n */\nexport function createDefaultStyle(feature, resolution) {\n    // We don't use an immediately-invoked function\n    // and a closure so we don't get an error at script evaluation time in\n    // browsers that do not support Canvas. (import(\"./Circle.js\").CircleStyle does\n    // canvas.getContext('2d') at construction time, which will cause an.error\n    // in such browsers.)\n    if (!defaultStyles) {\n        var fill = new Fill({\n            color: 'rgba(255,255,255,0.4)'\n        });\n        var stroke = new Stroke({\n            color: '#3399CC',\n            width: 1.25\n        });\n        defaultStyles = [\n            new Style({\n                image: new CircleStyle({\n                    fill: fill,\n                    stroke: stroke,\n                    radius: 5\n                }),\n                fill: fill,\n                stroke: stroke\n            })\n        ];\n    }\n    return defaultStyles;\n}\n/**\n * Default styles for editing features.\n * @return {Object<import(\"../geom/GeometryType.js\").default, Array<Style>>} Styles\n */\nexport function createEditingStyle() {\n    /** @type {Object<import(\"../geom/GeometryType.js\").default, Array<Style>>} */\n    var styles = {};\n    var white = [255, 255, 255, 1];\n    var blue = [0, 153, 255, 1];\n    var width = 3;\n    styles[GeometryType.POLYGON] = [\n        new Style({\n            fill: new Fill({\n                color: [255, 255, 255, 0.5]\n            })\n        })\n    ];\n    styles[GeometryType.MULTI_POLYGON] =\n        styles[GeometryType.POLYGON];\n    styles[GeometryType.LINE_STRING] = [\n        new Style({\n            stroke: new Stroke({\n                color: white,\n                width: width + 2\n            })\n        }),\n        new Style({\n            stroke: new Stroke({\n                color: blue,\n                width: width\n            })\n        })\n    ];\n    styles[GeometryType.MULTI_LINE_STRING] =\n        styles[GeometryType.LINE_STRING];\n    styles[GeometryType.CIRCLE] =\n        styles[GeometryType.POLYGON].concat(styles[GeometryType.LINE_STRING]);\n    styles[GeometryType.POINT] = [\n        new Style({\n            image: new CircleStyle({\n                radius: width * 2,\n                fill: new Fill({\n                    color: blue\n                }),\n                stroke: new Stroke({\n                    color: white,\n                    width: width / 2\n                })\n            }),\n            zIndex: Infinity\n        })\n    ];\n    styles[GeometryType.MULTI_POINT] =\n        styles[GeometryType.POINT];\n    styles[GeometryType.GEOMETRY_COLLECTION] =\n        styles[GeometryType.POLYGON].concat(styles[GeometryType.LINE_STRING], styles[GeometryType.POINT]);\n    return styles;\n}\n/**\n * Function that is called with a feature and returns its default geometry.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature to get the geometry for.\n * @return {import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined} Geometry to render.\n */\nfunction defaultGeometryFunction(feature) {\n    return feature.getGeometry();\n}\nexport default Style;\n//# sourceMappingURL=Style.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/BaseVector\n */\nimport Layer from './Layer.js';\nimport { assign } from '../obj.js';\nimport { createDefaultStyle, toFunction as toStyleFunction } from '../style/Style.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the viewport extent used by the\n * renderer when getting features from the vector source for the rendering or hit-detection.\n * Recommended value: the size of the largest symbol, line width or label.\n * @property {import(\"../source/Vector.js\").default} [source] Source.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [declutter=false] Declutter images and text. Decluttering is applied to all\n * image and text styles of all Vector and VectorTile layers that have set this to `true`. The priority\n * is defined by the z-index of the layer, the `zIndex` of the style and the render order of features.\n * Higher z-index means higher priority. Within the same z-index, a feature rendered before another has\n * higher priority.\n * @property {import(\"../style/Style.js\").StyleLike} [style] Layer style. See\n * {@link module:ol/style} for default style which will be used if this is not defined.\n * @property {boolean} [updateWhileAnimating=false] When set to `true`, feature batches will\n * be recreated during animations. This means that no vectors will be shown clipped, but the\n * setting will have a performance impact for large amounts of vector data. When set to `false`,\n * batches will be recreated when no animation is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true`, feature batches will\n * be recreated during interactions. See also `updateWhileAnimating`.\n */\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n    RENDER_ORDER: 'renderOrder'\n};\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Vector.js\").default|import(\"../source/VectorTile.js\").default} VectorSourceType\n * @extends {Layer<VectorSourceType>}\n * @api\n */\nvar BaseVectorLayer = /** @class */ (function (_super) {\n    __extends(BaseVectorLayer, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function BaseVectorLayer(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var baseOptions = assign({}, options);\n        delete baseOptions.style;\n        delete baseOptions.renderBuffer;\n        delete baseOptions.updateWhileAnimating;\n        delete baseOptions.updateWhileInteracting;\n        _this = _super.call(this, baseOptions) || this;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.declutter_ = options.declutter !== undefined ? options.declutter : false;\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.renderBuffer_ = options.renderBuffer !== undefined ?\n            options.renderBuffer : 100;\n        /**\n         * User provided style.\n         * @type {import(\"../style/Style.js\").StyleLike}\n         * @private\n         */\n        _this.style_ = null;\n        /**\n         * Style function for use within the library.\n         * @type {import(\"../style/Style.js\").StyleFunction|undefined}\n         * @private\n         */\n        _this.styleFunction_ = undefined;\n        _this.setStyle(options.style);\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.updateWhileAnimating_ = options.updateWhileAnimating !== undefined ?\n            options.updateWhileAnimating : false;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.updateWhileInteracting_ = options.updateWhileInteracting !== undefined ?\n            options.updateWhileInteracting : false;\n        return _this;\n    }\n    /**\n     * @return {boolean} Declutter.\n     */\n    BaseVectorLayer.prototype.getDeclutter = function () {\n        return this.declutter_;\n    };\n    /**\n     * Get the topmost feature that intersects the given pixel on the viewport. Returns a promise\n     * that resolves with an array of features. The array will either contain the topmost feature\n     * when a hit was detected, or it will be empty.\n     *\n     * The hit detection algorithm used for this method is optimized for performance, but is less\n     * accurate than the one used in {@link import(\"../PluggableMap.js\").default#getFeaturesAtPixel}: Text\n     * is not considered, and icons are only represented by their bounding box instead of the exact\n     * image.\n     *\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @return {Promise<Array<import(\"../Feature\").default>>} Promise that resolves with an array of features.\n     * @api\n     */\n    BaseVectorLayer.prototype.getFeatures = function (pixel) {\n        return _super.prototype.getFeatures.call(this, pixel);\n    };\n    /**\n     * @return {number|undefined} Render buffer.\n     */\n    BaseVectorLayer.prototype.getRenderBuffer = function () {\n        return this.renderBuffer_;\n    };\n    /**\n     * @return {function(import(\"../Feature.js\").default, import(\"../Feature.js\").default): number|null|undefined} Render\n     *     order.\n     */\n    BaseVectorLayer.prototype.getRenderOrder = function () {\n        return (\n        /** @type {import(\"../render.js\").OrderFunction|null|undefined} */ (this.get(Property.RENDER_ORDER)));\n    };\n    /**\n     * Get the style for features.  This returns whatever was passed to the `style`\n     * option at construction or to the `setStyle` method.\n     * @return {import(\"../style/Style.js\").StyleLike}\n     *     Layer style.\n     * @api\n     */\n    BaseVectorLayer.prototype.getStyle = function () {\n        return this.style_;\n    };\n    /**\n     * Get the style function.\n     * @return {import(\"../style/Style.js\").StyleFunction|undefined} Layer style function.\n     * @api\n     */\n    BaseVectorLayer.prototype.getStyleFunction = function () {\n        return this.styleFunction_;\n    };\n    /**\n     * @return {boolean} Whether the rendered layer should be updated while\n     *     animating.\n     */\n    BaseVectorLayer.prototype.getUpdateWhileAnimating = function () {\n        return this.updateWhileAnimating_;\n    };\n    /**\n     * @return {boolean} Whether the rendered layer should be updated while\n     *     interacting.\n     */\n    BaseVectorLayer.prototype.getUpdateWhileInteracting = function () {\n        return this.updateWhileInteracting_;\n    };\n    /**\n     * @param {import(\"../render.js\").OrderFunction|null|undefined} renderOrder\n     *     Render order.\n     */\n    BaseVectorLayer.prototype.setRenderOrder = function (renderOrder) {\n        this.set(Property.RENDER_ORDER, renderOrder);\n    };\n    /**\n     * Set the style for features.  This can be a single style object, an array\n     * of styles, or a function that takes a feature and resolution and returns\n     * an array of styles. If it is `undefined` the default style is used. If\n     * it is `null` the layer has no style (a `null` style), so only features\n     * that have their own styles will be rendered in the layer. See\n     * {@link module:ol/style} for information on the default style.\n     * @param {import(\"../style/Style.js\").default|Array<import(\"../style/Style.js\").default>|import(\"../style/Style.js\").StyleFunction|null|undefined} style Layer style.\n     * @api\n     */\n    BaseVectorLayer.prototype.setStyle = function (style) {\n        this.style_ = style !== undefined ? style : createDefaultStyle;\n        this.styleFunction_ = style === null ?\n            undefined : toStyleFunction(this.style_);\n        this.changed();\n    };\n    return BaseVectorLayer;\n}(Layer));\nexport default BaseVectorLayer;\n//# sourceMappingURL=BaseVector.js.map","/**\n * @module ol/source/VectorEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when a feature is added to the source.\n     * @event module:ol/source/Vector.VectorSourceEvent#addfeature\n     * @api\n     */\n    ADDFEATURE: 'addfeature',\n    /**\n     * Triggered when a feature is updated.\n     * @event module:ol/source/Vector.VectorSourceEvent#changefeature\n     * @api\n     */\n    CHANGEFEATURE: 'changefeature',\n    /**\n     * Triggered when the clear method is called on the source.\n     * @event module:ol/source/Vector.VectorSourceEvent#clear\n     * @api\n     */\n    CLEAR: 'clear',\n    /**\n     * Triggered when a feature is removed from the source.\n     * See {@link module:ol/source/Vector#clear source.clear()} for exceptions.\n     * @event module:ol/source/Vector.VectorSourceEvent#removefeature\n     * @api\n     */\n    REMOVEFEATURE: 'removefeature'\n};\n//# sourceMappingURL=VectorEventType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/webgl/PointsLayer\n */\nimport WebGLArrayBuffer from '../../webgl/Buffer.js';\nimport { ARRAY_BUFFER, DYNAMIC_DRAW, ELEMENT_ARRAY_BUFFER } from '../../webgl.js';\nimport { AttributeType, DefaultUniform } from '../../webgl/Helper.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport WebGLLayerRenderer, { colorDecodeId, colorEncodeId, WebGLWorkerMessageType } from './Layer.js';\nimport ViewHint from '../../ViewHint.js';\nimport { buffer, createEmpty, equals } from '../../extent.js';\nimport { apply as applyTransform, create as createTransform, makeInverse as makeInverseTransform, multiply as multiplyTransform } from '../../transform.js';\nimport { create as createWebGLWorker } from '../../worker/webgl.js';\nimport { getUid } from '../../util.js';\nimport WebGLRenderTarget from '../../webgl/RenderTarget.js';\nimport { assert } from '../../asserts.js';\nimport BaseVector from '../../layer/BaseVector.js';\nimport { listen, unlistenByKey } from '../../events.js';\nimport VectorEventType from '../../source/VectorEventType.js';\n/**\n * @typedef {Object} CustomAttribute A description of a custom attribute to be passed on to the GPU, with a value different\n * for each feature.\n * @property {string} name Attribute name.\n * @property {function(import(\"../../Feature\").default, Object<string, *>):number} callback This callback computes the numerical value of the\n * attribute for a given feature (properties are available as 2nd arg for quicker access).\n */\n/**\n * @typedef {Object} FeatureCacheItem Object that holds a reference to a feature, its geometry and properties. Used to optimize\n * rebuildBuffers by accessing these objects quicker.\n * @property {import(\"../../Feature\").default} feature Feature\n * @property {Object<string, *>} properties Feature properties\n * @property {import(\"../../geom\").Geometry} geometry Feature geometry\n */\n/**\n * @typedef {Object} Options\n * @property {Array<CustomAttribute>} [attributes] These attributes will be read from the features in the source and then\n * passed to the GPU. The `name` property of each attribute will serve as its identifier:\n *  * In the vertex shader as an `attribute` by prefixing it with `a_`\n *  * In the fragment shader as a `varying` by prefixing it with `v_`\n * Please note that these can only be numerical values.\n * @property {string} vertexShader Vertex shader source, mandatory.\n * @property {string} fragmentShader Fragment shader source, mandatory.\n * @property {string} [hitVertexShader] Vertex shader source for hit detection rendering.\n * @property {string} [hitFragmentShader] Fragment shader source for hit detection rendering.\n * @property {Object.<string,import(\"../../webgl/Helper\").UniformValue>} [uniforms] Uniform definitions for the post process steps\n * Please note that `u_texture` is reserved for the main texture slot.\n * @property {Array<import(\"./Layer\").PostProcessesOptions>} [postProcesses] Post-processes definitions\n */\n/**\n * @classdesc\n * WebGL vector renderer optimized for points.\n * All features will be rendered as quads (two triangles forming a square). New data will be flushed to the GPU\n * every time the vector source changes.\n *\n * You need to provide vertex and fragment shaders for rendering. This can be done using\n * {@link module:ol/webgl/ShaderBuilder} utilities. These shaders shall expect a `a_position` attribute\n * containing the screen-space projected center of the quad, as well as a `a_index` attribute\n * whose value (0, 1, 2 or 3) indicates which quad vertex is currently getting processed (see structure below).\n *\n * To include variable attributes in the shaders, you need to declare them using the `attributes` property of\n * the options object like so:\n * ```js\n * new WebGLPointsLayerRenderer(layer, {\n *   attributes: [\n *     {\n *       name: 'size',\n *       callback: function(feature) {\n *         // compute something with the feature\n *       }\n *     },\n *     {\n *       name: 'weight',\n *       callback: function(feature) {\n *         // compute something with the feature\n *       }\n *     },\n *   ],\n *   vertexShader:\n *     // shader using attribute a_weight and a_size\n *   fragmentShader:\n *     // shader using varying v_weight and v_size\n * ```\n *\n * To enable hit detection, you must as well provide dedicated shaders using the `hitVertexShader`\n * and `hitFragmentShader` properties. These shall expect the `a_hitColor` attribute to contain\n * the final color that will have to be output for hit detection to work.\n *\n * The following uniform is used for the main texture: `u_texture`.\n *\n * Please note that the main shader output should have premultiplied alpha, otherwise visual anomalies may occur.\n *\n * Points are rendered as quads with the following structure:\n *\n * ```\n *   (u0, v1)      (u1, v1)\n *  [3]----------[2]\n *   |`           |\n *   |  `         |\n *   |    `       |\n *   |      `     |\n *   |        `   |\n *   |          ` |\n *  [0]----------[1]\n *   (u0, v0)      (u1, v0)\n *  ```\n *\n * This uses {@link module:ol/webgl/Helper~WebGLHelper} internally.\n *\n * @api\n */\nvar WebGLPointsLayerRenderer = /** @class */ (function (_super) {\n    __extends(WebGLPointsLayerRenderer, _super);\n    /**\n     * @param {import(\"../../layer/Layer.js\").default} layer Layer.\n     * @param {Options} options Options.\n     */\n    function WebGLPointsLayerRenderer(layer, options) {\n        var _this = this;\n        var uniforms = options.uniforms || {};\n        var projectionMatrixTransform = createTransform();\n        uniforms[DefaultUniform.PROJECTION_MATRIX] = projectionMatrixTransform;\n        _this = _super.call(this, layer, {\n            uniforms: uniforms,\n            postProcesses: options.postProcesses\n        }) || this;\n        _this.sourceRevision_ = -1;\n        _this.verticesBuffer_ = new WebGLArrayBuffer(ARRAY_BUFFER, DYNAMIC_DRAW);\n        _this.hitVerticesBuffer_ = new WebGLArrayBuffer(ARRAY_BUFFER, DYNAMIC_DRAW);\n        _this.indicesBuffer_ = new WebGLArrayBuffer(ELEMENT_ARRAY_BUFFER, DYNAMIC_DRAW);\n        _this.program_ = _this.helper.getProgram(options.fragmentShader, options.vertexShader);\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.hitDetectionEnabled_ = options.hitFragmentShader && options.hitVertexShader ? true : false;\n        _this.hitProgram_ = _this.hitDetectionEnabled_ && _this.helper.getProgram(options.hitFragmentShader, options.hitVertexShader);\n        var customAttributes = options.attributes ?\n            options.attributes.map(function (attribute) {\n                return {\n                    name: 'a_' + attribute.name,\n                    size: 1,\n                    type: AttributeType.FLOAT\n                };\n            }) : [];\n        /**\n         * A list of attributes used by the renderer. By default only the position and\n         * index of the vertex (0 to 3) are required.\n         * @type {Array<import('../../webgl/Helper.js').AttributeDescription>}\n         */\n        _this.attributes = [{\n                name: 'a_position',\n                size: 2,\n                type: AttributeType.FLOAT\n            }, {\n                name: 'a_index',\n                size: 1,\n                type: AttributeType.FLOAT\n            }].concat(customAttributes);\n        /**\n         * A list of attributes used for hit detection.\n         * @type {Array<import('../../webgl/Helper.js').AttributeDescription>}\n         */\n        _this.hitDetectionAttributes = [{\n                name: 'a_position',\n                size: 2,\n                type: AttributeType.FLOAT\n            }, {\n                name: 'a_index',\n                size: 1,\n                type: AttributeType.FLOAT\n            }, {\n                name: 'a_hitColor',\n                size: 4,\n                type: AttributeType.FLOAT\n            }, {\n                name: 'a_featureUid',\n                size: 1,\n                type: AttributeType.FLOAT\n            }].concat(customAttributes);\n        _this.customAttributes = options.attributes ? options.attributes : [];\n        _this.previousExtent_ = createEmpty();\n        /**\n         * This transform is updated on every frame and is the composition of:\n         * - invert of the world->screen transform that was used when rebuilding buffers (see `this.renderTransform_`)\n         * - current world->screen transform\n         * @type {import(\"../../transform.js\").Transform}\n         * @private\n         */\n        _this.currentTransform_ = projectionMatrixTransform;\n        /**\n         * This transform is updated when buffers are rebuilt and converts world space coordinates to screen space\n         * @type {import(\"../../transform.js\").Transform}\n         * @private\n         */\n        _this.renderTransform_ = createTransform();\n        /**\n         * @type {import(\"../../transform.js\").Transform}\n         * @private\n         */\n        _this.invertRenderTransform_ = createTransform();\n        /**\n         * @type {Float32Array}\n         * @private\n         */\n        _this.renderInstructions_ = new Float32Array(0);\n        /**\n         * These instructions are used for hit detection\n         * @type {Float32Array}\n         * @private\n         */\n        _this.hitRenderInstructions_ = new Float32Array(0);\n        /**\n         * @type {WebGLRenderTarget}\n         * @private\n         */\n        _this.hitRenderTarget_ = _this.hitDetectionEnabled_ && new WebGLRenderTarget(_this.helper);\n        _this.worker_ = createWebGLWorker();\n        _this.worker_.addEventListener('message', function (event) {\n            var received = event.data;\n            if (received.type === WebGLWorkerMessageType.GENERATE_BUFFERS) {\n                var projectionTransform = received.projectionTransform;\n                if (received.hitDetection) {\n                    this.hitVerticesBuffer_.fromArrayBuffer(received.vertexBuffer);\n                    this.helper.flushBufferData(this.hitVerticesBuffer_);\n                }\n                else {\n                    this.verticesBuffer_.fromArrayBuffer(received.vertexBuffer);\n                    this.helper.flushBufferData(this.verticesBuffer_);\n                }\n                this.indicesBuffer_.fromArrayBuffer(received.indexBuffer);\n                this.helper.flushBufferData(this.indicesBuffer_);\n                this.renderTransform_ = projectionTransform;\n                makeInverseTransform(this.invertRenderTransform_, this.renderTransform_);\n                if (received.hitDetection) {\n                    this.hitRenderInstructions_ = new Float32Array(event.data.renderInstructions);\n                }\n                else {\n                    this.renderInstructions_ = new Float32Array(event.data.renderInstructions);\n                }\n                this.getLayer().changed();\n            }\n        }.bind(_this));\n        /**\n         * This object will be updated when the source changes. Key is uid.\n         * @type {Object<string, FeatureCacheItem>}\n         * @private\n         */\n        _this.featureCache_ = {};\n        /**\n         * Amount of features in the cache.\n         * @type {number}\n         * @private\n         */\n        _this.featureCount_ = 0;\n        var source = _this.getLayer().getSource();\n        _this.sourceListenKeys_ = [\n            listen(source, VectorEventType.ADDFEATURE, _this.handleSourceFeatureAdded_, _this),\n            listen(source, VectorEventType.CHANGEFEATURE, _this.handleSourceFeatureChanged_, _this),\n            listen(source, VectorEventType.REMOVEFEATURE, _this.handleSourceFeatureDelete_, _this)\n        ];\n        source.forEachFeature(function (feature) {\n            this.featureCache_[getUid(feature)] = {\n                feature: feature,\n                properties: feature.getProperties(),\n                geometry: feature.getGeometry()\n            };\n            this.featureCount_++;\n        }.bind(_this));\n        return _this;\n    }\n    /**\n     * @param {import(\"../../source/Vector.js\").VectorSourceEvent} event Event.\n     * @private\n     */\n    WebGLPointsLayerRenderer.prototype.handleSourceFeatureAdded_ = function (event) {\n        var feature = event.feature;\n        this.featureCache_[getUid(feature)] = {\n            feature: feature,\n            properties: feature.getProperties(),\n            geometry: feature.getGeometry()\n        };\n        this.featureCount_++;\n    };\n    /**\n     * @param {import(\"../../source/Vector.js\").VectorSourceEvent} event Event.\n     * @private\n     */\n    WebGLPointsLayerRenderer.prototype.handleSourceFeatureChanged_ = function (event) {\n        var feature = event.feature;\n        this.featureCache_[getUid(feature)] = {\n            feature: feature,\n            properties: feature.getProperties(),\n            geometry: feature.getGeometry()\n        };\n    };\n    /**\n     * @param {import(\"../../source/Vector.js\").VectorSourceEvent} event Event.\n     * @private\n     */\n    WebGLPointsLayerRenderer.prototype.handleSourceFeatureDelete_ = function (event) {\n        var feature = event.feature;\n        delete this.featureCache_[getUid(feature)];\n        this.featureCount_--;\n    };\n    /**\n     * @inheritDoc\n     */\n    WebGLPointsLayerRenderer.prototype.renderFrame = function (frameState) {\n        var renderCount = this.indicesBuffer_.getSize();\n        this.helper.drawElements(0, renderCount);\n        this.helper.finalizeDraw(frameState);\n        var canvas = this.helper.getCanvas();\n        var layerState = frameState.layerStatesArray[frameState.layerIndex];\n        var opacity = layerState.opacity;\n        if (opacity !== parseFloat(canvas.style.opacity)) {\n            canvas.style.opacity = opacity;\n        }\n        if (this.hitDetectionEnabled_) {\n            this.renderHitDetection(frameState);\n            this.hitRenderTarget_.clearCachedData();\n        }\n        return canvas;\n    };\n    /**\n     * @inheritDoc\n     */\n    WebGLPointsLayerRenderer.prototype.prepareFrame = function (frameState) {\n        var layer = this.getLayer();\n        var vectorSource = layer.getSource();\n        var viewState = frameState.viewState;\n        var viewNotMoving = !frameState.viewHints[ViewHint.ANIMATING] && !frameState.viewHints[ViewHint.INTERACTING];\n        var extentChanged = !equals(this.previousExtent_, frameState.extent);\n        var sourceChanged = this.sourceRevision_ < vectorSource.getRevision();\n        if (sourceChanged) {\n            this.sourceRevision_ = vectorSource.getRevision();\n        }\n        if (viewNotMoving && (extentChanged || sourceChanged)) {\n            var projection = viewState.projection;\n            var resolution = viewState.resolution;\n            var renderBuffer = layer instanceof BaseVector ? layer.getRenderBuffer() : 0;\n            var extent = buffer(frameState.extent, renderBuffer * resolution);\n            vectorSource.loadFeatures(extent, resolution, projection);\n            this.rebuildBuffers_(frameState);\n            this.previousExtent_ = frameState.extent.slice();\n        }\n        // apply the current projection transform with the invert of the one used to fill buffers\n        this.helper.makeProjectionTransform(frameState, this.currentTransform_);\n        multiplyTransform(this.currentTransform_, this.invertRenderTransform_);\n        this.helper.useProgram(this.program_);\n        this.helper.prepareDraw(frameState);\n        // write new data\n        this.helper.bindBuffer(this.verticesBuffer_);\n        this.helper.bindBuffer(this.indicesBuffer_);\n        this.helper.enableAttributes(this.attributes);\n        return true;\n    };\n    /**\n     * Rebuild internal webgl buffers based on current view extent; costly, should not be called too much\n     * @param {import(\"../../PluggableMap\").FrameState} frameState Frame state.\n     * @private\n     */\n    WebGLPointsLayerRenderer.prototype.rebuildBuffers_ = function (frameState) {\n        // saves the projection transform for the current frame state\n        var projectionTransform = createTransform();\n        this.helper.makeProjectionTransform(frameState, projectionTransform);\n        // here we anticipate the amount of render instructions that we well generate\n        // this can be done since we know that for normal render we only have x, y as base instructions,\n        // and x, y, r, g, b, a and featureUid for hit render instructions\n        // and we also know the amount of custom attributes to append to these\n        var totalInstructionsCount = (2 + this.customAttributes.length) * this.featureCount_;\n        if (!this.renderInstructions_ || this.renderInstructions_.length !== totalInstructionsCount) {\n            this.renderInstructions_ = new Float32Array(totalInstructionsCount);\n        }\n        if (this.hitDetectionEnabled_) {\n            var totalHitInstructionsCount = (7 + this.customAttributes.length) * this.featureCount_;\n            if (!this.hitRenderInstructions_ || this.hitRenderInstructions_.length !== totalHitInstructionsCount) {\n                this.hitRenderInstructions_ = new Float32Array(totalHitInstructionsCount);\n            }\n        }\n        // loop on features to fill the buffer\n        var featureCache, geometry;\n        var tmpCoords = [];\n        var tmpColor = [];\n        var renderIndex = 0;\n        var hitIndex = 0;\n        var hitColor;\n        for (var featureUid in this.featureCache_) {\n            featureCache = this.featureCache_[featureUid];\n            geometry = /** @type {import(\"../../geom\").Point} */ (featureCache.geometry);\n            if (!geometry || geometry.getType() !== GeometryType.POINT) {\n                continue;\n            }\n            tmpCoords[0] = geometry.getFlatCoordinates()[0];\n            tmpCoords[1] = geometry.getFlatCoordinates()[1];\n            applyTransform(projectionTransform, tmpCoords);\n            hitColor = colorEncodeId(hitIndex + 6, tmpColor);\n            this.renderInstructions_[renderIndex++] = tmpCoords[0];\n            this.renderInstructions_[renderIndex++] = tmpCoords[1];\n            // for hit detection, the feature uid is saved in the opacity value\n            // and the index of the opacity value is encoded in the color values\n            if (this.hitDetectionEnabled_) {\n                this.hitRenderInstructions_[hitIndex++] = tmpCoords[0];\n                this.hitRenderInstructions_[hitIndex++] = tmpCoords[1];\n                this.hitRenderInstructions_[hitIndex++] = hitColor[0];\n                this.hitRenderInstructions_[hitIndex++] = hitColor[1];\n                this.hitRenderInstructions_[hitIndex++] = hitColor[2];\n                this.hitRenderInstructions_[hitIndex++] = hitColor[3];\n                this.hitRenderInstructions_[hitIndex++] = Number(featureUid);\n            }\n            // pushing custom attributes\n            var value = void 0;\n            for (var j = 0; j < this.customAttributes.length; j++) {\n                value = this.customAttributes[j].callback(featureCache.feature, featureCache.properties);\n                this.renderInstructions_[renderIndex++] = value;\n                if (this.hitDetectionEnabled_) {\n                    this.hitRenderInstructions_[hitIndex++] = value;\n                }\n            }\n        }\n        /** @type {import('./Layer').WebGLWorkerGenerateBuffersMessage} */\n        var message = {\n            type: WebGLWorkerMessageType.GENERATE_BUFFERS,\n            renderInstructions: this.renderInstructions_.buffer,\n            customAttributesCount: this.customAttributes.length\n        };\n        // additional properties will be sent back as-is by the worker\n        message['projectionTransform'] = projectionTransform;\n        this.worker_.postMessage(message, [this.renderInstructions_.buffer]);\n        this.renderInstructions_ = null;\n        /** @type {import('./Layer').WebGLWorkerGenerateBuffersMessage} */\n        if (this.hitDetectionEnabled_) {\n            var hitMessage = {\n                type: WebGLWorkerMessageType.GENERATE_BUFFERS,\n                renderInstructions: this.hitRenderInstructions_.buffer,\n                customAttributesCount: 5 + this.customAttributes.length\n            };\n            hitMessage['projectionTransform'] = projectionTransform;\n            hitMessage['hitDetection'] = true;\n            this.worker_.postMessage(hitMessage, [this.hitRenderInstructions_.buffer]);\n            this.hitRenderInstructions_ = null;\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    WebGLPointsLayerRenderer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, callback, declutteredFeatures) {\n        assert(this.hitDetectionEnabled_, 66);\n        if (!this.hitRenderInstructions_) {\n            return;\n        }\n        var pixel = applyTransform(frameState.coordinateToPixelTransform, coordinate.slice());\n        var data = this.hitRenderTarget_.readPixel(pixel[0] / 2, pixel[1] / 2);\n        var color = [\n            data[0] / 255,\n            data[1] / 255,\n            data[2] / 255,\n            data[3] / 255\n        ];\n        var index = colorDecodeId(color);\n        var opacity = this.hitRenderInstructions_[index];\n        var uid = Math.floor(opacity).toString();\n        var source = this.getLayer().getSource();\n        var feature = source.getFeatureByUid(uid);\n        if (feature) {\n            return callback(feature, this.getLayer());\n        }\n    };\n    /**\n     * Render the hit detection data to the corresponding render target\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState current frame state\n     */\n    WebGLPointsLayerRenderer.prototype.renderHitDetection = function (frameState) {\n        // skip render entirely if vertex buffers not ready/generated yet\n        if (!this.hitVerticesBuffer_.getSize()) {\n            return;\n        }\n        this.hitRenderTarget_.setSize([\n            Math.floor(frameState.size[0] / 2),\n            Math.floor(frameState.size[1] / 2)\n        ]);\n        this.helper.useProgram(this.hitProgram_);\n        this.helper.prepareDrawToRenderTarget(frameState, this.hitRenderTarget_, true);\n        this.helper.bindBuffer(this.hitVerticesBuffer_);\n        this.helper.bindBuffer(this.indicesBuffer_);\n        this.helper.enableAttributes(this.hitDetectionAttributes);\n        var renderCount = this.indicesBuffer_.getSize();\n        this.helper.drawElements(0, renderCount);\n    };\n    /**\n     * @inheritDoc\n     */\n    WebGLPointsLayerRenderer.prototype.disposeInternal = function () {\n        this.worker_.terminate();\n        this.layer_ = null;\n        this.sourceListenKeys_.forEach(function (key) {\n            unlistenByKey(key);\n        });\n        this.sourceListenKeys_ = null;\n        _super.prototype.disposeInternal.call(this);\n    };\n    return WebGLPointsLayerRenderer;\n}(WebGLLayerRenderer));\nexport default WebGLPointsLayerRenderer;\n//# sourceMappingURL=PointsLayer.js.map","/**\n * Operators and utilities used for style expressions\n * @module ol/style/expressions\n */\nimport { asArray, isStringColor } from '../color.js';\n/**\n * Base type used for literal style parameters; can be a number literal or the output of an operator,\n * which in turns takes {@link ExpressionValue} arguments.\n *\n * The following operators can be used:\n *\n * * Reading operators:\n *   * `['get', 'attributeName']` fetches a feature attribute (it will be prefixed by `a_` in the shader)\n *     Note: those will be taken from the attributes provided to the renderer\n *   * `['var', 'varName']` fetches a value from the style variables, or 0 if undefined\n *   * `['time']` returns the time in seconds since the creation of the layer\n *   * `['zoom']` returns the current zoom level\n *   * `['resolution']` returns the current resolution\n *\n * * Math operators:\n *   * `['*', value1, value2]` multiplies `value1` by `value2`\n *   * `['/', value1, value2]` divides `value1` by `value2`\n *   * `['+', value1, value2]` adds `value1` and `value2`\n *   * `['-', value1, value2]` subtracts `value2` from `value1`\n *   * `['clamp', value, low, high]` clamps `value` between `low` and `high`\n *   * `['%', value1, value2]` returns the result of `value1 % value2` (modulo)\n *   * `['^', value1, value2]` returns the value of `value1` raised to the `value2` power\n *\n * * Transform operators:\n *   * `['case', condition1, output1, ...conditionN, outputN, fallback]` selects the first output whose corresponding\n *     condition evaluates to `true`. If no match is found, returns the `fallback` value.\n *     All conditions should be `boolean`, output and fallback can be any kind.\n *   * `['match', input, match1, output1, ...matchN, outputN, fallback]` compares the `input` value against all\n *     provided `matchX` values, returning the output associated with the first valid match. If no match is found,\n *     returns the `fallback` value.\n *     `input` and `matchX` values must all be of the same type, and can be `number` or `string`. `outputX` and\n *     `fallback` values must be of the same type, and can be of any kind.\n *   * `['interpolate', interpolation, input, stop1, output1, ...stopN, outputN]` returns a value by interpolating between\n *     pairs of inputs and outputs; `interpolation` can either be `['linear']` or `['exponential', base]` where `base` is\n *     the rate of increase from stop A to stop B (i.e. power to which the interpolation ratio is raised); a value\n *     of 1 is equivalent to `['linear']`.\n *     `input` and `stopX` values must all be of type `number`. `outputX` values can be `number` or `color` values.\n *     Note: `input` will be clamped between `stop1` and `stopN`, meaning that all output values will be comprised\n *     between `output1` and `outputN`.\n *\n * * Logical operators:\n *   * `['<', value1, value2]` returns `true` if `value1` is strictly lower than `value2`, or `false` otherwise.\n *   * `['<=', value1, value2]` returns `true` if `value1` is lower than or equals `value2`, or `false` otherwise.\n *   * `['>', value1, value2]` returns `true` if `value1` is strictly greater than `value2`, or `false` otherwise.\n *   * `['>=', value1, value2]` returns `true` if `value1` is greater than or equals `value2`, or `false` otherwise.\n *   * `['==', value1, value2]` returns `true` if `value1` equals `value2`, or `false` otherwise.\n *   * `['!=', value1, value2]` returns `true` if `value1` does not equal `value2`, or `false` otherwise.\n *   * `['!', value1]` returns `false` if `value1` is `true` or greater than `0`, or `true` otherwise.\n *   * `['between', value1, value2, value3]` returns `true` if `value1` is contained between `value2` and `value3`\n *     (inclusively), or `false` otherwise.\n *\n * * Conversion operators:\n *   * `['array', value1, ...valueN]` creates a numerical array from `number` values; please note that the amount of\n *     values can currently only be 2, 3 or 4.\n *   * `['color', red, green, blue, alpha]` creates a `color` value from `number` values; the `alpha` parameter is\n *     optional; if not specified, it will be set to 1.\n *     Note: `red`, `green` and `blue` components must be values between 0 and 255; `alpha` between 0 and 1.\n *\n * Values can either be literals or another operator, as they will be evaluated recursively.\n * Literal values can be of the following types:\n * * `boolean`\n * * `number`\n * * `string`\n * * {@link module:ol/color~Color}\n *\n * @typedef {Array<*>|import(\"../color.js\").Color|string|number|boolean} ExpressionValue\n */\n/**\n * Possible inferred types from a given value or expression.\n * Note: these are binary flags.\n * @enum {number}\n */\nexport var ValueTypes = {\n    NUMBER: 1,\n    STRING: 2,\n    COLOR: 4,\n    BOOLEAN: 8,\n    NUMBER_ARRAY: 16,\n    ANY: 31,\n    NONE: 0\n};\n/**\n * An operator declaration must contain two methods: `getReturnType` which returns a type based on\n * the operator arguments, and `toGlsl` which returns a GLSL-compatible string.\n * Note: both methods can process arguments recursively.\n * @typedef {Object} Operator\n * @property {function(Array<ExpressionValue>): ValueTypes|number} getReturnType Returns one or several types\n * @property {function(ParsingContext, Array<ExpressionValue>, ValueTypes=): string} toGlsl Returns a GLSL-compatible string\n * Note: takes in an optional type hint as 3rd parameter\n */\n/**\n * Operator declarations\n * @type {Object<string, Operator>}\n */\nexport var Operators = {};\n/**\n * Returns the possible types for a given value (each type being a binary flag)\n * To test a value use e.g. `getValueType(v) & ValueTypes.BOOLEAN`\n * @param {ExpressionValue} value Value\n * @returns {ValueTypes|number} Type or types inferred from the value\n */\nexport function getValueType(value) {\n    if (typeof value === 'number') {\n        return ValueTypes.NUMBER;\n    }\n    if (typeof value === 'boolean') {\n        return ValueTypes.BOOLEAN;\n    }\n    if (typeof value === 'string') {\n        if (isStringColor(value)) {\n            return ValueTypes.COLOR | ValueTypes.STRING;\n        }\n        return ValueTypes.STRING;\n    }\n    if (!Array.isArray(value)) {\n        throw new Error(\"Unhandled value type: \" + JSON.stringify(value));\n    }\n    var valueArr = /** @type {Array<*>} */ (value);\n    var onlyNumbers = valueArr.every(function (v) {\n        return typeof v === 'number';\n    });\n    if (onlyNumbers) {\n        if (valueArr.length === 3 || valueArr.length === 4) {\n            return ValueTypes.COLOR | ValueTypes.NUMBER_ARRAY;\n        }\n        return ValueTypes.NUMBER_ARRAY;\n    }\n    if (typeof valueArr[0] !== 'string') {\n        throw new Error(\"Expected an expression operator but received: \" + JSON.stringify(valueArr));\n    }\n    var operator = Operators[valueArr[0]];\n    if (operator === undefined) {\n        throw new Error(\"Unrecognized expression operator: \" + JSON.stringify(valueArr));\n    }\n    return operator.getReturnType(valueArr.slice(1));\n}\n/**\n * Checks if only one value type is enabled in the input number.\n * @param {ValueTypes|number} valueType Number containing value type binary flags\n * @return {boolean} True if only one type flag is enabled, false if zero or multiple\n */\nexport function isTypeUnique(valueType) {\n    return Math.log2(valueType) % 1 === 0;\n}\n/**\n * Context available during the parsing of an expression.\n * @typedef {Object} ParsingContext\n * @property {boolean} [inFragmentShader] If false, means the expression output should be made for a vertex shader\n * @property {Array<string>} variables List of variables used in the expression; contains **unprefixed names**\n * @property {Array<string>} attributes List of attributes used in the expression; contains **unprefixed names**\n * @property {Object<string, number>} stringLiteralsMap This object maps all encountered string values to a number\n */\n/**\n * Will return the number as a float with a dot separator, which is required by GLSL.\n * @param {number} v Numerical value.\n * @returns {string} The value as string.\n */\nexport function numberToGlsl(v) {\n    var s = v.toString();\n    return s.indexOf('.') === -1 ? s + '.0' : s;\n}\n/**\n * Will return the number array as a float with a dot separator, concatenated with ', '.\n * @param {Array<number>} array Numerical values array.\n * @returns {string} The array as a vector, e. g.: `vec3(1.0, 2.0, 3.0)`.\n */\nexport function arrayToGlsl(array) {\n    if (array.length < 2 || array.length > 4) {\n        throw new Error('`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.');\n    }\n    return \"vec\" + array.length + \"(\" + array.map(numberToGlsl).join(', ') + \")\";\n}\n/**\n * Will normalize and converts to string a `vec4` color array compatible with GLSL.\n * @param {string|import(\"../color.js\").Color} color Color either in string format or [r, g, b, a] array format,\n * with RGB components in the 0..255 range and the alpha component in the 0..1 range.\n * Note that the final array will always have 4 components.\n * @returns {string} The color expressed in the `vec4(1.0, 1.0, 1.0, 1.0)` form.\n */\nexport function colorToGlsl(color) {\n    var array = asArray(color).slice();\n    if (array.length < 4) {\n        array.push(1);\n    }\n    return arrayToGlsl(array.map(function (c, i) {\n        return i < 3 ? c / 255 : c;\n    }));\n}\n/**\n * Returns a stable equivalent number for the string literal.\n * @param {ParsingContext} context Parsing context\n * @param {string} string String literal value\n * @returns {number} Number equivalent\n */\nexport function getStringNumberEquivalent(context, string) {\n    if (context.stringLiteralsMap[string] === undefined) {\n        context.stringLiteralsMap[string] = Object.keys(context.stringLiteralsMap).length;\n    }\n    return context.stringLiteralsMap[string];\n}\n/**\n * Returns a stable equivalent number for the string literal, for use in shaders. This number is then\n * converted to be a GLSL-compatible string.\n * @param {ParsingContext} context Parsing context\n * @param {string} string String literal value\n * @returns {string} GLSL-compatible string containing a number\n */\nexport function stringToGlsl(context, string) {\n    return numberToGlsl(getStringNumberEquivalent(context, string));\n}\n/**\n * Recursively parses a style expression and outputs a GLSL-compatible string. Takes in a parsing context that\n * will be read and modified during the parsing operation.\n * @param {ParsingContext} context Parsing context\n * @param {ExpressionValue} value Value\n * @param {ValueTypes|number} [typeHint] Hint for the expected final type (can be several types combined)\n * @returns {string} GLSL-compatible output\n */\nexport function expressionToGlsl(context, value, typeHint) {\n    // operator\n    if (Array.isArray(value) && typeof value[0] === 'string') {\n        var operator = Operators[value[0]];\n        if (operator === undefined) {\n            throw new Error(\"Unrecognized expression operator: \" + JSON.stringify(value));\n        }\n        return operator.toGlsl(context, value.slice(1), typeHint);\n    }\n    else if ((getValueType(value) & ValueTypes.NUMBER) > 0) {\n        return numberToGlsl(/** @type {number} */ (value));\n    }\n    else if ((getValueType(value) & ValueTypes.BOOLEAN) > 0) {\n        return value.toString();\n    }\n    else if (((getValueType(value) & ValueTypes.STRING) > 0) &&\n        (typeHint === undefined || typeHint == ValueTypes.STRING)) {\n        return stringToGlsl(context, value.toString());\n    }\n    else if (((getValueType(value) & ValueTypes.COLOR) > 0) &&\n        (typeHint === undefined || typeHint == ValueTypes.COLOR)) {\n        return colorToGlsl(/** @type {number[]|string} */ (value));\n    }\n    else if ((getValueType(value) & ValueTypes.NUMBER_ARRAY) > 0) {\n        return arrayToGlsl(/** @type {number[]} */ (value));\n    }\n}\nfunction assertNumber(value) {\n    if (!(getValueType(value) & ValueTypes.NUMBER)) {\n        throw new Error(\"A numeric value was expected, got \" + JSON.stringify(value) + \" instead\");\n    }\n}\nfunction assertNumbers(values) {\n    for (var i = 0; i < values.length; i++) {\n        assertNumber(values[i]);\n    }\n}\nfunction assertString(value) {\n    if (!(getValueType(value) & ValueTypes.STRING)) {\n        throw new Error(\"A string value was expected, got \" + JSON.stringify(value) + \" instead\");\n    }\n}\nfunction assertBoolean(value) {\n    if (!(getValueType(value) & ValueTypes.BOOLEAN)) {\n        throw new Error(\"A boolean value was expected, got \" + JSON.stringify(value) + \" instead\");\n    }\n}\nfunction assertArgsCount(args, count) {\n    if (args.length !== count) {\n        throw new Error(\"Exactly \" + count + \" arguments were expected, got \" + args.length + \" instead\");\n    }\n}\nfunction assertArgsMinCount(args, count) {\n    if (args.length < count) {\n        throw new Error(\"At least \" + count + \" arguments were expected, got \" + args.length + \" instead\");\n    }\n}\nfunction assertArgsMaxCount(args, count) {\n    if (args.length > count) {\n        throw new Error(\"At most \" + count + \" arguments were expected, got \" + args.length + \" instead\");\n    }\n}\nfunction assertArgsEven(args) {\n    if (args.length % 2 !== 0) {\n        throw new Error(\"An even amount of arguments was expected, got \" + args + \" instead\");\n    }\n}\nfunction assertArgsOdd(args) {\n    if (args.length % 2 === 0) {\n        throw new Error(\"An even amount of arguments was expected, got \" + args + \" instead\");\n    }\n}\nfunction assertUniqueInferredType(args, types) {\n    if (!isTypeUnique(types)) {\n        throw new Error(\"Could not infer only one type from the following expression: \" + JSON.stringify(args));\n    }\n}\nOperators['get'] = {\n    getReturnType: function (args) {\n        return ValueTypes.ANY;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 1);\n        assertString(args[0]);\n        var value = args[0].toString();\n        if (context.attributes.indexOf(value) === -1) {\n            context.attributes.push(value);\n        }\n        var prefix = context.inFragmentShader ? 'v_' : 'a_';\n        return prefix + value;\n    }\n};\nOperators['var'] = {\n    getReturnType: function (args) {\n        return ValueTypes.ANY;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 1);\n        assertString(args[0]);\n        var value = args[0].toString();\n        if (context.variables.indexOf(value) === -1) {\n            context.variables.push(value);\n        }\n        return \"u_\" + value;\n    }\n};\nOperators['time'] = {\n    getReturnType: function (args) {\n        return ValueTypes.NUMBER;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 0);\n        return 'u_time';\n    }\n};\nOperators['zoom'] = {\n    getReturnType: function (args) {\n        return ValueTypes.NUMBER;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 0);\n        return 'u_zoom';\n    }\n};\nOperators['resolution'] = {\n    getReturnType: function (args) {\n        return ValueTypes.NUMBER;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 0);\n        return 'u_resolution';\n    }\n};\nOperators['*'] = {\n    getReturnType: function (args) {\n        return ValueTypes.NUMBER;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 2);\n        assertNumbers(args);\n        return \"(\" + expressionToGlsl(context, args[0]) + \" * \" + expressionToGlsl(context, args[1]) + \")\";\n    }\n};\nOperators['/'] = {\n    getReturnType: function (args) {\n        return ValueTypes.NUMBER;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 2);\n        assertNumbers(args);\n        return \"(\" + expressionToGlsl(context, args[0]) + \" / \" + expressionToGlsl(context, args[1]) + \")\";\n    }\n};\nOperators['+'] = {\n    getReturnType: function (args) {\n        return ValueTypes.NUMBER;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 2);\n        assertNumbers(args);\n        return \"(\" + expressionToGlsl(context, args[0]) + \" + \" + expressionToGlsl(context, args[1]) + \")\";\n    }\n};\nOperators['-'] = {\n    getReturnType: function (args) {\n        return ValueTypes.NUMBER;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 2);\n        assertNumbers(args);\n        return \"(\" + expressionToGlsl(context, args[0]) + \" - \" + expressionToGlsl(context, args[1]) + \")\";\n    }\n};\nOperators['clamp'] = {\n    getReturnType: function (args) {\n        return ValueTypes.NUMBER;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 3);\n        assertNumbers(args);\n        var min = expressionToGlsl(context, args[1]);\n        var max = expressionToGlsl(context, args[2]);\n        return \"clamp(\" + expressionToGlsl(context, args[0]) + \", \" + min + \", \" + max + \")\";\n    }\n};\nOperators['%'] = {\n    getReturnType: function (args) {\n        return ValueTypes.NUMBER;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 2);\n        assertNumbers(args);\n        return \"mod(\" + expressionToGlsl(context, args[0]) + \", \" + expressionToGlsl(context, args[1]) + \")\";\n    }\n};\nOperators['^'] = {\n    getReturnType: function (args) {\n        return ValueTypes.NUMBER;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 2);\n        assertNumbers(args);\n        return \"pow(\" + expressionToGlsl(context, args[0]) + \", \" + expressionToGlsl(context, args[1]) + \")\";\n    }\n};\nOperators['>'] = {\n    getReturnType: function (args) {\n        return ValueTypes.BOOLEAN;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 2);\n        assertNumbers(args);\n        return \"(\" + expressionToGlsl(context, args[0]) + \" > \" + expressionToGlsl(context, args[1]) + \")\";\n    }\n};\nOperators['>='] = {\n    getReturnType: function (args) {\n        return ValueTypes.BOOLEAN;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 2);\n        assertNumbers(args);\n        return \"(\" + expressionToGlsl(context, args[0]) + \" >= \" + expressionToGlsl(context, args[1]) + \")\";\n    }\n};\nOperators['<'] = {\n    getReturnType: function (args) {\n        return ValueTypes.BOOLEAN;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 2);\n        assertNumbers(args);\n        return \"(\" + expressionToGlsl(context, args[0]) + \" < \" + expressionToGlsl(context, args[1]) + \")\";\n    }\n};\nOperators['<='] = {\n    getReturnType: function (args) {\n        return ValueTypes.BOOLEAN;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 2);\n        assertNumbers(args);\n        return \"(\" + expressionToGlsl(context, args[0]) + \" <= \" + expressionToGlsl(context, args[1]) + \")\";\n    }\n};\nfunction getEqualOperator(operator) {\n    return {\n        getReturnType: function (args) {\n            return ValueTypes.BOOLEAN;\n        },\n        toGlsl: function (context, args) {\n            assertArgsCount(args, 2);\n            // find common type\n            var type = ValueTypes.ANY;\n            for (var i = 0; i < args.length; i++) {\n                type = type & getValueType(args[i]);\n            }\n            if (type === 0) {\n                throw new Error(\"All arguments should be of compatible type, got \" + JSON.stringify(args) + \" instead\");\n            }\n            return \"(\" + expressionToGlsl(context, args[0], type) + \" \" + operator + \" \" + expressionToGlsl(context, args[1], type) + \")\";\n        }\n    };\n}\nOperators['=='] = getEqualOperator('==');\nOperators['!='] = getEqualOperator('!=');\nOperators['!'] = {\n    getReturnType: function (args) {\n        return ValueTypes.BOOLEAN;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 1);\n        assertBoolean(args[0]);\n        return \"(!\" + expressionToGlsl(context, args[0]) + \")\";\n    }\n};\nOperators['between'] = {\n    getReturnType: function (args) {\n        return ValueTypes.BOOLEAN;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 3);\n        assertNumbers(args);\n        var min = expressionToGlsl(context, args[1]);\n        var max = expressionToGlsl(context, args[2]);\n        var value = expressionToGlsl(context, args[0]);\n        return \"(\" + value + \" >= \" + min + \" && \" + value + \" <= \" + max + \")\";\n    }\n};\nOperators['array'] = {\n    getReturnType: function (args) {\n        return ValueTypes.NUMBER_ARRAY;\n    },\n    toGlsl: function (context, args) {\n        assertArgsMinCount(args, 2);\n        assertArgsMaxCount(args, 4);\n        assertNumbers(args);\n        var parsedArgs = args.map(function (val) {\n            return expressionToGlsl(context, val, ValueTypes.NUMBER);\n        });\n        return \"vec\" + args.length + \"(\" + parsedArgs.join(', ') + \")\";\n    }\n};\nOperators['color'] = {\n    getReturnType: function (args) {\n        return ValueTypes.COLOR;\n    },\n    toGlsl: function (context, args) {\n        assertArgsMinCount(args, 3);\n        assertArgsMaxCount(args, 4);\n        assertNumbers(args);\n        var array = /** @type {number[]} */ (args);\n        if (args.length === 3) {\n            array.push(1);\n        }\n        var parsedArgs = args.map(function (val, i) {\n            return expressionToGlsl(context, val, ValueTypes.NUMBER) + (i < 3 ? ' / 255.0' : '');\n        });\n        return \"vec\" + args.length + \"(\" + parsedArgs.join(', ') + \")\";\n    }\n};\nOperators['interpolate'] = {\n    getReturnType: function (args) {\n        var type = ValueTypes.COLOR | ValueTypes.NUMBER;\n        for (var i = 3; i < args.length; i += 2) {\n            type = type & getValueType(args[i]);\n        }\n        return type;\n    },\n    toGlsl: function (context, args, opt_typeHint) {\n        assertArgsEven(args);\n        assertArgsMinCount(args, 6);\n        // validate interpolation type\n        var type = args[0];\n        var interpolation;\n        switch (type[0]) {\n            case 'linear':\n                interpolation = 1;\n                break;\n            case 'exponential':\n                interpolation = type[1];\n                break;\n            default: interpolation = null;\n        }\n        if (!interpolation) {\n            throw new Error(\"Invalid interpolation type for \\\"interpolate\\\" operator, received: \" + JSON.stringify(type));\n        }\n        // compute input/output types\n        var typeHint = opt_typeHint !== undefined ? opt_typeHint : ValueTypes.ANY;\n        var outputType = Operators['interpolate'].getReturnType(args) & typeHint;\n        assertUniqueInferredType(args, outputType);\n        var input = expressionToGlsl(context, args[1]);\n        var result = null;\n        for (var i = 2; i < args.length - 2; i += 2) {\n            var stop1 = expressionToGlsl(context, args[i]);\n            var output1 = expressionToGlsl(context, args[i + 1], outputType);\n            var stop2 = expressionToGlsl(context, args[i + 2]);\n            var output2 = expressionToGlsl(context, args[i + 3], outputType);\n            result = \"mix(\" + (result || output1) + \", \" + output2 + \", pow(clamp((\" + input + \" - \" + stop1 + \") / (\" + stop2 + \" - \" + stop1 + \"), 0.0, 1.0), \" + numberToGlsl(interpolation) + \"))\";\n        }\n        return result;\n    }\n};\nOperators['match'] = {\n    getReturnType: function (args) {\n        var type = ValueTypes.ANY;\n        for (var i = 2; i < args.length; i += 2) {\n            type = type & getValueType(args[i]);\n        }\n        type = type & getValueType(args[args.length - 1]);\n        return type;\n    },\n    toGlsl: function (context, args, opt_typeHint) {\n        assertArgsEven(args);\n        assertArgsMinCount(args, 4);\n        var typeHint = opt_typeHint !== undefined ? opt_typeHint : ValueTypes.ANY;\n        var outputType = Operators['match'].getReturnType(args) & typeHint;\n        assertUniqueInferredType(args, outputType);\n        var input = expressionToGlsl(context, args[0]);\n        var fallback = expressionToGlsl(context, args[args.length - 1], outputType);\n        var result = null;\n        for (var i = args.length - 3; i >= 1; i -= 2) {\n            var match = expressionToGlsl(context, args[i]);\n            var output = expressionToGlsl(context, args[i + 1], outputType);\n            result = \"(\" + input + \" == \" + match + \" ? \" + output + \" : \" + (result || fallback) + \")\";\n        }\n        return result;\n    }\n};\nOperators['case'] = {\n    getReturnType: function (args) {\n        var type = ValueTypes.ANY;\n        for (var i = 1; i < args.length; i += 2) {\n            type = type & getValueType(args[i]);\n        }\n        type = type & getValueType(args[args.length - 1]);\n        return type;\n    },\n    toGlsl: function (context, args, opt_typeHint) {\n        assertArgsOdd(args);\n        assertArgsMinCount(args, 3);\n        var typeHint = opt_typeHint !== undefined ? opt_typeHint : ValueTypes.ANY;\n        var outputType = Operators['case'].getReturnType(args) & typeHint;\n        assertUniqueInferredType(args, outputType);\n        for (var i = 0; i < args.length - 1; i += 2) {\n            assertBoolean(args[i]);\n        }\n        var fallback = expressionToGlsl(context, args[args.length - 1], outputType);\n        var result = null;\n        for (var i = args.length - 3; i >= 0; i -= 2) {\n            var condition = expressionToGlsl(context, args[i]);\n            var output = expressionToGlsl(context, args[i + 1], outputType);\n            result = \"(\" + condition + \" ? \" + output + \" : \" + (result || fallback) + \")\";\n        }\n        return result;\n    }\n};\n//# sourceMappingURL=expressions.js.map","/**\n * Classes and utilities for generating shaders from literal style objects\n * @module ol/webgl/ShaderBuilder\n */\nimport { expressionToGlsl, getStringNumberEquivalent, ValueTypes } from '../style/expressions.js';\n/**\n * @typedef {Object} VaryingDescription\n * @property {string} name Varying name, as will be declared in the header.\n * @property {string} type Varying type, either `float`, `vec2`, `vec4`...\n * @property {string} expression Expression which will be assigned to the varying in the vertex shader, and\n * passed on to the fragment shader.\n */\n/**\n * @classdesc\n * This class implements a classic builder pattern for generating many different types of shaders.\n * Methods can be chained, e. g.:\n *\n * ```js\n * const shader = new ShaderBuilder()\n *   .addVarying('v_width', 'float', 'a_width')\n *   .addUniform('u_time')\n *   .setColorExpression('...')\n *   .setSizeExpression('...')\n *   .outputSymbolFragmentShader();\n * ```\n */\nvar ShaderBuilder = /** @class */ (function () {\n    function ShaderBuilder() {\n        /**\n         * Uniforms; these will be declared in the header (should include the type).\n         * @type {Array<string>}\n         * @private\n         */\n        this.uniforms = [];\n        /**\n         * Attributes; these will be declared in the header (should include the type).\n         * @type {Array<string>}\n         * @private\n         */\n        this.attributes = [];\n        /**\n         * Varyings with a name, a type and an expression.\n         * @type {Array<VaryingDescription>}\n         * @private\n         */\n        this.varyings = [];\n        /**\n         * @type {string}\n         * @private\n         */\n        this.sizeExpression = 'vec2(1.0)';\n        /**\n         * @type {string}\n         * @private\n         */\n        this.rotationExpression = '0.0';\n        /**\n         * @type {string}\n         * @private\n         */\n        this.offsetExpression = 'vec2(0.0)';\n        /**\n         * @type {string}\n         * @private\n         */\n        this.colorExpression = 'vec4(1.0)';\n        /**\n         * @type {string}\n         * @private\n         */\n        this.texCoordExpression = 'vec4(0.0, 0.0, 1.0, 1.0)';\n        /**\n         * @type {string}\n         * @private\n         */\n        this.discardExpression = 'false';\n        /**\n         * @type {boolean}\n         * @private\n         */\n        this.rotateWithView = false;\n    }\n    /**\n     * Adds a uniform accessible in both fragment and vertex shaders.\n     * The given name should include a type, such as `sampler2D u_texture`.\n     * @param {string} name Uniform name\n     * @return {ShaderBuilder} the builder object\n     */\n    ShaderBuilder.prototype.addUniform = function (name) {\n        this.uniforms.push(name);\n        return this;\n    };\n    /**\n     * Adds an attribute accessible in the vertex shader, read from the geometry buffer.\n     * The given name should include a type, such as `vec2 a_position`.\n     * @param {string} name Attribute name\n     * @return {ShaderBuilder} the builder object\n     */\n    ShaderBuilder.prototype.addAttribute = function (name) {\n        this.attributes.push(name);\n        return this;\n    };\n    /**\n     * Adds a varying defined in the vertex shader and accessible from the fragment shader.\n     * The type and expression of the varying have to be specified separately.\n     * @param {string} name Varying name\n     * @param {'float'|'vec2'|'vec3'|'vec4'} type Type\n     * @param {string} expression Expression used to assign a value to the varying.\n     * @return {ShaderBuilder} the builder object\n     */\n    ShaderBuilder.prototype.addVarying = function (name, type, expression) {\n        this.varyings.push({\n            name: name,\n            type: type,\n            expression: expression\n        });\n        return this;\n    };\n    /**\n     * Sets an expression to compute the size of the shape.\n     * This expression can use all the uniforms and attributes available\n     * in the vertex shader, and should evaluate to a `vec2` value.\n     * @param {string} expression Size expression\n     * @return {ShaderBuilder} the builder object\n     */\n    ShaderBuilder.prototype.setSizeExpression = function (expression) {\n        this.sizeExpression = expression;\n        return this;\n    };\n    /**\n     * Sets an expression to compute the rotation of the shape.\n     * This expression can use all the uniforms and attributes available\n     * in the vertex shader, and should evaluate to a `float` value in radians.\n     * @param {string} expression Size expression\n     * @return {ShaderBuilder} the builder object\n     */\n    ShaderBuilder.prototype.setRotationExpression = function (expression) {\n        this.rotationExpression = expression;\n        return this;\n    };\n    /**\n     * Sets an expression to compute the offset of the symbol from the point center.\n     * This expression can use all the uniforms and attributes available\n     * in the vertex shader, and should evaluate to a `vec2` value.\n     * Note: will only be used for point geometry shaders.\n     * @param {string} expression Offset expression\n     * @return {ShaderBuilder} the builder object\n     */\n    ShaderBuilder.prototype.setSymbolOffsetExpression = function (expression) {\n        this.offsetExpression = expression;\n        return this;\n    };\n    /**\n     * Sets an expression to compute the color of the shape.\n     * This expression can use all the uniforms, varyings and attributes available\n     * in the fragment shader, and should evaluate to a `vec4` value.\n     * @param {string} expression Color expression\n     * @return {ShaderBuilder} the builder object\n     */\n    ShaderBuilder.prototype.setColorExpression = function (expression) {\n        this.colorExpression = expression;\n        return this;\n    };\n    /**\n     * Sets an expression to compute the texture coordinates of the vertices.\n     * This expression can use all the uniforms and attributes available\n     * in the vertex shader, and should evaluate to a `vec4` value.\n     * @param {string} expression Texture coordinate expression\n     * @return {ShaderBuilder} the builder object\n     */\n    ShaderBuilder.prototype.setTextureCoordinateExpression = function (expression) {\n        this.texCoordExpression = expression;\n        return this;\n    };\n    /**\n     * Sets an expression to determine whether a fragment (pixel) should be discarded,\n     * i.e. not drawn at all.\n     * This expression can use all the uniforms, varyings and attributes available\n     * in the fragment shader, and should evaluate to a `bool` value (it will be\n     * used in an `if` statement)\n     * @param {string} expression Fragment discard expression\n     * @return {ShaderBuilder} the builder object\n     */\n    ShaderBuilder.prototype.setFragmentDiscardExpression = function (expression) {\n        this.discardExpression = expression;\n        return this;\n    };\n    /**\n     * Sets whether the symbols should rotate with the view or stay aligned with the map.\n     * Note: will only be used for point geometry shaders.\n     * @param {boolean} rotateWithView Rotate with view\n     * @return {ShaderBuilder} the builder object\n     */\n    ShaderBuilder.prototype.setSymbolRotateWithView = function (rotateWithView) {\n        this.rotateWithView = rotateWithView;\n        return this;\n    };\n    /**\n     * @returns {string} Previously set size expression\n     */\n    ShaderBuilder.prototype.getSizeExpression = function () {\n        return this.sizeExpression;\n    };\n    /**\n     * @returns {string} Previously set symbol offset expression\n     */\n    ShaderBuilder.prototype.getOffsetExpression = function () {\n        return this.offsetExpression;\n    };\n    /**\n     * @returns {string} Previously set color expression\n     */\n    ShaderBuilder.prototype.getColorExpression = function () {\n        return this.colorExpression;\n    };\n    /**\n     * @returns {string} Previously set texture coordinate expression\n     */\n    ShaderBuilder.prototype.getTextureCoordinateExpression = function () {\n        return this.texCoordExpression;\n    };\n    /**\n     * @returns {string} Previously set fragment discard expression\n     */\n    ShaderBuilder.prototype.getFragmentDiscardExpression = function () {\n        return this.discardExpression;\n    };\n    /**\n     * Generates a symbol vertex shader from the builder parameters,\n     * intended to be used on point geometries.\n     *\n     * Three uniforms are hardcoded in all shaders: `u_projectionMatrix`, `u_offsetScaleMatrix`,\n     * `u_offsetRotateMatrix`, `u_time`.\n     *\n     * The following attributes are hardcoded and expected to be present in the vertex buffers:\n     * `vec2 a_position`, `float a_index` (being the index of the vertex in the quad, 0 to 3).\n     *\n     * The following varyings are hardcoded and gives the coordinate of the pixel both in the quad and on the texture:\n     * `vec2 v_quadCoord`, `vec2 v_texCoord`\n     *\n     * @param {boolean} [forHitDetection] If true, the shader will be modified to include hit detection variables\n     * (namely, hit color with encoded feature id).\n     * @returns {string} The full shader as a string.\n     */\n    ShaderBuilder.prototype.getSymbolVertexShader = function (forHitDetection) {\n        var offsetMatrix = this.rotateWithView ?\n            'u_offsetScaleMatrix * u_offsetRotateMatrix' :\n            'u_offsetScaleMatrix';\n        var attributes = this.attributes;\n        var varyings = this.varyings;\n        if (forHitDetection) {\n            attributes = attributes.concat('vec4 a_hitColor');\n            varyings = varyings.concat({\n                name: 'v_hitColor',\n                type: 'vec4',\n                expression: 'a_hitColor'\n            });\n        }\n        return \"precision mediump float;\\nuniform mat4 u_projectionMatrix;\\nuniform mat4 u_offsetScaleMatrix;\\nuniform mat4 u_offsetRotateMatrix;\\nuniform float u_time;\\nuniform float u_zoom;\\nuniform float u_resolution;\\n\" + this.uniforms.map(function (uniform) {\n            return 'uniform ' + uniform + ';';\n        }).join('\\n') + \"\\nattribute vec2 a_position;\\nattribute float a_index;\\n\" + attributes.map(function (attribute) {\n            return 'attribute ' + attribute + ';';\n        }).join('\\n') + \"\\nvarying vec2 v_texCoord;\\nvarying vec2 v_quadCoord;\\n\" + varyings.map(function (varying) {\n            return 'varying ' + varying.type + ' ' + varying.name + ';';\n        }).join('\\n') + \"\\nvoid main(void) {\\n  mat4 offsetMatrix = \" + offsetMatrix + \";\\n  vec2 halfSize = \" + this.sizeExpression + \" * 0.5;\\n  vec2 offset = \" + this.offsetExpression + \";\\n  float angle = \" + this.rotationExpression + \";\\n  float offsetX;\\n  float offsetY;\\n  if (a_index == 0.0) {\\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\\n  } else if (a_index == 1.0) {\\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\\n  } else if (a_index == 2.0) {\\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\\n  } else {\\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\\n  }\\n  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\\n  vec4 texCoord = \" + this.texCoordExpression + \";\\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;\\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;\\n  v_texCoord = vec2(u, v);\\n  u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\\n  v = a_index == 2.0 || a_index == 3.0 ? 0.0 : 1.0;\\n  v_quadCoord = vec2(u, v);\\n\" + varyings.map(function (varying) {\n            return '  ' + varying.name + ' = ' + varying.expression + ';';\n        }).join('\\n') + \"\\n}\";\n    };\n    /**\n     * Generates a symbol fragment shader from the builder parameters,\n     * intended to be used on point geometries.\n     *\n     * Expects the following varyings to be transmitted by the vertex shader:\n     * `vec2 v_quadCoord`, `vec2 v_texCoord`\n     *\n     * @param {boolean} [forHitDetection] If true, the shader will be modified to include hit detection variables\n     * (namely, hit color with encoded feature id).\n     * @returns {string} The full shader as a string.\n     */\n    ShaderBuilder.prototype.getSymbolFragmentShader = function (forHitDetection) {\n        var hitDetectionBypass = forHitDetection ?\n            '  if (gl_FragColor.a < 0.1) { discard; } gl_FragColor = v_hitColor;' : '';\n        var varyings = this.varyings;\n        if (forHitDetection) {\n            varyings = varyings.concat({\n                name: 'v_hitColor',\n                type: 'vec4',\n                expression: 'a_hitColor'\n            });\n        }\n        return \"precision mediump float;\\nuniform float u_time;\\nuniform float u_zoom;\\nuniform float u_resolution;\\n\" + this.uniforms.map(function (uniform) {\n            return 'uniform ' + uniform + ';';\n        }).join('\\n') + \"\\nvarying vec2 v_texCoord;\\nvarying vec2 v_quadCoord;\\n\" + varyings.map(function (varying) {\n            return 'varying ' + varying.type + ' ' + varying.name + ';';\n        }).join('\\n') + \"\\nvoid main(void) {\\n  if (\" + this.discardExpression + \") { discard; }\\n  gl_FragColor = \" + this.colorExpression + \";\\n  gl_FragColor.rgb *= gl_FragColor.a;\\n\" + hitDetectionBypass + \"\\n}\";\n    };\n    return ShaderBuilder;\n}());\nexport { ShaderBuilder };\n/**\n * @typedef {Object} StyleParseResult\n * @property {ShaderBuilder} builder Shader builder pre-configured according to a given style\n * @property {Object.<string,import(\"./Helper\").UniformValue>} uniforms Uniform definitions.\n * @property {Array<import(\"../renderer/webgl/PointsLayer\").CustomAttribute>} attributes Attribute descriptions.\n */\n/**\n * Parses a {@link import(\"../style/LiteralStyle\").LiteralStyle} object and returns a {@link ShaderBuilder}\n * object that has been configured according to the given style, as well as `attributes` and `uniforms`\n * arrays to be fed to the `WebGLPointsRenderer` class.\n *\n * Also returns `uniforms` and `attributes` properties as expected by the\n * {@link module:ol/renderer/webgl/PointsLayer~WebGLPointsLayerRenderer}.\n *\n * @param {import(\"../style/LiteralStyle\").LiteralStyle} style Literal style.\n * @returns {StyleParseResult} Result containing shader params, attributes and uniforms.\n */\nexport function parseLiteralStyle(style) {\n    var symbStyle = style.symbol;\n    var size = symbStyle.size !== undefined ? symbStyle.size : 1;\n    var color = symbStyle.color || 'white';\n    var texCoord = symbStyle.textureCoord || [0, 0, 1, 1];\n    var offset = symbStyle.offset || [0, 0];\n    var opacity = symbStyle.opacity !== undefined ? symbStyle.opacity : 1;\n    var rotation = symbStyle.rotation !== undefined ? symbStyle.rotation : 0;\n    /**\n     * @type {import(\"../style/expressions.js\").ParsingContext}\n     */\n    var vertContext = {\n        inFragmentShader: false,\n        variables: [],\n        attributes: [],\n        stringLiteralsMap: {}\n    };\n    var parsedSize = expressionToGlsl(vertContext, size, ValueTypes.NUMBER_ARRAY | ValueTypes.NUMBER);\n    var parsedOffset = expressionToGlsl(vertContext, offset, ValueTypes.NUMBER_ARRAY);\n    var parsedTexCoord = expressionToGlsl(vertContext, texCoord, ValueTypes.NUMBER_ARRAY);\n    /**\n     * @type {import(\"../style/expressions.js\").ParsingContext}\n     */\n    var fragContext = {\n        inFragmentShader: true,\n        variables: vertContext.variables,\n        attributes: [],\n        stringLiteralsMap: vertContext.stringLiteralsMap\n    };\n    var parsedColor = expressionToGlsl(fragContext, color, ValueTypes.COLOR);\n    var parsedOpacity = expressionToGlsl(fragContext, opacity, ValueTypes.NUMBER);\n    var parsedRotation = expressionToGlsl(fragContext, rotation, ValueTypes.NUMBER);\n    var opacityFilter = '1.0';\n    var visibleSize = \"vec2(\" + expressionToGlsl(fragContext, size, ValueTypes.NUMBER_ARRAY | ValueTypes.NUMBER) + \").x\";\n    switch (symbStyle.symbolType) {\n        case 'square': break;\n        case 'image': break;\n        // taken from https://thebookofshaders.com/07/\n        case 'circle':\n            opacityFilter = \"(1.0-smoothstep(1.-4./\" + visibleSize + \",1.,dot(v_quadCoord-.5,v_quadCoord-.5)*4.))\";\n            break;\n        case 'triangle':\n            var st = '(v_quadCoord*2.-1.)';\n            var a = \"(atan(\" + st + \".x,\" + st + \".y))\";\n            opacityFilter = \"(1.0-smoothstep(.5-3./\" + visibleSize + \",.5,cos(floor(.5+\" + a + \"/2.094395102)*2.094395102-\" + a + \")*length(\" + st + \")))\";\n            break;\n        default: throw new Error('Unexpected symbol type: ' + symbStyle.symbolType);\n    }\n    var builder = new ShaderBuilder()\n        .setSizeExpression(\"vec2(\" + parsedSize + \")\")\n        .setRotationExpression(parsedRotation)\n        .setSymbolOffsetExpression(parsedOffset)\n        .setTextureCoordinateExpression(parsedTexCoord)\n        .setSymbolRotateWithView(!!symbStyle.rotateWithView)\n        .setColorExpression(\"vec4(\" + parsedColor + \".rgb, \" + parsedColor + \".a * \" + parsedOpacity + \" * \" + opacityFilter + \")\");\n    if (style.filter) {\n        var parsedFilter = expressionToGlsl(fragContext, style.filter, ValueTypes.BOOLEAN);\n        builder.setFragmentDiscardExpression(\"!\" + parsedFilter);\n    }\n    /** @type {Object.<string,import(\"../webgl/Helper\").UniformValue>} */\n    var uniforms = {};\n    // define one uniform per variable\n    fragContext.variables.forEach(function (varName) {\n        builder.addUniform(\"float u_\" + varName);\n        uniforms[\"u_\" + varName] = function () {\n            if (!style.variables || style.variables[varName] === undefined) {\n                throw new Error(\"The following variable is missing from the style: \" + varName);\n            }\n            var value = style.variables[varName];\n            if (typeof value === 'string') {\n                value = getStringNumberEquivalent(vertContext, value);\n            }\n            return value !== undefined ? value : -9999999; // to avoid matching with the first string literal\n        };\n    });\n    if (symbStyle.symbolType === 'image' && symbStyle.src) {\n        var texture = new Image();\n        texture.src = symbStyle.src;\n        builder.addUniform('sampler2D u_texture')\n            .setColorExpression(builder.getColorExpression() +\n            ' * texture2D(u_texture, v_texCoord)');\n        uniforms['u_texture'] = texture;\n    }\n    // for each feature attribute used in the fragment shader, define a varying that will be used to pass data\n    // from the vertex to the fragment shader, as well as an attribute in the vertex shader (if not already present)\n    fragContext.attributes.forEach(function (attrName) {\n        if (vertContext.attributes.indexOf(attrName) === -1) {\n            vertContext.attributes.push(attrName);\n        }\n        builder.addVarying(\"v_\" + attrName, 'float', \"a_\" + attrName);\n    });\n    // for each feature attribute used in the vertex shader, define an attribute in the vertex shader.\n    vertContext.attributes.forEach(function (attrName) {\n        builder.addAttribute(\"float a_\" + attrName);\n    });\n    return {\n        builder: builder,\n        attributes: vertContext.attributes.map(function (attributeName) {\n            return {\n                name: attributeName,\n                callback: function (feature, props) {\n                    var value = props[attributeName];\n                    if (typeof value === 'string') {\n                        value = getStringNumberEquivalent(vertContext, value);\n                    }\n                    return value !== undefined ? value : -9999999; // to avoid matching with the first string literal\n                }\n            };\n        }),\n        uniforms: uniforms\n    };\n}\n//# sourceMappingURL=ShaderBuilder.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/WebGLPoints\n */\nimport { assign } from '../obj.js';\nimport WebGLPointsLayerRenderer from '../renderer/webgl/PointsLayer.js';\nimport { parseLiteralStyle } from '../webgl/ShaderBuilder.js';\nimport Layer from './Layer.js';\n/**\n * @typedef {Object} Options\n * @property {import('../style/LiteralStyle.js').LiteralStyle} style Literal style to apply to the layer features.\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../source/Vector.js\").default} [source] Source.\n * @property {boolean} [disableHitDetection=false] Setting this to true will provide a slight performance boost, but will\n * prevent all hit detection on the layer.\n */\n/**\n * @classdesc\n * Layer optimized for rendering large point datasets. Takes a `style` property which\n * is a serializable JSON object describing how the layer should be rendered.\n *\n * Here are a few samples of literal style objects:\n * ```js\n * const style = {\n *   symbol: {\n *     symbolType: 'circle',\n *     size: 8,\n *     color: '#33AAFF',\n *     opacity: 0.9\n *   }\n * }\n * ```\n *\n * ```js\n * const style = {\n *   symbol: {\n *     symbolType: 'image',\n *     offset: [0, 12],\n *     size: [4, 8],\n *     src: '../static/exclamation-mark.png'\n *   }\n * }\n * ```\n *\n * **Important: a `WebGLPoints` layer must be manually disposed when removed, otherwise the underlying WebGL context\n * will not be garbage collected.**\n *\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @fires import(\"../render/Event.js\").RenderEvent\n */\nvar WebGLPointsLayer = /** @class */ (function (_super) {\n    __extends(WebGLPointsLayer, _super);\n    /**\n     * @param {Options} options Options.\n     */\n    function WebGLPointsLayer(options) {\n        var _this = this;\n        var baseOptions = assign({}, options);\n        _this = _super.call(this, baseOptions) || this;\n        /**\n         * @private\n         * @type {import('../webgl/ShaderBuilder.js').StyleParseResult}\n         */\n        _this.parseResult_ = parseLiteralStyle(options.style);\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.hitDetectionDisabled_ = !!options.disableHitDetection;\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    WebGLPointsLayer.prototype.createRenderer = function () {\n        return new WebGLPointsLayerRenderer(this, {\n            vertexShader: this.parseResult_.builder.getSymbolVertexShader(),\n            fragmentShader: this.parseResult_.builder.getSymbolFragmentShader(),\n            hitVertexShader: !this.hitDetectionDisabled_ &&\n                this.parseResult_.builder.getSymbolVertexShader(true),\n            hitFragmentShader: !this.hitDetectionDisabled_ &&\n                this.parseResult_.builder.getSymbolFragmentShader(true),\n            uniforms: this.parseResult_.uniforms,\n            attributes: this.parseResult_.attributes\n        });\n    };\n    /**\n     *\n     * @inheritDoc\n     */\n    WebGLPointsLayer.prototype.disposeInternal = function () {\n        this.renderer_.dispose();\n        _super.prototype.disposeInternal.call(this);\n    };\n    return WebGLPointsLayer;\n}(Layer));\nexport default WebGLPointsLayer;\n//# sourceMappingURL=WebGLPoints.js.map","/**\n * @module ol/tilegrid/common\n */\n/**\n * Default maximum zoom for default tile grids.\n * @type {number}\n */\nexport var DEFAULT_MAX_ZOOM = 42;\n/**\n * Default tile size.\n * @type {number}\n */\nexport var DEFAULT_TILE_SIZE = 256;\n//# sourceMappingURL=common.js.map","/**\n * @module ol/TileRange\n */\n/**\n * A representation of a contiguous block of tiles.  A tile range is specified\n * by its min/max tile coordinates and is inclusive of coordinates.\n */\nvar TileRange = /** @class */ (function () {\n    /**\n     * @param {number} minX Minimum X.\n     * @param {number} maxX Maximum X.\n     * @param {number} minY Minimum Y.\n     * @param {number} maxY Maximum Y.\n     */\n    function TileRange(minX, maxX, minY, maxY) {\n        /**\n         * @type {number}\n         */\n        this.minX = minX;\n        /**\n         * @type {number}\n         */\n        this.maxX = maxX;\n        /**\n         * @type {number}\n         */\n        this.minY = minY;\n        /**\n         * @type {number}\n         */\n        this.maxY = maxY;\n    }\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @return {boolean} Contains tile coordinate.\n     */\n    TileRange.prototype.contains = function (tileCoord) {\n        return this.containsXY(tileCoord[1], tileCoord[2]);\n    };\n    /**\n     * @param {TileRange} tileRange Tile range.\n     * @return {boolean} Contains.\n     */\n    TileRange.prototype.containsTileRange = function (tileRange) {\n        return this.minX <= tileRange.minX && tileRange.maxX <= this.maxX &&\n            this.minY <= tileRange.minY && tileRange.maxY <= this.maxY;\n    };\n    /**\n     * @param {number} x Tile coordinate x.\n     * @param {number} y Tile coordinate y.\n     * @return {boolean} Contains coordinate.\n     */\n    TileRange.prototype.containsXY = function (x, y) {\n        return this.minX <= x && x <= this.maxX && this.minY <= y && y <= this.maxY;\n    };\n    /**\n     * @param {TileRange} tileRange Tile range.\n     * @return {boolean} Equals.\n     */\n    TileRange.prototype.equals = function (tileRange) {\n        return this.minX == tileRange.minX && this.minY == tileRange.minY &&\n            this.maxX == tileRange.maxX && this.maxY == tileRange.maxY;\n    };\n    /**\n     * @param {TileRange} tileRange Tile range.\n     */\n    TileRange.prototype.extend = function (tileRange) {\n        if (tileRange.minX < this.minX) {\n            this.minX = tileRange.minX;\n        }\n        if (tileRange.maxX > this.maxX) {\n            this.maxX = tileRange.maxX;\n        }\n        if (tileRange.minY < this.minY) {\n            this.minY = tileRange.minY;\n        }\n        if (tileRange.maxY > this.maxY) {\n            this.maxY = tileRange.maxY;\n        }\n    };\n    /**\n     * @return {number} Height.\n     */\n    TileRange.prototype.getHeight = function () {\n        return this.maxY - this.minY + 1;\n    };\n    /**\n     * @return {import(\"./size.js\").Size} Size.\n     */\n    TileRange.prototype.getSize = function () {\n        return [this.getWidth(), this.getHeight()];\n    };\n    /**\n     * @return {number} Width.\n     */\n    TileRange.prototype.getWidth = function () {\n        return this.maxX - this.minX + 1;\n    };\n    /**\n     * @param {TileRange} tileRange Tile range.\n     * @return {boolean} Intersects.\n     */\n    TileRange.prototype.intersects = function (tileRange) {\n        return this.minX <= tileRange.maxX &&\n            this.maxX >= tileRange.minX &&\n            this.minY <= tileRange.maxY &&\n            this.maxY >= tileRange.minY;\n    };\n    return TileRange;\n}());\n/**\n * @param {number} minX Minimum X.\n * @param {number} maxX Maximum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxY Maximum Y.\n * @param {TileRange=} tileRange TileRange.\n * @return {TileRange} Tile range.\n */\nexport function createOrUpdate(minX, maxX, minY, maxY, tileRange) {\n    if (tileRange !== undefined) {\n        tileRange.minX = minX;\n        tileRange.maxX = maxX;\n        tileRange.minY = minY;\n        tileRange.maxY = maxY;\n        return tileRange;\n    }\n    else {\n        return new TileRange(minX, maxX, minY, maxY);\n    }\n}\nexport default TileRange;\n//# sourceMappingURL=TileRange.js.map","/**\n * @module ol/size\n */\n/**\n * An array of numbers representing a size: `[width, height]`.\n * @typedef {Array<number>} Size\n * @api\n */\n/**\n * Returns a buffered size.\n * @param {Size} size Size.\n * @param {number} num The amount by which to buffer.\n * @param {Size=} opt_size Optional reusable size array.\n * @return {Size} The buffered size.\n */\nexport function buffer(size, num, opt_size) {\n    if (opt_size === undefined) {\n        opt_size = [0, 0];\n    }\n    opt_size[0] = size[0] + 2 * num;\n    opt_size[1] = size[1] + 2 * num;\n    return opt_size;\n}\n/**\n * Determines if a size has a positive area.\n * @param {Size} size The size to test.\n * @return {boolean} The size has a positive area.\n */\nexport function hasArea(size) {\n    return size[0] > 0 && size[1] > 0;\n}\n/**\n * Returns a size scaled by a ratio. The result will be an array of integers.\n * @param {Size} size Size.\n * @param {number} ratio Ratio.\n * @param {Size=} opt_size Optional reusable size array.\n * @return {Size} The scaled size.\n */\nexport function scale(size, ratio, opt_size) {\n    if (opt_size === undefined) {\n        opt_size = [0, 0];\n    }\n    opt_size[0] = (size[0] * ratio + 0.5) | 0;\n    opt_size[1] = (size[1] * ratio + 0.5) | 0;\n    return opt_size;\n}\n/**\n * Returns an `Size` array for the passed in number (meaning: square) or\n * `Size` array.\n * (meaning: non-square),\n * @param {number|Size} size Width and height.\n * @param {Size=} opt_size Optional reusable size array.\n * @return {Size} Size.\n * @api\n */\nexport function toSize(size, opt_size) {\n    if (Array.isArray(size)) {\n        return size;\n    }\n    else {\n        if (opt_size === undefined) {\n            opt_size = [size, size];\n        }\n        else {\n            opt_size[0] = size;\n            opt_size[1] = size;\n        }\n        return opt_size;\n    }\n}\n//# sourceMappingURL=size.js.map","/**\n * @module ol/tilecoord\n */\n/**\n * An array of three numbers representing the location of a tile in a tile\n * grid. The order is `z` (zoom level), `x` (column), and `y` (row).\n * @typedef {Array<number>} TileCoord\n * @api\n */\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {TileCoord=} opt_tileCoord Tile coordinate.\n * @return {TileCoord} Tile coordinate.\n */\nexport function createOrUpdate(z, x, y, opt_tileCoord) {\n    if (opt_tileCoord !== undefined) {\n        opt_tileCoord[0] = z;\n        opt_tileCoord[1] = x;\n        opt_tileCoord[2] = y;\n        return opt_tileCoord;\n    }\n    else {\n        return [z, x, y];\n    }\n}\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {string} Key.\n */\nexport function getKeyZXY(z, x, y) {\n    return z + '/' + x + '/' + y;\n}\n/**\n * Get the key for a tile coord.\n * @param {TileCoord} tileCoord The tile coord.\n * @return {string} Key.\n */\nexport function getKey(tileCoord) {\n    return getKeyZXY(tileCoord[0], tileCoord[1], tileCoord[2]);\n}\n/**\n * Get a tile coord given a key.\n * @param {string} key The tile coord key.\n * @return {TileCoord} The tile coord.\n */\nexport function fromKey(key) {\n    return key.split('/').map(Number);\n}\n/**\n * @param {TileCoord} tileCoord Tile coord.\n * @return {number} Hash.\n */\nexport function hash(tileCoord) {\n    return (tileCoord[1] << tileCoord[0]) + tileCoord[2];\n}\n/**\n * @param {TileCoord} tileCoord Tile coordinate.\n * @param {!import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {boolean} Tile coordinate is within extent and zoom level range.\n */\nexport function withinExtentAndZ(tileCoord, tileGrid) {\n    var z = tileCoord[0];\n    var x = tileCoord[1];\n    var y = tileCoord[2];\n    if (tileGrid.getMinZoom() > z || z > tileGrid.getMaxZoom()) {\n        return false;\n    }\n    var extent = tileGrid.getExtent();\n    var tileRange;\n    if (!extent) {\n        tileRange = tileGrid.getFullTileRange(z);\n    }\n    else {\n        tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n    }\n    if (!tileRange) {\n        return true;\n    }\n    else {\n        return tileRange.containsXY(x, y);\n    }\n}\n//# sourceMappingURL=tilecoord.js.map","/**\n * @module ol/tilegrid/TileGrid\n */\nimport { DEFAULT_TILE_SIZE } from './common.js';\nimport { assert } from '../asserts.js';\nimport TileRange, { createOrUpdate as createOrUpdateTileRange } from '../TileRange.js';\nimport { isSorted, linearFindNearest } from '../array.js';\nimport { createOrUpdate, getTopLeft } from '../extent.js';\nimport { clamp } from '../math.js';\nimport { toSize } from '../size.js';\nimport { createOrUpdate as createOrUpdateTileCoord } from '../tilecoord.js';\n/**\n * @private\n * @type {import(\"../tilecoord.js\").TileCoord}\n */\nvar tmpTileCoord = [0, 0, 0];\n/**\n * @typedef {Object} Options\n * @property {import(\"../extent.js\").Extent} [extent] Extent for the tile grid. No tiles outside this\n * extent will be requested by {@link module:ol/source/Tile} sources. When no `origin` or\n * `origins` are configured, the `origin` will be set to the top-left corner of the extent.\n * @property {number} [minZoom=0] Minimum zoom.\n * @property {import(\"../coordinate.js\").Coordinate} [origin] The tile grid origin, i.e. where the `x`\n * and `y` axes meet (`[z, 0, 0]`). Tile coordinates increase left to right and downwards. If not\n * specified, `extent` or `origins` must be provided.\n * @property {Array<import(\"../coordinate.js\").Coordinate>} [origins] Tile grid origins, i.e. where\n * the `x` and `y` axes meet (`[z, 0, 0]`), for each zoom level. If given, the array length\n * should match the length of the `resolutions` array, i.e. each resolution can have a different\n * origin. Tile coordinates increase left to right and downwards. If not specified, `extent` or\n * `origin` must be provided.\n * @property {!Array<number>} resolutions Resolutions. The array index of each resolution needs\n * to match the zoom level. This means that even if a `minZoom` is configured, the resolutions\n * array will have a length of `maxZoom + 1`.\n * @property {Array<import(\"../size.js\").Size>} [sizes] Number of tile rows and columns\n * of the grid for each zoom level. If specified the values\n * define each zoom level's extent together with the `origin` or `origins`.\n * A grid `extent` can be configured in addition, and will further limit the extent\n * for which tile requests are made by sources. If the bottom-left corner of\n * an extent is used as `origin` or `origins`, then the `y` value must be\n * negative because OpenLayers tile coordinates use the top left as the origin.\n * @property {number|import(\"../size.js\").Size} [tileSize] Tile size.\n * Default is `[256, 256]`.\n * @property {Array<import(\"../size.js\").Size>} [tileSizes] Tile sizes. If given, the array length\n * should match the length of the `resolutions` array, i.e. each resolution can have a different\n * tile size.\n */\n/**\n * @classdesc\n * Base class for setting the grid pattern for sources accessing tiled-image\n * servers.\n * @api\n */\nvar TileGrid = /** @class */ (function () {\n    /**\n     * @param {Options} options Tile grid options.\n     */\n    function TileGrid(options) {\n        /**\n         * @protected\n         * @type {number}\n         */\n        this.minZoom = options.minZoom !== undefined ? options.minZoom : 0;\n        /**\n         * @private\n         * @type {!Array<number>}\n         */\n        this.resolutions_ = options.resolutions;\n        assert(isSorted(this.resolutions_, function (a, b) {\n            return b - a;\n        }, true), 17); // `resolutions` must be sorted in descending order\n        // check if we've got a consistent zoom factor and origin\n        var zoomFactor;\n        if (!options.origins) {\n            for (var i = 0, ii = this.resolutions_.length - 1; i < ii; ++i) {\n                if (!zoomFactor) {\n                    zoomFactor = this.resolutions_[i] / this.resolutions_[i + 1];\n                }\n                else {\n                    if (this.resolutions_[i] / this.resolutions_[i + 1] !== zoomFactor) {\n                        zoomFactor = undefined;\n                        break;\n                    }\n                }\n            }\n        }\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.zoomFactor_ = zoomFactor;\n        /**\n         * @protected\n         * @type {number}\n         */\n        this.maxZoom = this.resolutions_.length - 1;\n        /**\n         * @private\n         * @type {import(\"../coordinate.js\").Coordinate}\n         */\n        this.origin_ = options.origin !== undefined ? options.origin : null;\n        /**\n         * @private\n         * @type {Array<import(\"../coordinate.js\").Coordinate>}\n         */\n        this.origins_ = null;\n        if (options.origins !== undefined) {\n            this.origins_ = options.origins;\n            assert(this.origins_.length == this.resolutions_.length, 20); // Number of `origins` and `resolutions` must be equal\n        }\n        var extent = options.extent;\n        if (extent !== undefined &&\n            !this.origin_ && !this.origins_) {\n            this.origin_ = getTopLeft(extent);\n        }\n        assert((!this.origin_ && this.origins_) || (this.origin_ && !this.origins_), 18); // Either `origin` or `origins` must be configured, never both\n        /**\n         * @private\n         * @type {Array<number|import(\"../size.js\").Size>}\n         */\n        this.tileSizes_ = null;\n        if (options.tileSizes !== undefined) {\n            this.tileSizes_ = options.tileSizes;\n            assert(this.tileSizes_.length == this.resolutions_.length, 19); // Number of `tileSizes` and `resolutions` must be equal\n        }\n        /**\n         * @private\n         * @type {number|import(\"../size.js\").Size}\n         */\n        this.tileSize_ = options.tileSize !== undefined ?\n            options.tileSize :\n            !this.tileSizes_ ? DEFAULT_TILE_SIZE : null;\n        assert((!this.tileSize_ && this.tileSizes_) ||\n            (this.tileSize_ && !this.tileSizes_), 22); // Either `tileSize` or `tileSizes` must be configured, never both\n        /**\n         * @private\n         * @type {import(\"../extent.js\").Extent}\n         */\n        this.extent_ = extent !== undefined ? extent : null;\n        /**\n         * @private\n         * @type {Array<import(\"../TileRange.js\").default>}\n         */\n        this.fullTileRanges_ = null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        this.tmpSize_ = [0, 0];\n        if (options.sizes !== undefined) {\n            this.fullTileRanges_ = options.sizes.map(function (size, z) {\n                var tileRange = new TileRange(Math.min(0, size[0]), Math.max(size[0] - 1, -1), Math.min(0, size[1]), Math.max(size[1] - 1, -1));\n                return tileRange;\n            }, this);\n        }\n        else if (extent) {\n            this.calculateTileRanges_(extent);\n        }\n    }\n    /**\n     * Call a function with each tile coordinate for a given extent and zoom level.\n     *\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {number} zoom Integer zoom level.\n     * @param {function(import(\"../tilecoord.js\").TileCoord): void} callback Function called with each tile coordinate.\n     * @api\n     */\n    TileGrid.prototype.forEachTileCoord = function (extent, zoom, callback) {\n        var tileRange = this.getTileRangeForExtentAndZ(extent, zoom);\n        for (var i = tileRange.minX, ii = tileRange.maxX; i <= ii; ++i) {\n            for (var j = tileRange.minY, jj = tileRange.maxY; j <= jj; ++j) {\n                callback([zoom, i, j]);\n            }\n        }\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {function(number, import(\"../TileRange.js\").default): boolean} callback Callback.\n     * @param {import(\"../TileRange.js\").default=} opt_tileRange Temporary import(\"../TileRange.js\").default object.\n     * @param {import(\"../extent.js\").Extent=} opt_extent Temporary import(\"../extent.js\").Extent object.\n     * @return {boolean} Callback succeeded.\n     */\n    TileGrid.prototype.forEachTileCoordParentTileRange = function (tileCoord, callback, opt_tileRange, opt_extent) {\n        var tileRange, x, y;\n        var tileCoordExtent = null;\n        var z = tileCoord[0] - 1;\n        if (this.zoomFactor_ === 2) {\n            x = tileCoord[1];\n            y = tileCoord[2];\n        }\n        else {\n            tileCoordExtent = this.getTileCoordExtent(tileCoord, opt_extent);\n        }\n        while (z >= this.minZoom) {\n            if (this.zoomFactor_ === 2) {\n                x = Math.floor(x / 2);\n                y = Math.floor(y / 2);\n                tileRange = createOrUpdateTileRange(x, x, y, y, opt_tileRange);\n            }\n            else {\n                tileRange = this.getTileRangeForExtentAndZ(tileCoordExtent, z, opt_tileRange);\n            }\n            if (callback(z, tileRange)) {\n                return true;\n            }\n            --z;\n        }\n        return false;\n    };\n    /**\n     * Get the extent for this tile grid, if it was configured.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     * @api\n     */\n    TileGrid.prototype.getExtent = function () {\n        return this.extent_;\n    };\n    /**\n     * Get the maximum zoom level for the grid.\n     * @return {number} Max zoom.\n     * @api\n     */\n    TileGrid.prototype.getMaxZoom = function () {\n        return this.maxZoom;\n    };\n    /**\n     * Get the minimum zoom level for the grid.\n     * @return {number} Min zoom.\n     * @api\n     */\n    TileGrid.prototype.getMinZoom = function () {\n        return this.minZoom;\n    };\n    /**\n     * Get the origin for the grid at the given zoom level.\n     * @param {number} z Integer zoom level.\n     * @return {import(\"../coordinate.js\").Coordinate} Origin.\n     * @api\n     */\n    TileGrid.prototype.getOrigin = function (z) {\n        if (this.origin_) {\n            return this.origin_;\n        }\n        else {\n            return this.origins_[z];\n        }\n    };\n    /**\n     * Get the resolution for the given zoom level.\n     * @param {number} z Integer zoom level.\n     * @return {number} Resolution.\n     * @api\n     */\n    TileGrid.prototype.getResolution = function (z) {\n        return this.resolutions_[z];\n    };\n    /**\n     * Get the list of resolutions for the tile grid.\n     * @return {Array<number>} Resolutions.\n     * @api\n     */\n    TileGrid.prototype.getResolutions = function () {\n        return this.resolutions_;\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {import(\"../TileRange.js\").default=} opt_tileRange Temporary import(\"../TileRange.js\").default object.\n     * @param {import(\"../extent.js\").Extent=} opt_extent Temporary import(\"../extent.js\").Extent object.\n     * @return {import(\"../TileRange.js\").default} Tile range.\n     */\n    TileGrid.prototype.getTileCoordChildTileRange = function (tileCoord, opt_tileRange, opt_extent) {\n        if (tileCoord[0] < this.maxZoom) {\n            if (this.zoomFactor_ === 2) {\n                var minX = tileCoord[1] * 2;\n                var minY = tileCoord[2] * 2;\n                return createOrUpdateTileRange(minX, minX + 1, minY, minY + 1, opt_tileRange);\n            }\n            var tileCoordExtent = this.getTileCoordExtent(tileCoord, opt_extent);\n            return this.getTileRangeForExtentAndZ(tileCoordExtent, tileCoord[0] + 1, opt_tileRange);\n        }\n        return null;\n    };\n    /**\n     * Get the extent for a tile range.\n     * @param {number} z Integer zoom level.\n     * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n     * @param {import(\"../extent.js\").Extent=} opt_extent Temporary import(\"../extent.js\").Extent object.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     */\n    TileGrid.prototype.getTileRangeExtent = function (z, tileRange, opt_extent) {\n        var origin = this.getOrigin(z);\n        var resolution = this.getResolution(z);\n        var tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n        var minX = origin[0] + tileRange.minX * tileSize[0] * resolution;\n        var maxX = origin[0] + (tileRange.maxX + 1) * tileSize[0] * resolution;\n        var minY = origin[1] + tileRange.minY * tileSize[1] * resolution;\n        var maxY = origin[1] + (tileRange.maxY + 1) * tileSize[1] * resolution;\n        return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n    };\n    /**\n     * Get a tile range for the given extent and integer zoom level.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {number} z Integer zoom level.\n     * @param {import(\"../TileRange.js\").default=} opt_tileRange Temporary tile range object.\n     * @return {import(\"../TileRange.js\").default} Tile range.\n     */\n    TileGrid.prototype.getTileRangeForExtentAndZ = function (extent, z, opt_tileRange) {\n        var tileCoord = tmpTileCoord;\n        this.getTileCoordForXYAndZ_(extent[0], extent[3], z, false, tileCoord);\n        var minX = tileCoord[1];\n        var minY = tileCoord[2];\n        this.getTileCoordForXYAndZ_(extent[2], extent[1], z, true, tileCoord);\n        return createOrUpdateTileRange(minX, tileCoord[1], minY, tileCoord[2], opt_tileRange);\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @return {import(\"../coordinate.js\").Coordinate} Tile center.\n     */\n    TileGrid.prototype.getTileCoordCenter = function (tileCoord) {\n        var origin = this.getOrigin(tileCoord[0]);\n        var resolution = this.getResolution(tileCoord[0]);\n        var tileSize = toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n        return [\n            origin[0] + (tileCoord[1] + 0.5) * tileSize[0] * resolution,\n            origin[1] - (tileCoord[2] + 0.5) * tileSize[1] * resolution\n        ];\n    };\n    /**\n     * Get the extent of a tile coordinate.\n     *\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {import(\"../extent.js\").Extent=} opt_extent Temporary extent object.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     * @api\n     */\n    TileGrid.prototype.getTileCoordExtent = function (tileCoord, opt_extent) {\n        var origin = this.getOrigin(tileCoord[0]);\n        var resolution = this.getResolution(tileCoord[0]);\n        var tileSize = toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n        var minX = origin[0] + tileCoord[1] * tileSize[0] * resolution;\n        var minY = origin[1] - (tileCoord[2] + 1) * tileSize[1] * resolution;\n        var maxX = minX + tileSize[0] * resolution;\n        var maxY = minY + tileSize[1] * resolution;\n        return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n    };\n    /**\n     * Get the tile coordinate for the given map coordinate and resolution.  This\n     * method considers that coordinates that intersect tile boundaries should be\n     * assigned the higher tile coordinate.\n     *\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {number} resolution Resolution.\n     * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Destination import(\"../tilecoord.js\").TileCoord object.\n     * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n     * @api\n     */\n    TileGrid.prototype.getTileCoordForCoordAndResolution = function (coordinate, resolution, opt_tileCoord) {\n        return this.getTileCoordForXYAndResolution_(coordinate[0], coordinate[1], resolution, false, opt_tileCoord);\n    };\n    /**\n     * Note that this method should not be called for resolutions that correspond\n     * to an integer zoom level.  Instead call the `getTileCoordForXYAndZ_` method.\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {number} resolution Resolution (for a non-integer zoom level).\n     * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n     *     intersections go to the higher tile coordinate, let edge intersections\n     *     go to the lower tile coordinate.\n     * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Temporary import(\"../tilecoord.js\").TileCoord object.\n     * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n     * @private\n     */\n    TileGrid.prototype.getTileCoordForXYAndResolution_ = function (x, y, resolution, reverseIntersectionPolicy, opt_tileCoord) {\n        var z = this.getZForResolution(resolution);\n        var scale = resolution / this.getResolution(z);\n        var origin = this.getOrigin(z);\n        var tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n        var adjustX = reverseIntersectionPolicy ? 0.5 : 0;\n        var adjustY = reverseIntersectionPolicy ? 0.5 : 0;\n        var xFromOrigin = Math.floor((x - origin[0]) / resolution + adjustX);\n        var yFromOrigin = Math.floor((origin[1] - y) / resolution + adjustY);\n        var tileCoordX = scale * xFromOrigin / tileSize[0];\n        var tileCoordY = scale * yFromOrigin / tileSize[1];\n        if (reverseIntersectionPolicy) {\n            tileCoordX = Math.ceil(tileCoordX) - 1;\n            tileCoordY = Math.ceil(tileCoordY) - 1;\n        }\n        else {\n            tileCoordX = Math.floor(tileCoordX);\n            tileCoordY = Math.floor(tileCoordY);\n        }\n        return createOrUpdateTileCoord(z, tileCoordX, tileCoordY, opt_tileCoord);\n    };\n    /**\n     * Although there is repetition between this method and `getTileCoordForXYAndResolution_`,\n     * they should have separate implementations.  This method is for integer zoom\n     * levels.  The other method should only be called for resolutions corresponding\n     * to non-integer zoom levels.\n     * @param {number} x Map x coordinate.\n     * @param {number} y Map y coordinate.\n     * @param {number} z Integer zoom level.\n     * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n     *     intersections go to the higher tile coordinate, let edge intersections\n     *     go to the lower tile coordinate.\n     * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Temporary import(\"../tilecoord.js\").TileCoord object.\n     * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n     * @private\n     */\n    TileGrid.prototype.getTileCoordForXYAndZ_ = function (x, y, z, reverseIntersectionPolicy, opt_tileCoord) {\n        var origin = this.getOrigin(z);\n        var resolution = this.getResolution(z);\n        var tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n        var adjustX = reverseIntersectionPolicy ? 0.5 : 0;\n        var adjustY = reverseIntersectionPolicy ? 0.5 : 0;\n        var xFromOrigin = Math.floor((x - origin[0]) / resolution + adjustX);\n        var yFromOrigin = Math.floor((origin[1] - y) / resolution + adjustY);\n        var tileCoordX = xFromOrigin / tileSize[0];\n        var tileCoordY = yFromOrigin / tileSize[1];\n        if (reverseIntersectionPolicy) {\n            tileCoordX = Math.ceil(tileCoordX) - 1;\n            tileCoordY = Math.ceil(tileCoordY) - 1;\n        }\n        else {\n            tileCoordX = Math.floor(tileCoordX);\n            tileCoordY = Math.floor(tileCoordY);\n        }\n        return createOrUpdateTileCoord(z, tileCoordX, tileCoordY, opt_tileCoord);\n    };\n    /**\n     * Get a tile coordinate given a map coordinate and zoom level.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {number} z Zoom level.\n     * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Destination import(\"../tilecoord.js\").TileCoord object.\n     * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n     * @api\n     */\n    TileGrid.prototype.getTileCoordForCoordAndZ = function (coordinate, z, opt_tileCoord) {\n        return this.getTileCoordForXYAndZ_(coordinate[0], coordinate[1], z, false, opt_tileCoord);\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @return {number} Tile resolution.\n     */\n    TileGrid.prototype.getTileCoordResolution = function (tileCoord) {\n        return this.resolutions_[tileCoord[0]];\n    };\n    /**\n     * Get the tile size for a zoom level. The type of the return value matches the\n     * `tileSize` or `tileSizes` that the tile grid was configured with. To always\n     * get an `import(\"../size.js\").Size`, run the result through `import(\"../size.js\").Size.toSize()`.\n     * @param {number} z Z.\n     * @return {number|import(\"../size.js\").Size} Tile size.\n     * @api\n     */\n    TileGrid.prototype.getTileSize = function (z) {\n        if (this.tileSize_) {\n            return this.tileSize_;\n        }\n        else {\n            return this.tileSizes_[z];\n        }\n    };\n    /**\n     * @param {number} z Zoom level.\n     * @return {import(\"../TileRange.js\").default} Extent tile range for the specified zoom level.\n     */\n    TileGrid.prototype.getFullTileRange = function (z) {\n        if (!this.fullTileRanges_) {\n            return null;\n        }\n        else {\n            return this.fullTileRanges_[z];\n        }\n    };\n    /**\n     * @param {number} resolution Resolution.\n     * @param {number=} opt_direction If 0, the nearest resolution will be used.\n     *     If 1, the nearest lower resolution will be used. If -1, the nearest\n     *     higher resolution will be used. Default is 0.\n     * @return {number} Z.\n     * @api\n     */\n    TileGrid.prototype.getZForResolution = function (resolution, opt_direction) {\n        var z = linearFindNearest(this.resolutions_, resolution, opt_direction || 0);\n        return clamp(z, this.minZoom, this.maxZoom);\n    };\n    /**\n     * @param {!import(\"../extent.js\").Extent} extent Extent for this tile grid.\n     * @private\n     */\n    TileGrid.prototype.calculateTileRanges_ = function (extent) {\n        var length = this.resolutions_.length;\n        var fullTileRanges = new Array(length);\n        for (var z = this.minZoom; z < length; ++z) {\n            fullTileRanges[z] = this.getTileRangeForExtentAndZ(extent, z);\n        }\n        this.fullTileRanges_ = fullTileRanges;\n    };\n    return TileGrid;\n}());\nexport default TileGrid;\n//# sourceMappingURL=TileGrid.js.map"],"sourceRoot":""}